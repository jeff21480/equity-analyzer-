<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AppKey ‚Äì Equity Analyz√©r</title>

  <!-- jsPDF pro export DCF do PDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #5b21b6 0, #111827 55%, #020617 100%);
      color: #f9fafb;
    }

    header {
      padding: 28px 16px 10px;
      text-align: center;
    }

    .app-title {
      font-size: 2.4rem;
      font-weight: 800;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: linear-gradient(90deg, #f97316, #facc15, #22c55e);
      -webkit-background-clip: text;
      color: transparent;
      margin-bottom: 4px;
    }

    .app-subtitle {
      font-size: 0.9rem;
      color: #e5e7eb;
      opacity: 0.85;
    }

    main {
      max-width: 980px;
      margin: 0 auto 40px;
      padding: 0 14px 24px;
    }

    /* ≈†UPL√çKY (drawers) */
    .drawer {
      background: radial-gradient(circle at top left, rgba(129, 140, 248, 0.22), rgba(15, 23, 42, 0.96));
      border-radius: 22px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      margin-bottom: 16px;
      overflow: hidden;
      box-shadow: 0 18px 35px rgba(15, 23, 42, 0.8);
      transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
    }

    .drawer.main {
      border-width: 2px;
      border-color: rgba(251, 191, 36, 0.9);
      box-shadow: 0 24px 55px rgba(15, 23, 42, 0.95);
    }

    .drawer:hover {
      transform: translateY(-2px);
      box-shadow: 0 24px 55px rgba(15, 23, 42, 1);
    }

    .drawer-header {
      padding: 14px 16px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      gap: 12px;
    }

    .drawer-main-label {
      font-size: 0.8rem;
      letter-spacing: 0.13em;
      text-transform: uppercase;
      color: #fbbf24;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .drawer-title-block h2 {
      margin: 0;
      font-size: 1.18rem;
    }

    .drawer-title-block p {
      margin: 2px 0 0;
      font-size: 0.82rem;
      color: #e5e7eb;
      opacity: 0.9;
    }

    .drawer-icon {
      font-size: 1.5rem;
      margin-right: 8px;
    }

    .drawer-toggle {
      font-size: 1.25rem;
      opacity: 0.8;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    .drawer.open .drawer-toggle {
      transform: rotate(180deg);
      opacity: 1;
    }

    .drawer-content {
      max-height: 0;
      overflow: hidden;
      padding: 0 16px;
      transition: max-height 0.25s ease, padding-bottom 0.25s ease;
    }

    .drawer.open .drawer-content {
      max-height: 1400px; /* dost velk√© na obsah */
      padding-bottom: 14px;
    }

    /* Formul√°≈ô / obsah */
    .section-body {
      margin-top: 10px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 10px;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    @media (max-width: 720px) {
      .grid-2,
      .grid-3 {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    label {
      font-size: 0.8rem;
      color: #e5e7eb;
      opacity: 0.9;
      display: block;
      margin-bottom: 3px;
    }

    input[type="text"],
    input[type="number"],
    input[type="date"],
    textarea,
    select {
      width: 100%;
      padding: 8px 9px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: #f9fafb;
      font-size: 0.9rem;
    }

    textarea {
      resize: vertical;
      min-height: 70px;
    }

    input::placeholder,
    textarea::placeholder {
      color: #9ca3af;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .btn {
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 0.85rem;
      border: 1px solid transparent;
      cursor: pointer;
      white-space: nowrap;
      font-weight: 500;
      transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease, border-color 0.15s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #22c55e, #a3e635);
      color: #052e16;
      box-shadow: 0 10px 20px rgba(22, 163, 74, 0.55);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 26px rgba(22, 163, 74, 0.7);
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.9);
      border-color: rgba(148, 163, 184, 0.9);
      color: #e5e7eb;
    }

    .btn-secondary:hover {
      background: rgba(30, 64, 175, 0.9);
      border-color: transparent;
    }

    .btn-danger {
      background: rgba(185, 28, 28, 0.95);
      color: #fee2e2;
    }

    .btn-danger:hover {
      background: #b91c1c;
    }

    .note {
      margin-top: 8px;
      font-size: 0.75rem;
      color: #c7d2fe;
      opacity: 0.85;
    }

    /* Karty / ≈°upl√≠ky uvnit≈ô ‚Äì ulo≈æen√© polo≈æky */
    .item-list {
      margin-top: 12px;
    }

    .item-card {
      background: linear-gradient(135deg, #4c1d95 0%, #7c3aed 45%, #1d1b3a 100%);
      padding: 14px 14px 10px;
      border-radius: 16px;
      margin-bottom: 10px;
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(216, 180, 254, 0.7);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .item-card.main {
      transform: scale(1.01);
      border-width: 2px;
      border-color: rgba(251, 191, 36, 0.95);
      box-shadow: 0 12px 28px rgba(15, 23, 42, 1);
    }

    .item-card:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 30px rgba(15, 23, 42, 1);
    }

    .item-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 4px;
    }

    .item-header h3 {
      margin: 0;
      font-size: 1rem;
    }

    .item-header span {
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .item-line {
      font-size: 0.82rem;
      margin: 1px 0;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      padding: 2px 7px;
      border-radius: 999px;
      font-size: 0.7rem;
      font-weight: 500;
      margin-left: 4px;
    }

    .pill.green {
      background: rgba(16, 185, 129, 0.2);
      color: #bbf7d0;
    }

    .pill.red {
      background: rgba(248, 113, 113, 0.25);
      color: #fecaca;
    }

    .item-actions {
      margin-top: 6px;
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    /* DCF v√Ωsledky */
    .dcf-results {
      margin-top: 12px;
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 8px;
    }

    .dcf-card {
      background: linear-gradient(135deg, #022c22, #064e3b);
      border-radius: 14px;
      padding: 10px;
      font-size: 0.84rem;
      box-shadow: 0 10px 22px rgba(6, 78, 59, 0.7);
    }

    .dcf-card h3 {
      margin: 0 0 4px;
      font-size: 0.9rem;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    footer {
      text-align: center;
      font-size: 0.75rem;
      color: #9ca3af;
      padding-bottom: 12px;
    }
  </style>
</head>
<body>
<header>
  <div class="app-title">APPKEY</div>
  <div class="app-subtitle">Equity Analyz√©r ‚Äì DCF, watchlist, earnings, √∫roƒçen√≠ a pozn√°mky. V≈°echno lok√°lnƒõ v prohl√≠≈æeƒçi.</div>
</header>

<main>

  <!-- HLAVN√ç ≈†UPL√çK ‚Äì DCF -->
  <section class="drawer main open" id="drawer-dcf">
    <div class="drawer-header">
      <div class="drawer-title-block">
        <div class="drawer-main-label">Hlavn√≠ ≈°upl√≠k</div>
        <h2>üìà V√Ωpoƒçet vnit≈ôn√≠ hodnoty (DCF, 3 sc√©n√°≈ôe)</h2>
        <p>Stƒõ≈æejn√≠ n√°stroj ‚Äì zad√°≈° EPS, r≈Øst, P/E a dostane≈° f√©rovou cenu v r≈Øzn√Ωch sc√©n√°≈ô√≠ch.</p>
      </div>
      <div class="drawer-toggle">‚ñ≤</div>
    </div>
    <div class="drawer-content">
      <div class="section-body">
        <div class="grid-2">
          <div>
            <label for="dcf-ticker">Ticker / firma</label>
            <input id="dcf-ticker" type="text" placeholder="PLTR, SOFI, AAPL‚Ä¶" />
          </div>
          <div>
            <label for="dcf-eps">Aktu√°ln√≠ EPS (TTM)</label>
            <input id="dcf-eps" type="number" step="0.01" placeholder="nap≈ô. 1.25" />
          </div>
        </div>

        <div class="grid-3" style="margin-top: 8px;">
          <div>
            <label for="dcf-years">Poƒçet let projekce</label>
            <input id="dcf-years" type="number" step="1" value="10" />
          </div>
          <div>
            <label for="dcf-discount">Diskontn√≠ sazba (%)</label>
            <input id="dcf-discount" type="number" step="0.1" value="9" />
          </div>
          <div>
            <label for="dcf-price">Aktu√°ln√≠ cena akcie</label>
            <input id="dcf-price" type="number" step="0.01" placeholder="nap≈ô. 18.50" />
          </div>
        </div>

        <div class="grid-3" style="margin-top: 8px;">
          <div>
            <label for="dcf-g1">R≈Øst EPS konzervativn√≠ (%)</label>
            <input id="dcf-g1" type="number" step="0.1" value="5" />
          </div>
          <div>
            <label for="dcf-g2">R≈Øst EPS z√°kladn√≠ (%)</label>
            <input id="dcf-g2" type="number" step="0.1" value="10" />
          </div>
          <div>
            <label for="dcf-g3">R≈Øst EPS optimistick√Ω (%)</label>
            <input id="dcf-g3" type="number" step="0.1" value="15" />
          </div>
        </div>

        <div class="grid-3" style="margin-top: 8px;">
          <div>
            <label for="dcf-pe1">C√≠lov√© P/E konzervativn√≠</label>
            <input id="dcf-pe1" type="number" step="0.1" value="12" />
          </div>
          <div>
            <label for="dcf-pe2">C√≠lov√© P/E z√°kladn√≠</label>
            <input id="dcf-pe2" type="number" step="0.1" value="18" />
          </div>
          <div>
            <label for="dcf-pe3">C√≠lov√© P/E optimistick√©</label>
            <input id="dcf-pe3" type="number" step="0.1" value="25" />
          </div>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" id="dcf-run">Spoƒç√≠tat DCF</button>
          <button class="btn btn-secondary" id="dcf-clear">Vymazat vstupy</button>
          <button class="btn btn-secondary" id="dcf-export">Exportovat DCF do PDF</button>
        </div>

        <p class="note">
          Model je zjednodu≈°en√Ω: diskontovan√© budouc√≠ EPS + termin√°ln√≠ hodnota (EPS<sub>n</sub> √ó P/E). Slou≈æ√≠ jako orientaƒçn√≠
          n√°stroj ‚Äì nen√≠ to investiƒçn√≠ doporuƒçen√≠.
        </p>

        <div class="dcf-results" id="dcf-results"></div>
        <div class="tag-row" id="dcf-tags"></div>
      </div>
    </div>
  </section>

  <!-- ≈†UPL√çK ‚Äì WATCHLIST -->
  <section class="drawer" id="drawer-watchlist">
    <div class="drawer-header">
      <div class="drawer-title-block">
        <h2>üìä Watchlist vyhodnocen√Ωch akci√≠</h2>
        <p>Sem ukl√°d√°≈° akcie, kter√© jsi vyhodnotil ‚Äì p≈ôehled n√°kup≈Ø, zisku a pozn√°mek.</p>
      </div>
      <div class="drawer-toggle">‚ñº</div>
    </div>
    <div class="drawer-content">
      <div class="section-body">
        <div class="grid-3">
          <div>
            <label for="wl-ticker">Ticker*</label>
            <input id="wl-ticker" type="text" placeholder="PLTR, SOFI‚Ä¶" />
          </div>
          <div>
            <label for="wl-name">N√°zev firmy</label>
            <input id="wl-name" type="text" placeholder="Palantir Technologies" />
          </div>
          <div>
            <label for="wl-buy">N√°kupn√≠ cena</label>
            <input id="wl-buy" type="number" step="0.01" placeholder="nap≈ô. 15.50" />
          </div>
        </div>

        <div class="grid-3" style="margin-top: 8px;">
          <div>
            <label for="wl-shares">Kusy</label>
            <input id="wl-shares" type="number" step="0.01" placeholder="nap≈ô. 50" />
          </div>
          <div>
            <label for="wl-current">Aktu√°ln√≠ cena</label>
            <input id="wl-current" type="number" step="0.01" placeholder="posledn√≠ close" />
          </div>
          <div>
            <label for="wl-tag">Tag / kategorie</label>
            <input id="wl-tag" type="text" placeholder="tech, AI, energie‚Ä¶" />
          </div>
        </div>

        <div style="margin-top: 8px;">
          <label for="wl-note">Pozn√°mka / teze</label>
          <textarea id="wl-note" placeholder="Proƒç dr≈æ√≠m, c√≠lov√° cena, rizika‚Ä¶"></textarea>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" id="wl-add">P≈ôidat / ulo≈æit pozici</button>
          <button class="btn btn-secondary" id="wl-clear">Vyƒçistit formul√°≈ô</button>
          <button class="btn btn-secondary" id="wl-reset-prices">Vynulovat aktu√°ln√≠ ceny</button>
        </div>

        <div class="item-list" id="wl-list"></div>

        <p class="note">
          Watchlist se ukl√°d√° do localStorage pod kl√≠ƒçem <code>ea_watchlist</code>. Prvn√≠ karta je zv√Ωraznƒõn√° jako ‚Äûhlavn√≠‚Äú.
        </p>
      </div>
    </div>
  </section>

  <!-- ≈†UPL√çK ‚Äì EARNINGS -->
  <section class="drawer" id="drawer-earnings">
    <div class="drawer-header">
      <div class="drawer-title-block">
        <h2>üóì Earnings kalend√°≈ô</h2>
        <p>Seznam d≈Øle≈æit√Ωch dat v√Ωsledk≈Ø a dal≈°√≠ch ud√°lost√≠ pro tvoje firmy.</p>
      </div>
      <div class="drawer-toggle">‚ñº</div>
    </div>
    <div class="drawer-content">
      <div class="section-body">
        <div class="grid-3">
          <div>
            <label for="er-ticker">Ticker*</label>
            <input id="er-ticker" type="text" placeholder="MSFT, UNH‚Ä¶" />
          </div>
          <div>
            <label for="er-date">Datum*</label>
            <input id="er-date" type="date" />
          </div>
          <div>
            <label for="er-type">Typ ud√°losti</label>
            <select id="er-type">
              <option value="Earnings">Earnings</option>
              <option value="Guidance">Guidance</option>
              <option value="Dividend">Dividend</option>
              <option value="Jin√©">Jin√©</option>
            </select>
          </div>
        </div>

        <div style="margin-top: 8px;">
          <label for="er-note">Pozn√°mka</label>
          <textarea id="er-note" placeholder="Q4 2025, d≈Øle≈æit√Ω report, sledovat r≈Øst tr≈æeb‚Ä¶"></textarea>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" id="er-add">P≈ôidat ud√°lost</button>
          <button class="btn btn-secondary" id="er-clear">Vyƒçistit formul√°≈ô</button>
        </div>

        <div class="item-list" id="er-list"></div>

        <p class="note">
          Ud√°losti se ukl√°daj√≠ do <code>ea_earnings</code> a jsou se≈ôazeny podle data.
        </p>
      </div>
    </div>
  </section>

  <!-- ≈†UPL√çK ‚Äì SLO≈ΩEN√â √öROƒåEN√ç -->
  <section class="drawer" id="drawer-interest">
    <div class="drawer-header">
      <div class="drawer-title-block">
        <h2>üí∞ Kalkulaƒçka slo≈æen√©ho √∫roƒçen√≠</h2>
        <p>Jednoduch√Ω v√Ωpoƒçet, kolik z ƒç√°stky vyroste za X let p≈ôi roƒçn√≠m √∫roku.</p>
      </div>
      <div class="drawer-toggle">‚ñº</div>
    </div>
    <div class="drawer-content">
      <div class="section-body">
        <div class="grid-3">
          <div>
            <label for="ci-principal">Poƒç√°teƒçn√≠ ƒç√°stka</label>
            <input id="ci-principal" type="number" step="0.01" placeholder="nap≈ô. 10000" />
          </div>
          <div>
            <label for="ci-rate">Roƒçn√≠ √∫rok (%)</label>
            <input id="ci-rate" type="number" step="0.1" placeholder="nap≈ô. 8" />
          </div>
          <div>
            <label for="ci-years">Poƒçet let</label>
            <input id="ci-years" type="number" step="1" placeholder="nap≈ô. 15" />
          </div>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" id="ci-run">Spoƒç√≠tat</button>
          <button class="btn btn-secondary" id="ci-clear">Vyƒçistit</button>
        </div>

        <div class="item-list" id="ci-result"></div>

        <p class="note">
          Poƒç√≠t√° se klasick√© roƒçn√≠ slo≈æen√© √∫roƒçen√≠: FV = P √ó (1 + r)<sup>n</sup>.
        </p>
      </div>
    </div>
  </section>

  <!-- ≈†UPL√çK ‚Äì POZN√ÅMKY -->
  <section class="drawer" id="drawer-notes">
    <div class="drawer-header">
      <div class="drawer-title-block">
        <h2>üìù Z√°pisn√≠k / pozn√°mky k akci√≠m</h2>
        <p>M√≠sto pro teze, n√°pady, katalyz√°tory a checklisty.</p>
      </div>
      <div class="drawer-toggle">‚ñº</div>
    </div>
    <div class="drawer-content">
      <div class="section-body">
        <div class="grid-2">
          <div>
            <label for="note-title">Titulek / ticker</label>
            <input id="note-title" type="text" placeholder="PLTR ‚Äì dlouhodob√° teze" />
          </div>
        </div>

        <div style="margin-top: 8px;">
          <label for="note-body">Text pozn√°mky</label>
          <textarea id="note-body" placeholder="Shrnut√≠ firmy, katalyz√°tory, rizika, co sledovat‚Ä¶"></textarea>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" id="note-save">Ulo≈æit pozn√°mku</button>
          <button class="btn btn-secondary" id="note-clear">Vyƒçistit</button>
        </div>

        <div class="item-list" id="note-list"></div>

        <p class="note">
          Pozn√°mky se ukl√°daj√≠ do <code>ea_notes</code>. M≈Ø≈æe≈° je naƒç√≠tat, upravovat i mazat.
        </p>
      </div>
    </div>
  </section>

</main>

<footer>
  AppKey ‚Äì v≈°echna data z≈Øst√°vaj√≠ jen ve tv√©m prohl√≠≈æeƒçi (localStorage).
</footer>

<script>
  // Pomocn√© funkce
  function toNum(val) {
    if (val === null || val === undefined || val === "") return NaN;
    return parseFloat(String(val).replace(",", "."));
  }

  function formatMoney(num) {
    if (isNaN(num)) return "-";
    return num.toFixed(2);
  }

  function formatPct(num) {
    if (isNaN(num)) return "-";
    return (num * 100).toFixed(1) + " %";
  }

  function todayISO() {
    return new Date().toISOString().slice(0, 10);
  }

  // Otev√≠r√°n√≠ / zav√≠r√°n√≠ ≈°upl√≠k≈Ø
  document.querySelectorAll(".drawer").forEach(function(drawer) {
    var header = drawer.querySelector(".drawer-header");
    var toggle = drawer.querySelector(".drawer-toggle");
    header.addEventListener("click", function(e) {
      // aby klik na input uvnit≈ô headeru nic nedƒõlal ‚Äì ale tam ≈æ√°dn√Ω nen√≠
      drawer.classList.toggle("open");
      // zmƒõna ≈°ipky
      if (toggle) {
        toggle.textContent = drawer.classList.contains("open") ? "‚ñ≤" : "‚ñº";
      }
    });
  });

  // --- DCF ---
  var dcfLastResults = [];

  function dcfRun() {
    var eps = toNum(document.getElementById("dcf-eps").value);
    var years = parseInt(document.getElementById("dcf-years").value, 10);
    var discPct = toNum(document.getElementById("dcf-discount").value);
    var price = toNum(document.getElementById("dcf-price").value);

    if (!eps || isNaN(eps)) {
      alert("Zadej pros√≠m EPS.");
      return;
    }
    if (!years || years <= 0 || isNaN(years)) {
      alert("Poƒçet let mus√≠ b√Ωt kladn√© ƒç√≠slo.");
      return;
    }
    if (isNaN(discPct) || discPct <= 0) {
      alert("Diskontn√≠ sazba mus√≠ b√Ωt kladn√°.");
      return;
    }

    var discount = discPct / 100;

    var scenarios = [
      {
        label: "Konzervativn√≠",
        growth: toNum(document.getElementById("dcf-g1").value) / 100,
        pe: toNum(document.getElementById("dcf-pe1").value)
      },
      {
        label: "Z√°kladn√≠",
        growth: toNum(document.getElementById("dcf-g2").value) / 100,
        pe: toNum(document.getElementById("dcf-pe2").value)
      },
      {
        label: "Optimistick√Ω",
        growth: toNum(document.getElementById("dcf-g3").value) / 100,
        pe: toNum(document.getElementById("dcf-pe3").value)
      }
    ];

    var resultsDiv = document.getElementById("dcf-results");
    var tagsDiv = document.getElementById("dcf-tags");
    resultsDiv.innerHTML = "";
    tagsDiv.innerHTML = "";

    // pokud pou≈æ√≠v√°≈° export do PDF, m√≠t nƒõkde glob√°lnƒõ: var dcfLastResults = [];
    dcfLastResults = [];

    scenarios.forEach(function (sc) {
      if (isNaN(sc.growth) || isNaN(sc.pe) || sc.pe <= 0) return;

      var epsT = eps;
      var sum = 0;
      for (var i = 1; i <= years; i++) {
        epsT = epsT * (1 + sc.growth);
        var discFactor = Math.pow(1 + discount, i);
        sum += epsT / discFactor;
      }

      var terminal = (epsT * sc.pe) / Math.pow(1 + discount, years);
      var fair = sum + terminal;

      var diff = NaN;
      var diffPct = NaN;
      if (!isNaN(price) && price > 0) {
        diff = fair - price;
        diffPct = (fair - price) / price;
      }

      // ulo≈æit pro PDF export
      dcfLastResults.push({
        label: sc.label,
        growth: sc.growth,
        pe: sc.pe,
        fair: fair,
        diff: diff,
        diffPct: diffPct
      });

      // kartiƒçka s v√Ωsledkem
      var card = document.createElement("div");
      card.className = "dcf-card";
      card.innerHTML =
        "<h3>" + sc.label + "</h3>" +
        "<div>R≈Øst EPS: <strong>" + (sc.growth * 100).toFixed(1) + " %</strong></div>" +
        "<div>C√≠lov√© P/E: <strong>" + sc.pe.toFixed(1) + "</strong></div>" +
        "<div>F√©rov√° cena: <strong>" + formatMoney(fair) + "</strong></div>" +
        "<div>Rozd√≠l vs. aktu√°ln√≠ cena: <strong>" +
          (isNaN(diffPct) ? "-" : (diffPct * 100).toFixed(1) + " %") +
        "</strong></div>";

      resultsDiv.appendChild(card);

      // mal√Ω ‚Äûpill‚Äú s procenty
      if (!isNaN(diffPct)) {
        var pill = document.createElement("div");
        var cls = "pill ";
        if (diffPct > 0.15) cls += "green";
        else if (diffPct < -0.15) cls += "red";
        pill.className = cls;
        pill.textContent = sc.label + ": " + (diffPct * 100).toFixed(1) + " %";
        tagsDiv.appendChild(pill);
      }
    });
  } // konec funkce dcfRun
