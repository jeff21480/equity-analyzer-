<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#29134a" />
  <title>Equity Analyzer</title>

  <!-- PWA (pokud používáš) -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png" />

  <style>
    :root{
      --bg0:#0b0614;
      --bg1:#140a24;
      --card:#1b0f2f;
      --card2:#22103a;
      --stroke:rgba(190,155,255,.22);
      --stroke2:rgba(130,210,255,.18);
      --glow:rgba(170,95,255,.25);
      --text:#f3efff;
      --muted:rgba(243,239,255,.72);
      --muted2:rgba(243,239,255,.58);

      --p1:#7d3cff; /* purple */
      --p2:#3aa7ff; /* blue */
      --p3:#b06cff; /* pink-ish */
      --good:#2ee59d;
      --warn:#ffcd4d;
      --bad:#ff5b7a;

      --r:18px;
      --r2:24px;
      --shadow: 0 18px 55px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 15% 10%, rgba(125,60,255,.22), transparent 55%),
        radial-gradient(900px 700px at 85% 15%, rgba(58,167,255,.18), transparent 55%),
        radial-gradient(900px 700px at 65% 75%, rgba(176,108,255,.14), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    a{color:inherit}
    .wrap{
      max-width: 1060px;
      margin: 0 auto;
      padding: 18px 14px 64px;
    }

    .topBar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 14px;
      border-radius: var(--r2);
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
      position: sticky;
      top: 10px;
      z-index: 10;
      backdrop-filter: blur(12px);
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      min-width: 220px;
    }
    .logo{
      width:46px; height:46px;
      border-radius: 18px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.22), transparent 45%),
        linear-gradient(135deg, var(--p1), var(--p2));
      box-shadow: 0 14px 35px rgba(125,60,255,.25), 0 10px 30px rgba(58,167,255,.18);
      border: 1px solid rgba(255,255,255,.14);
    }
    .brandText h1{
      margin:0;
      font-size: 22px;
      letter-spacing:.2px;
      line-height:1.05;
      font-weight: 900;
    }
    .brandText .sub{
      margin-top:3px;
      font-size: 13px;
      color: var(--muted);
      letter-spacing:.2px;
    }

    .topActions{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pillRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .btn{
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 999px;
      cursor:pointer;
      font-weight: 750;
      letter-spacing: .2px;
      transition: transform .08s ease, background .15s ease, border-color .15s ease;
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.18);
    }
    .btn:active{transform: translateY(0px) scale(.99);}

    .btnPrimary{
      background: linear-gradient(135deg, rgba(125,60,255,.95), rgba(58,167,255,.85));
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 16px 40px rgba(125,60,255,.22), 0 14px 36px rgba(58,167,255,.16);
    }

    .seg{
      display:flex;
      border-radius:999px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.12);
      overflow:hidden;
    }
    .seg button{
      padding:10px 14px;
      border:0;
      background: transparent;
      color: var(--muted);
      cursor:pointer;
      font-weight: 800;
      letter-spacing:.2px;
    }
    .seg button.active{
      color: var(--text);
      background: linear-gradient(135deg, rgba(125,60,255,.45), rgba(58,167,255,.28));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.10);
    }

    .tabs{
      display:flex;
      gap:10px;
      margin: 16px 2px 12px;
      flex-wrap:wrap;
    }
    .tab{
      flex: 0 0 auto;
      padding: 10px 14px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      cursor:pointer;
      font-weight: 900;
      letter-spacing:.2px;
      box-shadow: 0 10px 28px rgba(0,0,0,.22);
    }
    .tab.active{
      background: linear-gradient(135deg, rgba(125,60,255,.55), rgba(58,167,255,.25));
      color: var(--text);
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 16px 42px rgba(125,60,255,.18), 0 14px 36px rgba(58,167,255,.12);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.25fr .95fr;
      gap: 14px;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns:1fr;}
      .brand{min-width:unset;}
    }

    .card{
      background:
        radial-gradient(700px 380px at 15% 0%, rgba(125,60,255,.15), transparent 55%),
        radial-gradient(700px 380px at 85% 10%, rgba(58,167,255,.12), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.035));
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--r2);
      box-shadow: var(--shadow);
      padding: 16px 14px;
      position: relative;
      overflow:hidden;
    }
    .card::after{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius: var(--r2);
      pointer-events:none;
      background: radial-gradient(500px 220px at 10% 10%, rgba(125,60,255,.14), transparent 65%);
      opacity:.9;
    }
    .card > *{position:relative; z-index:1;}

    .cardTitle{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 8px;
    }
    .cardTitle h2{
      margin:0;
      font-size: 22px;
      letter-spacing:.2px;
      font-weight: 950;
    }
    .cardTitle .hint{
      margin-top:6px;
      color: var(--muted);
      font-size: 13px;
      line-height:1.25;
      max-width: 520px;
    }

    .badge{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: var(--muted);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 900;
      letter-spacing:.2px;
      white-space:nowrap;
    }
    .badge.on{
      background: linear-gradient(135deg, rgba(125,60,255,.40), rgba(58,167,255,.22));
      color: var(--text);
      border-color: rgba(255,255,255,.18);
    }

    .sectionTitle{
      margin: 14px 0 10px;
      font-size: 16px;
      font-weight: 950;
      color: var(--text);
      letter-spacing:.2px;
      opacity:.95;
    }

    .field{
      display:grid;
      grid-template-columns: 1fr;
      gap: 6px;
      margin: 10px 0 12px;
    }
    .labelRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    label{
      font-weight: 900;
      letter-spacing:.2px;
      color: var(--text);
      opacity:.96;
    }
    .subLabel{
      color: var(--muted);
      font-size: 12.5px;
      line-height:1.25;
    }

    input, select, textarea{
      width: 100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: var(--text);
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.18);
    }
    input::placeholder, textarea::placeholder{color: rgba(243,239,255,.40)}
    input:focus, select:focus, textarea:focus{
      border-color: rgba(125,60,255,.42);
      box-shadow: 0 0 0 4px rgba(125,60,255,.15), 0 0 0 1px rgba(58,167,255,.12) inset;
    }

    .row2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 620px){
      .row2{grid-template-columns:1fr;}
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 10px;
    }

    .mini{
      font-size: 12.5px;
      color: var(--muted);
      line-height:1.25;
    }

    /* info icon + collapsible help */
    .infoBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width: 28px;
      height: 28px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      cursor:pointer;
      flex: 0 0 auto;
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
    }
    .infoBtn:hover{background: rgba(255,255,255,.08);}
    .infoBtn svg{opacity:.92}

    .infoBody{
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px dashed rgba(190,155,255,.26);
      background: rgba(125,60,255,.08);
      color: var(--muted);
      font-size: 12.8px;
      line-height: 1.35;
      display:none;
    }
    .infoBody.open{display:block;}

    .outGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 8px;
    }
    @media (max-width: 620px){
      .outGrid{grid-template-columns:1fr;}
    }
    .outBox{
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      padding: 12px 12px;
      min-height: 92px;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.18);
    }
    .outBox h3{
      margin:0 0 6px;
      font-size: 13px;
      color: var(--muted);
      font-weight: 950;
      letter-spacing:.2px;
    }
    .outVal{
      font-size: 22px;
      font-weight: 1000;
      letter-spacing:.2px;
    }
    .outNote{
      margin-top: 6px;
      color: var(--muted2);
      font-size: 12.5px;
      line-height: 1.25;
    }

    .hidden{display:none !important;}

    .toast{
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.65);
      border: 1px solid rgba(255,255,255,.16);
      border-radius: 999px;
      padding: 10px 14px;
      color: var(--text);
      display:none;
      box-shadow: 0 16px 55px rgba(0,0,0,.55);
      backdrop-filter: blur(12px);
      z-index: 999;
      max-width: 92vw;
      text-align:center;
      font-weight: 850;
      letter-spacing:.2px;
    }

    .wlTable{
      width:100%;
      border-collapse: collapse;
      overflow:hidden;
      border-radius: var(--r2);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.20);
    }
    .wlTable th, .wlTable td{
      padding: 10px 10px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      color: var(--muted);
      font-size: 13px;
      text-align:left;
      vertical-align: top;
    }
    .wlTable th{
      color: var(--text);
      font-weight: 950;
      letter-spacing:.2px;
      background: rgba(255,255,255,.05);
    }

    .smallBtn{
      padding: 8px 12px;
      font-size: 13px;
      border-radius: 999px;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- TOP BAR -->
    <header class="topBar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="brandText">
          <h1 id="heroTitle">Equity Analyzer</h1>
          <div class="sub" id="heroSub">DCF fair value • Watchlist • Education</div>
        </div>
      </div>

      <div class="topActions">
        <div class="seg" aria-label="Language">
          <button id="btnLangEN" class="active" type="button">EN</button>
          <button id="btnLangCZ" type="button">CZ</button>
        </div>

        <button id="btnDemo" class="btn" type="button">Demo values</button>
        <button id="btnSaveTop" class="btn btnPrimary" type="button">Save to Watchlist</button>
      </div>
    </header>

    <!-- TABS -->
    <nav class="tabs" aria-label="Sections">
      <button id="tabModel" class="tab active" type="button" data-view="model">DCF Model</button>
      <button id="tabWatch" class="tab" type="button" data-view="watch">Watchlist</button>
      <button id="tabAbout" class="tab" type="button" data-view="about">About</button>
    </nav>

    <!-- VIEW: MODEL -->
    <section id="viewModel">
      <div class="grid">

        <!-- INPUTS -->
        <div class="card">
          <div class="cardTitle">
            <div>
              <h2 id="hInputs">Inputs</h2>
              <div class="hint" id="hInputsHint">
                Multi-scenario DCF with guardrails. Use ranges (Bear/Base/Bull) and stay conservative.
              </div>
            </div>
            <div class="badge on" id="modeBadge">MODE: Quick</div>
          </div>

          <div class="sectionTitle" id="secBasics">Basics</div>

          <div class="field">
            <div class="labelRow">
              <label for="in_ticker" id="lbTicker">Ticker / Name</label>
              <button class="infoBtn" type="button" data-info="info_ticker" aria-label="Info">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                  <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                  <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <input id="in_ticker" type="text" placeholder="e.g., AAPL / SOFI / PLTR" />
            <div class="subLabel" id="sbTicker">Used for watchlist label.</div>
            <div id="info_ticker" class="infoBody">
              <b>Co sem dát:</b> ticker nebo název firmy (kvůli uložení do Watchlistu).<br>
              <b>Kde to najdeš:</b> Yahoo Finance / TradingView / broker app.
            </div>
          </div>

          <div class="row2">
            <div class="field">
              <div class="labelRow">
                <label for="in_currency" id="lbCurrency">Currency</label>
                <button class="infoBtn" type="button" data-info="info_currency" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <select id="in_currency">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="CZK">CZK</option>
                <option value="GBP">GBP</option>
              </select>
              <div class="subLabel" id="sbCurrency">All inputs should be in the selected currency.</div>
              <div id="info_currency" class="infoBody">
                Drž všechny vstupy v jedné měně (FCF, cash, debt).<br>
                <b>Tip:</b> u amerických akcií typicky USD.
              </div>
            </div>

            <div class="field">
              <div class="labelRow">
                <label for="in_type" id="lbType">Company type</label>
                <button class="infoBtn" type="button" data-info="info_type" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <select id="in_type">
                <option value="growth">Growth / Tech</option>
                <option value="mature">Mature / Blue-chip</option>
                <option value="financial">Financial (bank/ins.)</option>
                <option value="cyclical">Cyclical</option>
              </select>
              <div class="subLabel" id="sbType">Sets reasonable defaults + warnings (you can override).</div>
              <div id="info_type" class="infoBody">
                Volba typu firmy nastaví rozumné defaulty (disc. rate, růst, varování).<br>
                <b>Tip:</b> banky/pojišťovny se často valuují jinak (P/B, ROE) → tady jen orientačně.
              </div>
            </div>
          </div>

          <div class="row2">
            <div class="field">
              <div class="labelRow">
                <label for="in_mode" id="lbMode">Mode</label>
                <button class="infoBtn" type="button" data-info="info_mode" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <select id="in_mode">
                <option value="quick">Quick (Bear/Bull auto)</option>
                <option value="advanced">Advanced (edit all 3)</option>
              </select>
              <div class="subLabel" id="sbMode">Quick: enter Base; Bear/Bull are derived (± spread).</div>
              <div id="info_mode" class="infoBody">
                <b>Quick:</b> zadáš jen Base růst, Bear/Bull se dopočítají podle spreadu.<br>
                <b>Advanced:</b> nastavíš Bear/Base/Bull ručně (pro detailní práci).
              </div>
            </div>

            <div class="field">
              <div class="labelRow">
                <label for="in_price" id="lbPrice">Current price (optional)</label>
                <button class="infoBtn" type="button" data-info="info_price" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_price" type="text" placeholder="e.g., 180.50" />
              <div class="subLabel" id="sbPrice">Used only for upside / margin-of-safety view.</div>
              <div id="info_price" class="infoBody">
                Aktuální cena pro výpočet “upside vs price”.<br>
                <b>Kde:</b> TradingView / Yahoo Finance / broker.
              </div>
            </div>
          </div>

          <div class="field">
            <div class="labelRow">
              <label for="in_mos" id="lbMos">Margin of Safety</label>
              <button class="infoBtn" type="button" data-info="info_mos" aria-label="Info">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                  <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                  <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <select id="in_mos">
              <option value="0">OFF</option>
              <option value="10">10 %</option>
              <option value="15">15 %</option>
              <option value="20">20 %</option>
              <option value="25">25 %</option>
              <option value="30">30 %</option>
            </select>
            <div class="subLabel" id="sbMos">Applied after valuation (to Base) for a conservative target.</div>
            <div id="info_mos" class="infoBody">
              Margin of Safety sníží cílovou “férovku” (Base) o zvolené %. <br>
              <b>Tip:</b> konzervativně 15–25 % u rizikovějších firem.
            </div>
          </div>

          <div class="sectionTitle" id="secDCF">DCF method</div>

          <div class="field">
            <div class="labelRow">
              <label for="in_method" id="lbMethod">Method</label>
              <button class="infoBtn" type="button" data-info="info_method" aria-label="Info">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                  <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                  <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <select id="in_method">
              <option value="fcf">Direct FCF (recommended)</option>
              <option value="revenue">Revenue × FCF margin (estimate)</option>
            </select>
            <div class="subLabel" id="sbMethod">If you don’t know FCF, estimate it via revenue × margin.</div>
            <div id="info_method" class="infoBody">
              <b>Direct FCF:</b> zadáš FCF (nejlepší varianta).<br>
              <b>Revenue × margin:</b> když nemáš FCF, odhadneš ho přes tržby a FCF marži.<br>
              <b>Kde:</b> 10-K/10-Q, cash flow statement, nebo agregátory (Macrotrends apod.).
            </div>
          </div>

          <div class="row2">
            <div class="field">
              <div class="labelRow">
                <label for="in_years" id="lbYears">Projection (years)</label>
                <button class="infoBtn" type="button" data-info="info_years" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_years" type="text" placeholder="10" value="10" />
              <div class="subLabel" id="sbYears">Commonly 5–10 years depending on predictability.</div>
              <div id="info_years" class="infoBody">
                Typicky 5–10 let. Stabilnější firmy → klidně 10, cyklické → radši kratší horizont.
              </div>
            </div>

            <div class="field">
              <div class="labelRow">
                <label for="in_fcf" id="lbFCF">FCF (TTM or 3–5y avg)</label>
                <button class="infoBtn" type="button" data-info="info_fcf" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_fcf" type="text" placeholder="e.g., 11000000000" />
              <div class="subLabel" id="sbFCF">Prefer a 3–5 year average for cyclical firms.</div>
              <div id="info_fcf" class="infoBody">
                <b>FCF</b> (free cash flow) ideálně průměr 3–5 let u cyklických firem (ne “jeden skvělej rok”).<br>
                <b>Kde:</b> Cash Flow Statement → “Free Cash Flow” (nebo CFO − CapEx).
              </div>
            </div>
          </div>

          <div class="field">
            <div class="labelRow">
              <label for="in_units" id="lbUnits">Units</label>
              <button class="infoBtn" type="button" data-info="info_units" aria-label="Info">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                  <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                  <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <select id="in_units">
              <option value="raw">Raw numbers</option>
              <option value="m">Millions</option>
              <option value="b">Billions</option>
            </select>
            <div class="subLabel" id="sbUnits">Optional: enter values in millions/billions for comfort.</div>
            <div id="info_units" class="infoBody">
              Když zadáš “Millions”, tak 11,000 znamená 11,000,000,000 (11B).<br>
              <b>Tip:</b> drž konzistentní jednotky pro FCF/cash/debt.
            </div>
          </div>

          <div class="sectionTitle" id="secCapital">Capital structure</div>

          <div class="field">
            <div class="labelRow">
              <label for="in_shares" id="lbShares">Shares (diluted)</label>
              <button class="infoBtn" type="button" data-info="info_shares" aria-label="Info">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                  <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                  <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <input id="in_shares" type="text" placeholder="e.g., 15500000000" />
            <div class="subLabel" id="sbShares">Used to compute fair value per share.</div>
            <div id="info_shares" class="infoBody">
              Počet akcií “diluted” (zředěný).<br>
              <b>Kde:</b> 10-K/10-Q (Weighted avg diluted shares), nebo Yahoo Finance → Statistics.
            </div>
          </div><div class="row2">
            <div class="field">
              <div class="labelRow">
                <label for="in_cash" id="lbCash">Cash (optional)</label>
                <button class="infoBtn" type="button" data-info="info_cash" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_cash" type="text" placeholder="e.g., 50000000000" />
              <div class="subLabel" id="sbCash">Added to enterprise value (EV → Equity).</div>
              <div id="info_cash" class="infoBody">
                Hotovost + krátkodobé investice (cash & equivalents).<br>
                <b>Kde:</b> Balance Sheet.
              </div>
            </div>

            <div class="field">
              <div class="labelRow">
                <label for="in_debt" id="lbDebt">Debt (optional)</label>
                <button class="infoBtn" type="button" data-info="info_debt" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_debt" type="text" placeholder="e.g., 70000000000" />
              <div class="subLabel" id="sbDebt">Subtracted to get equity value.</div>
              <div id="info_debt" class="infoBody">
                Celkový úročený dluh (short + long term debt).<br>
                <b>Kde:</b> Balance Sheet.
              </div>
            </div>
          </div>

          <div class="sectionTitle" id="secAssumptions">Assumptions (3 scenarios)</div>

          <div class="row2">
            <div class="field">
              <div class="labelRow">
                <label for="in_disc" id="lbDisc">Discount rate (base) %</label>
                <button class="infoBtn" type="button" data-info="info_disc" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_disc" type="text" placeholder="9" value="9" />
              <div class="subLabel" id="sbDisc">Higher risk → higher discount → lower fair value.</div>
              <div id="info_disc" class="infoBody">
                Diskontní sazba (WACC/požadovaný výnos).<br>
                <b>Tip:</b> ty chceš typicky ~9 % jako default (sedí).
              </div>
            </div>

            <div class="field">
              <div class="labelRow">
                <label for="in_term" id="lbTerm">Terminal growth %</label>
                <button class="infoBtn" type="button" data-info="info_term" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_term" type="text" placeholder="2.5" value="2.5" />
              <div class="subLabel" id="sbTerm">Long-run growth after projection. Keep conservative.</div>
              <div id="info_term" class="infoBody">
                Terminální růst po projekci. Bývá blízko dlouhodobé inflace / růstu ekonomiky.<br>
                <b>Tip:</b> 1.5–3 % je běžný rozumný rozsah.
              </div>
            </div>
          </div>

          <div class="row2">
            <div class="field">
              <div class="labelRow">
                <label for="in_base" id="lbBase">Base FCF growth %</label>
                <button class="infoBtn" type="button" data-info="info_base" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_base" type="text" placeholder="12" value="12" />
              <div class="subLabel" id="sbBase">Annual growth during projection.</div>
              <div id="info_base" class="infoBody">
                Roční růst FCF v projekci.<br>
                <b>Kde:</b> odhad podle růstu tržeb, marží, guidance, nebo historického průměru (konzervativně).
              </div>
            </div>

            <div class="field">
              <div class="labelRow">
                <label for="in_spread" id="lbSpread">Quick spread (± pp)</label>
                <button class="infoBtn" type="button" data-info="info_spread" aria-label="Info">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M12 17v-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 7h.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                    <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="white" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <input id="in_spread" type="text" placeholder="2" value="2" />
              <div class="subLabel" id="sbSpread">Quick mode derives Bear/Base/Bull = Base ± spread.</div>
              <div id="info_spread" class="infoBody">
                Spread pro rychlý režim. Např. Base 12 a spread 2 → Bear 10 / Bull 14.
              </div>
            </div>
          </div>

          <div class="actions">
            <button id="btnCalc" class="btn btnPrimary" type="button">Calculate</button>
            <button id="btnReset" class="btn" type="button">Reset</button>
            <button id="btnSave" class="btn" type="button">Save result</button>
          </div>

          <div class="mini" id="tipQuick">
            Tip: In Quick mode you set only Base; Bear/Bull are derived automatically.
          </div>
        </div>

        <!-- OUTPUTS -->
        <div class="card">
          <div class="cardTitle">
            <div>
              <h2 id="hOutputs">Outputs</h2>
              <div class="hint" id="hOutputsHint">Fair value range + sanity checks.</div>
            </div>
            <div class="badge" id="statusBadge">READY</div>
          </div>

          <div class="outGrid">
            <div class="outBox">
              <h3 id="outHBase">Fair value (Base)</h3>
              <div class="outVal" id="out_base">—</div>
              <div class="outNote" id="outBaseNote">Bear/Bull below.</div>
            </div>
            <div class="outBox">
              <h3 id="outHRange">Range (Bear → Bull)</h3>
              <div class="outVal" id="out_range">—</div>
              <div class="outNote" id="outRangeNote">Use range, not a single number.</div>
            </div>
            <div class="outBox">
              <h3 id="outHUpside">Upside vs price</h3>
              <div class="outVal" id="out_upside">—</div>
              <div class="outNote" id="outUpsideNote">Needs current price (optional).</div>
            </div>
            <div class="outBox">
              <h3 id="outHWarn">Warnings / checks</h3>
              <div class="outVal" id="out_warn">—</div>
              <div class="outNote" id="outWarnNote">—</div>
            </div>
          </div>

          <div class="sectionTitle" id="secDetails">Details</div>
          <div class="outBox" style="min-height:140px">
            <div class="mini" id="out_details">—</div>
          </div>
        </div>

      </div>
    </section>

    <!-- VIEW: WATCHLIST -->
    <section id="viewWatch" class="hidden">
      <div class="card">
        <div class="cardTitle">
          <div>
            <h2 id="hWatch">Watchlist</h2>
            <div class="hint" id="hWatchHint">Saved calculations stored locally in your browser (localStorage).</div>
          </div>
          <div class="pillRow">
            <button id="btnExport" class="btn smallBtn" type="button">Export CSV</button>
            <button id="btnClearWL" class="btn smallBtn" type="button">Clear</button>
          </div>
        </div>

        <div class="mini" id="wlNote">
          Note: Watchlist is stored locally in your browser (localStorage). Different device = different watchlist.
        </div>

        <div style="height:10px"></div>

        <table class="wlTable" aria-label="Watchlist table">
          <thead>
            <tr>
              <th id="wlTh1">Name</th>
              <th id="wlTh2">Base</th>
              <th id="wlTh3">Range</th>
              <th id="wlTh4">Price</th>
              <th id="wlTh5">Upside</th>
              <th id="wlTh6">Actions</th>
            </tr>
          </thead>
          <tbody id="wlBody">
            <tr>
              <td colspan="6" class="mini" id="wlEmpty">No saved items yet.</td>
            </tr>
          </tbody>
        </table>

        <div class="actions" style="margin-top:14px">
          <button id="btnBackFromWL" class="btn" type="button">Back</button>
        </div>
      </div>
    </section>

    <!-- VIEW: ABOUT -->
    <section id="viewAbout" class="hidden">
      <div class="card">
        <div class="cardTitle">
          <div>
            <h2 id="hAbout">About Equity Analyzer</h2>
            <div class="hint" id="hAboutHint">
              Educational valuation tool based on a multi-scenario DCF model.
            </div>
          </div>
          <div class="badge" id="badgeEdu">EDUCATIONAL</div>
        </div>

        <div class="sectionTitle" id="abWhat">What this tool does</div>
        <ul class="mini" id="abList1">
          <li>Estimates intrinsic value using Bear / Base / Bull scenarios</li>
          <li>Works best for companies with positive and relatively predictable cash flows</li>
          <li>Highlights sensitivity to growth and discount assumptions</li>
        </ul>

        <div class="sectionTitle" id="abBest">Best suited for</div>
        <ul class="mini" id="abList2">
          <li>Mature companies</li>
          <li>Blue-chip stocks</li>
          <li>Established growth companies</li>
        </ul>

        <div class="sectionTitle" id="abLess">Less suitable for</div>
        <ul class="mini" id="abList3">
          <li>Pre-revenue startups</li>
          <li>Highly cyclical or turnaround businesses</li>
          <li>Companies with unstable or negative FCF</li>
        </ul>

        <div class="sectionTitle" id="abNotice">Important notice</div>
        <p class="mini" id="abNoticeText">
          This application is <b>NOT</b> financial advice. It is for educational and analytical purposes only.
          All outputs depend entirely on user assumptions.
        </p>

        <div class="actions">
          <button id="btnBackFromAbout" class="btn" type="button">Back</button>
        </div>
      </div>
    </section>

  </div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- SCRIPT -->
  <script defer src="app.js"></script>
</body>
</html>
