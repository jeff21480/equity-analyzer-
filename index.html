<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Anal√Ωza akci√≠ ‚Äì MVP</title>
  <meta name="description" content="DCF odhad vnit≈ôn√≠ hodnoty (Bear/Base/Bull), watchlist a kalkulaƒçka slo≈æen√©ho √∫roƒçen√≠." />

  <style>
    :root{
      --bgA:#120a2a;
      --bgB:#071a44;

      --card: rgba(255,255,255,.09);
      --card2: rgba(255,255,255,.07);
      --stroke: rgba(255,255,255,.16);
      --stroke2: rgba(255,255,255,.10);

      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);

      --violet:#a855f7;
      --violet2:#7c3aed;
      --blue:#2563eb;

      --good:#22c55e;
      --bad:#ef4444;
      --warn:#f59e0b;

      --radius: 24px;
      --radius2: 18px;

      --shadow: 0 18px 55px rgba(0,0,0,.45);
      --shadow2: 0 12px 40px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(168,85,247,.55), rgba(168,85,247,0) 60%),
        radial-gradient(900px 650px at 85% 10%, rgba(37,99,235,.45), rgba(37,99,235,0) 62%),
        linear-gradient(160deg, var(--bgA), var(--bgB));
      min-height:100%;
    }

    /* ≈æ√°dn√© ‚Äúpruhy‚Äù ‚Äì ≈æ√°dn√© pseudo p≈ôechody p≈ôes sekce */
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 22px 16px 80px;
    }

    .topBadge{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding:10px 14px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.06);
      border-radius: 999px;
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: linear-gradient(135deg, var(--violet), var(--blue));
      box-shadow: 0 0 0 4px rgba(168,85,247,.18);
    }

    h1{
      margin: 18px 0 6px;
      font-size: clamp(34px, 5vw, 54px);
      letter-spacing: .4px;
    }
    .lead{
      margin: 0 0 22px;
      color: var(--muted);
      font-size: 15.5px;
      line-height: 1.45;
      max-width: 720px;
    }

    .gridMenu{
      display:grid;
      gap:14px;
      margin-top: 14px;
    }

    .menuCard{
      display:flex;
      align-items:center;
      gap:14px;
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid var(--stroke2);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease, border-color .12s ease;
    }
    .menuCard:active{ transform: scale(.99); }
    .menuCard:hover{ border-color: rgba(168,85,247,.35); }

    .iconBox{
      width:56px;height:56px;
      display:grid;place-items:center;
      border-radius: 18px;
      border:1px solid var(--stroke2);
      background: rgba(10,10,20,.28);
      box-shadow: inset 0 0 0 1px rgba(168,85,247,.18);
      font-size: 24px;
    }
    .menuText h2{
      margin:0;
      font-size: 22px;
      letter-spacing:.2px;
    }
    .menuText p{
      margin:2px 0 0;
      color: var(--muted);
      font-size: 13.5px;
    }
    .chev{
      margin-left:auto;
      color: rgba(255,255,255,.75);
      font-size: 18px;
    }

    .screen{ display:none; }
    .screen.active{ display:block; }

    .headerRow{
      display:flex;
      align-items:center;
      gap: 10px;
      margin: 14px 0 14px;
    }
    .backBtn{
      display:inline-flex; align-items:center; gap:8px;
      padding: 12px 14px;
      border-radius: 999px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.07);
      color: var(--text);
      cursor:pointer;
      user-select:none;
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
    }
    .pillMini{
      margin-left:auto;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(168,85,247,.35);
      background: rgba(168,85,247,.14);
      color: rgba(255,255,255,.9);
      font-size: 12.5px;
      letter-spacing:.2px;
    }

    .card{
      border-radius: var(--radius);
      border:1px solid var(--stroke2);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 16px;
      margin: 14px 0;
    }
    .panelTitle{
      font-weight: 800;
      letter-spacing:.2px;
      margin: 0 0 6px;
      font-size: 15px;
      text-transform: uppercase;
      color: rgba(255,255,255,.88);
    }
    .subTitle{
      margin:0 0 14px;
      color: var(--muted);
      font-size: 13.5px;
      line-height:1.45;
    }
    .divider{
      height:1px;
      background: rgba(255,255,255,.10);
      margin: 14px 0;
    }

    .gridTwo{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 780px){
      .gridTwo{ grid-template-columns: 1fr 1fr; }
    }

    label{
      display:block;
      font-size: 13px;
      color: rgba(255,255,255,.86);
      margin-bottom: 8px;
      letter-spacing:.2px;
    }
    input{
      width:100%;
      padding: 13px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(5,8,20,.25);
      color: rgba(255,255,255,.92);
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.16);
      font-size: 15px;
    }
    input:focus{
      border-color: rgba(168,85,247,.52);
      box-shadow: 0 0 0 4px rgba(168,85,247,.16);
    }
    .hintBox details{
      margin-top: 8px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      overflow:hidden;
    }
    .hintBox summary{
      list-style:none;
      cursor:pointer;
      padding: 10px 12px;
      font-weight: 700;
      color: rgba(255,255,255,.88);
    }
    .hintBox summary::-webkit-details-marker{ display:none; }
    .hintBox .hint{
      padding: 0 12px 12px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.45;
    }

    .btnRow{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      margin-top: 14px;
    }
    .btn{
      border:0;
      cursor:pointer;
      user-select:none;
      padding: 13px 16px;
      border-radius: 18px;
      font-weight: 800;
      letter-spacing:.2px;
      color: rgba(255,255,255,.92);
      box-shadow: var(--shadow2);
      background: linear-gradient(135deg, rgba(168,85,247,.95), rgba(37,99,235,.85));
    }
    .btn:active{ transform: translateY(1px); }
    .btnGhost{
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: none;
      font-weight: 800;
    }
    .btnDanger{
      background: rgba(239,68,68,.12);
      border:1px solid rgba(239,68,68,.35);
      box-shadow:none;
    }

    /* Results */
    .resultGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (min-width: 780px){
      .resultGrid{ grid-template-columns: 1fr 1fr 1fr; }
    }
    .resCard{
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.07);
      padding: 14px;
    }
    .resTop{
      display:flex; align-items:baseline; gap:10px;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    .resTitle{
      font-weight: 900;
      letter-spacing: .2px;
      text-transform: uppercase;
      font-size: 13px;
      color: rgba(255,255,255,.88);
    }
    .tag{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(5,8,20,.22);
      color: rgba(255,255,255,.85);
      white-space: nowrap;
    }
    .price{
      font-size: 26px;
      font-weight: 950;
      letter-spacing: .2px;
      margin: 2px 0 0;
    }
    .pct{
      margin-top: 6px;
      font-weight: 900;
      letter-spacing: .2px;
      font-size: 14px;
    }
    .pct.good{ color: var(--good); }
    .pct.bad{ color: var(--bad); }
    .pct.warn{ color: var(--warn); }
    .smallMuted{
      color: var(--muted);
      font-size: 12.8px;
      margin-top: 6px;
      line-height: 1.35;
    }

    /* Watchlist */
    .wlItem{
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      padding: 14px;
      margin-top: 12px;
    }
    .wlHead{
      display:flex;
      gap: 10px;
      align-items:flex-start;
      justify-content: space-between;
    }
    .wlTitle{
      font-weight: 950;
      font-size: 16px;
      margin: 0;
    }
    .wlMeta{
      margin: 4px 0 0;
      color: var(--muted);
      font-size: 12.8px;
      line-height: 1.35;
    }
    .wlBtns{
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content:flex-end;
    }
    .miniBtn{
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.92);
      font-weight: 850;
      cursor:pointer;
    }
    .miniBtnDanger{
      background: rgba(239,68,68,.12);
      border-color: rgba(239,68,68,.35);
    }

    .msg{
      margin-top: 10px;
      color: rgba(255,255,255,.85);
      font-size: 13px;
    }

    .footerNote{
      color: rgba(255,255,255,.55);
      font-size: 12px;
      margin-top: 14px;
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- HOME -->
    <section id="screen-home" class="screen active">
      <div class="topBadge">
        <span class="dot"></span>
        <span>Anal√Ωza akci√≠ ¬∑ MVP</span>
      </div>

      <h1>Anal√Ωza akci√≠</h1>
      <p class="lead">
        Jednoduch√Ω, ale poctiv√Ω n√°stroj pro odhad vnit≈ôn√≠ hodnoty (DCF) ve sc√©n√°≈ô√≠ch Bear / Base / Bull,
        watchlist a kalkulaƒçka slo≈æen√©ho √∫roƒçen√≠.
      </p>

      <div class="gridMenu">
        <div class="menuCard" data-open="analyzer">
          <div class="iconBox">üìà</div>
          <div class="menuText">
            <h2>Analyz√°tor</h2>
            <p>Odhad vnit≈ôn√≠ hodnoty (Bear / Base / Bull)</p>
          </div>
          <div class="chev">‚Ä∫</div>
        </div>

        <div class="menuCard" data-open="calc">
          <div class="iconBox">üßÆ</div>
          <div class="menuText">
            <h2>Kalkulaƒçka</h2>
            <p>Slo≈æen√© √∫roƒçen√≠ + c√≠lov√° ƒç√°stka</p>
          </div>
          <div class="chev">‚Ä∫</div>
        </div>

        <div class="menuCard" data-open="watchlist">
          <div class="iconBox">üëÄ</div>
          <div class="menuText">
            <h2>Watchlist</h2>
            <p>Ulo≈æen√© anal√Ωzy (naƒç√≠st / smazat jednotlivƒõ)</p>
          </div>
          <div class="chev">‚Ä∫</div>
        </div>

        <div class="menuCard" data-open="about">
          <div class="iconBox">‚ÑπÔ∏è</div>
          <div class="menuText">
            <h2>Jak to funguje</h2>
            <p>Pro koho to je, metodika, pozn√°mky</p>
          </div>
          <div class="chev">‚Ä∫</div>
        </div>
      </div>

      <div class="footerNote">¬© Anal√Ωza akci√≠ ‚Äì MVP</div>
    </section>


    <!-- ANALYZER -->
    <section id="screen-analyzer" class="screen">
      <div class="headerRow">
        <div class="backBtn" data-open="home">‚Üê Zpƒõt</div>
        <div class="pillMini">DCF ¬∑ Bear / Base / Bull</div>
      </div>

      <div class="card">
        <div class="panelTitle">Vstupy</div>
        <p class="subTitle">
          Vypl≈à hodnoty pro Base sc√©n√°≈ô. Bear a Bull se poƒç√≠taj√≠ automaticky pomoc√≠ √∫prav n√≠≈æe.
        </p>

        <div class="gridTwo">

          <div class="hintBox">
            <label for="a_ticker">Ticker / n√°zev (voliteln√©)</label>
            <input id="a_ticker" type="text" inputmode="text" placeholder="nap≈ô. AAPL / Apple" />
            <details>
              <summary>Co to je?</summary>
              <div class="hint">
                Jen popisek pro ulo≈æen√≠ do watchlistu. Nem√° vliv na v√Ωpoƒçet.
              </div>
            </details>
          </div>

          <div class="hintBox">
            <label for="a_price">Aktu√°ln√≠ cena akcie</label>
            <input id="a_price" type="text" inputmode="decimal" placeholder="nap≈ô. 185,50" />
            <details>
              <summary>Co to je?</summary>
              <div class="hint">
                Cena slou≈æ√≠ k v√Ωpoƒçtu <b>% podhodnocen√≠ / nadhodnocen√≠</b> v≈Øƒçi vnit≈ôn√≠ hodnotƒõ.
                M≈Ø≈æe≈° ps√°t desetinnou ƒç√°rkou i teƒçkou (nap≈ô. 185,5 nebo 185.5).
              </div>
            </details>
          </div>

          <div class="hintBox">
            <label for="a_fcfps">FCF na akcii (FCF / share)</label>
            <input id="a_fcfps" type="text" inputmode="decimal" placeholder="nap≈ô. 6,2" />
            <details>
              <summary>Co to je?</summary>
              <div class="hint">
                Voln√Ω cash flow p≈ôepoƒçten√Ω na 1 akcii (nap≈ô. z FCF / diluted shares).
                Je to v√Ωchoz√≠ ‚Äúcash flow‚Äù, kter√© v modelu prom√≠t√°me do budoucnosti.
              </div>
            </details>
          </div>

          <div class="hintBox">
            <label for="a_years">Poƒçet let projekce</label>
            <input id="a_years" type="text" inputmode="numeric" placeholder="nap≈ô. 10" />
            <details>
              <summary>Co to je?</summary>
              <div class="hint">
                Kolik let dop≈ôedu model prom√≠t√° r≈Øst FCF. Bƒõ≈ænƒõ 5‚Äì10 let, u stabiln√≠ch firem i v√≠ce.
              </div>
            </details>
          </div>

          <div class="hintBox">
            <label for="a_g">R≈Øst FCF (Base) %</label>
            <input id="a_g" type="text" inputmode="decimal" placeholder="nap≈ô. 8" />
            <details>
              <summary>Co to je?</summary>
              <div class="hint">
                Odhad pr≈Ømƒõrn√©ho roƒçn√≠ho r≈Østu FCF bƒõhem projekƒçn√≠ho obdob√≠.
                Zde zad√°v√°≈° hodnotu pro <b>Base</b> sc√©n√°≈ô.
              </div>
            </details>
          </div>

          <div class="hintBox">
            <label for="a_r">Diskont (Base) %</label>
            <input id="a_r" type="text" inputmode="decimal" placeholder="nap≈ô. 9" />
            <details>
              <summary>Co to je?</summary>
              <div class="hint">
                Diskontn√≠ sazba (po≈æadovan√Ω v√Ωnos). ƒå√≠m vy≈°≈°√≠ diskont, t√≠m ni≈æ≈°√≠ vnit≈ôn√≠ hodnota.
                Zde zad√°v√°≈° hodnotu pro <b>Base</b> sc√©n√°≈ô.
              </div>
            </details>
          </div>

          <div class="hintBox">
            <label for="a_tg">Termin√°ln√≠ r≈Øst (Base) %</label>
            <input id="a_tg" type="text" inputmode="decimal" placeholder="nap≈ô. 2,5" />
            <details>
              <summary>Co to je?</summary>
              <div class="hint">
                Dlouhodob√Ω r≈Øst po skonƒçen√≠ projekce. Obvykle konzervativn√≠ (nap≈ô. 1‚Äì3 %).
                Zde zad√°v√°≈° hodnotu pro <b>Base</b> sc√©n√°≈ô.
              </div>
            </details>
          </div>

        </div>
      </div>

      <div class="card">
        <div class="panelTitle">Sc√©n√°≈ôe (√∫pravy v≈Øƒçi Base)</div>
        <p class="subTitle">
          √öpravy jsou v <b>procentn√≠ch bodech (p.b.)</b>. Nap≈ô. +2 p.b. r≈Østu znamen√°: Base r≈Øst 8 % ‚Üí Bull r≈Øst 10 %.
        </p>

        <div class="gridTwo">
          <div class="hintBox">
            <label for="a_bear_g">Bear √∫prava r≈Østu (p.b.)</label>
            <input id="a_bear_g" type="text" inputmode="decimal" placeholder="nap≈ô. -2" />
            <details><summary>Co to je?</summary><div class="hint">Kolik p.b. odeƒç√≠st/p≈ôiƒç√≠st k Base r≈Østu pro Bear sc√©n√°≈ô.</div></details>
          </div>
          <div class="hintBox">
            <label for="a_bear_r">Bear √∫prava diskontu (p.b.)</label>
            <input id="a_bear_r" type="text" inputmode="decimal" placeholder="nap≈ô. +1" />
            <details><summary>Co to je?</summary><div class="hint">Kolik p.b. p≈ôidat k Base diskontu pro Bear sc√©n√°≈ô (ƒçasto vy≈°≈°√≠ riziko ‚Üí vy≈°≈°√≠ diskont).</div></details>
          </div>
          <div class="hintBox">
            <label for="a_bear_tg">Bear √∫prava termin√°lu (p.b.)</label>
            <input id="a_bear_tg" type="text" inputmode="decimal" placeholder="nap≈ô. -0,5" />
            <details><summary>Co to je?</summary><div class="hint">Kolik p.b. upravit termin√°ln√≠ r≈Øst v Bear sc√©n√°≈ôi.</div></details>
          </div>

          <div class="hintBox">
            <label for="a_bull_g">Bull √∫prava r≈Østu (p.b.)</label>
            <input id="a_bull_g" type="text" inputmode="decimal" placeholder="nap≈ô. +2" />
            <details><summary>Co to je?</summary><div class="hint">Kolik p.b. p≈ôidat k Base r≈Østu pro Bull sc√©n√°≈ô.</div></details>
          </div>
          <div class="hintBox">
            <label for="a_bull_r">Bull √∫prava diskontu (p.b.)</label>
            <input id="a_bull_r" type="text" inputmode="decimal" placeholder="nap≈ô. -1" />
            <details><summary>Co to je?</summary><div class="hint">Kolik p.b. sn√≠≈æit diskont pro Bull sc√©n√°≈ô (ni≈æ≈°√≠ riziko / vy≈°≈°√≠ kvalita).</div></details>
          </div>
          <div class="hintBox">
            <label for="a_bull_tg">Bull √∫prava termin√°lu (p.b.)</label>
            <input id="a_bull_tg" type="text" inputmode="decimal" placeholder="nap≈ô. +0,5" />
            <details><summary>Co to je?</summary><div class="hint">Kolik p.b. upravit termin√°ln√≠ r≈Øst v Bull sc√©n√°≈ôi.</div></details>
          </div>
        </div>

        <div class="btnRow">
          <button class="btn" id="btnCalc">Spoƒç√≠tat</button>
          <button class="btnGhost btn" id="btnSave">Ulo≈æit do Watchlistu</button>
          <button class="btnGhost btnDanger btn" id="btnClearInputs">Vyƒçistit</button>
        </div>

        <div class="msg" id="aMsg"></div>
      </div>

      <div class="card" id="resultCard" style="display:none;">
        <div class="panelTitle">V√Ωsledek (vnit≈ôn√≠ hodnota + % v≈Øƒçi cenƒõ)</div>
        <p class="subTitle">
          Vypoƒçteno pro Bear / Base / Bull. Procenta ukazuj√≠ rozd√≠l v≈Øƒçi aktu√°ln√≠ cenƒõ.
        </p>

        <div class="resultGrid" id="resultGrid"></div>

        <div class="divider"></div>
        <p class="smallMuted" id="resultMeta"></p>
      </div>
    </section>


    <!-- CALC (jednoduch√°, funkƒçn√≠ ‚Äì m≈Ø≈æe≈° pozdƒõji roz≈°√≠≈ôit) -->
    <section id="screen-calc" class="screen">
      <div class="headerRow">
        <div class="backBtn" data-open="home">‚Üê Zpƒõt</div>
        <div class="pillMini">Slo≈æen√© √∫roƒçen√≠</div>
      </div>

<div class="card">
  <div class="panelTitle">Vstupy</div>
  <p class="subTitle">Kalkulaƒçka je dopl≈àkov√°.</p>

  <div class="gridTwo">
    <div class="hintBox">
      <label for="c_start">Poƒç√°teƒçn√≠ vklad</label>
      <input id="c_start" type="text" inputmode="decimal" placeholder="nap≈ô. 10 000" />
      <details>
        <summary>Co to je?</summary>
        <div class="hint">Jednor√°zov√° ƒç√°stka, kterou vlo≈æ√≠≈° na zaƒç√°tku.</div>
      </details>
    </div>

    <div class="hintBox">
      <label for="c_monthly">Mƒõs√≠ƒçn√≠ vklad</label>
      <input id="c_monthly" type="text" inputmode="decimal" placeholder="nap≈ô. 2 000" />
      <details>
        <summary>Co to je?</summary>
        <div class="hint">Pravideln√Ω vklad ka≈æd√Ω mƒõs√≠c.</div>
      </details>
    </div>

    <div class="hintBox">
      <label for="c_rate">Roƒçn√≠ v√Ωnos %</label>
      <input id="c_rate" type="text" inputmode="decimal" placeholder="nap≈ô. 8" />
      <details>
        <summary>Co to je?</summary>
        <div class="hint">Odhad roƒçn√≠ho zhodnocen√≠ (nap≈ô. 8 %).</div>
      </details>
    </div>

    <div class="hintBox">
      <label for="c_years">Poƒçet let</label>
      <input id="c_years" type="text" inputmode="numeric" placeholder="nap≈ô. 15" />
      <details>
        <summary>Co to je?</summary>
        <div class="hint">Doba investov√°n√≠ v letech.</div>
      </details>
    </div>
  </div>
</div><!-- V√ùSLEDKY -->
<div class="card">
  <div class="panelTitle">V√Ωsledek ocenƒõn√≠</div>

  <div class="resultsGrid">
    <div class="resultBox base">
      <div class="resultLabel">Base</div>
      <div id="res_base_price" class="resultValue">‚Äì</div>
      <div id="res_base_pct" class="resultPct">‚Äì</div>
    </div>

    <div class="resultBox bull">
      <div class="resultLabel">Bull</div>
      <div id="res_bull_price" class="resultValue">‚Äì</div>
      <div id="res_bull_pct" class="resultPct">‚Äì</div>
    </div>

    <div class="resultBox bear">
      <div class="resultLabel">Bear</div>
      <div id="res_bear_price" class="resultValue">‚Äì</div>
      <div id="res_bear_pct" class="resultPct">‚Äì</div>
    </div>
  </div>
</div>

<!-- TLAƒå√çTKA -->
<div class="actionRow">
  <button class="btn primary" onclick="calculateDCF()">Spoƒç√≠tat</button>
  <button class="btn secondary" onclick="saveToWatchlist()">Ulo≈æit do Watchlistu</button>
  <button class="btn danger" onclick="clearInputs()">Vyƒçistit</button>
</div>

</section>

<!-- WATCHLIST -->
<section id="screen-watchlist" class="screen">
  <div class="headerRow">
    <div class="back" data-open="calc">‚Üê Zpƒõt</div>
    <div class="pillMini">Watchlist</div>
  </div>

  <div class="card">
    <div class="panelTitle">Ulo≈æen√© anal√Ωzy</div>
    <p class="subTitle">Ka≈ædou polo≈æku m≈Ø≈æe≈° samostatnƒõ otev≈ô√≠t nebo smazat.</p>

    <div id="watchlistContainer"></div>
  </div>
</section>

</div> <!-- app -->

<script>
/* ================= HELPERS ================= */
const $ = s => document.querySelector(s);

function num(v){
  if(v == null) return NaN;
  return Number(String(v).replace(/\s/g,'').replace(',','.'));
}

function fmt(n){
  return Number.isFinite(n)
    ? n.toLocaleString('cs-CZ',{maximumFractionDigits:0})
    : '‚Äì';
}

function pct(n){
  return Number.isFinite(n)
    ? (n>0?'+':'') + n.toFixed(1) + ' %'
    : '‚Äì';
}

/* ================= DCF ================= */
function dcf(fcf, g, r, t, years){
  let v = 0;
  for(let i=1;i<=years;i++){
    v += fcf * Math.pow(1+g/100,i) / Math.pow(1+r/100,i);
  }
  const tv = (fcf*Math.pow(1+g/100,years)*(1+t/100)) /
             ((r-t)/100) /
             Math.pow(1+r/100,years);
  return v + tv;
}

function calculateDCF(){
  const fcf = num($('#fcf').value);
  const years = num($('#years').value);
  const g = num($('#growth').value);
  const r = num($('#discount').value);
  const t = num($('#terminal').value);
  const price = num($('#price').value);

  if(!fcf || !years || !g || !r || !t) return;

  const base = dcf(fcf,g,r,t,years);
  const bull = dcf(fcf,g+2,r-1,t+0.5,years);
  const bear = dcf(fcf,g-2,r+1,t-0.5,years);

  $('#res_base_price').innerText = fmt(base);
  $('#res_bull_price').innerText = fmt(bull);
  $('#res_bear_price').innerText = fmt(bear);

  if(price){
    $('#res_base_pct').innerText = pct((base/price-1)*100);
    $('#res_bull_pct').innerText = pct((bull/price-1)*100);
    $('#res_bear_pct').innerText = pct((bear/price-1)*100);
  }
}

/* ================= WATCHLIST ================= */
function saveToWatchlist(){
  const item = {
    date: new Date().toLocaleDateString('cs-CZ'),
    base: $('#res_base_price').innerText,
    bull: $('#res_bull_price').innerText,
    bear: $('#res_bear_price').innerText
  };
  const wl = JSON.parse(localStorage.getItem('watchlist')||'[]');
  wl.push(item);
  localStorage.setItem('watchlist',JSON.stringify(wl));
}

function renderWatchlist(){
  const c = $('#watchlistContainer');
  if(!c) return;
  const wl = JSON.parse(localStorage.getItem('watchlist')||'[]');
  c.innerHTML = '';
  wl.forEach((it,i)=>{
    const d = document.createElement('div');
    d.className = 'watchItem';
    d.innerHTML = `
      <div><b>${it.date}</b></div>
      <div>Base: ${it.base}</div>
      <div>Bull: ${it.bull}</div>
      <div>Bear: ${it.bear}</div>
      <button onclick="removeWatch(${i})">Smazat</button>
    `;
    c.appendChild(d);
  });
}

function removeWatch(i){
  const wl = JSON.parse(localStorage.getItem('watchlist')||'[]');
  wl.splice(i,1);
  localStorage.setItem('watchlist',JSON.stringify(wl));
  renderWatchlist();
}

function clearInputs(){
  document.querySelectorAll('input').forEach(i=>i.value='');
}

document.querySelectorAll('[data-open]').forEach(b=>{
  b.onclick=()=> {
    document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
    $('#screen-'+b.dataset.open).classList.add('active');
    if(b.dataset.open==='watchlist') renderWatchlist();
  }
});
</script>

</body>
</html>
          
    


          

        

          





  

  

  


  


    


      

  

    

          
    

    

    
    


    





    

    

  
        

    
    

  

  





