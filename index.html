<!doctype html>
<html lang="en">
<head>UT
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#2b1b52" />
  <title>Equity Analyzer</title>

  <!-- PWA (pokud máš manifest.json) -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
  <link rel="apple-touch-icon" href="icon-192.png" />
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />

  <meta name="viewport"
        content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <title>Equity Analyzer</title>

  <!-- PWA / App settings -->
  <meta name="theme-color" content="#5b2bff" />
  <meta name="background-color" content="#0b1020" />

  <!-- Manifest -->
  <link rel="manifest" href="/manifest.json" />

  <!-- App icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- iOS PWA support -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- STYLES -->
  <style>
    :root {
      --bg1: #060a0e;
      --bg2: #0b0720;
      --card: #112033;
      --accent: #5b2bff;
      --accent2: #7a5cff;
      --text: #e9ecff;
    }

    /* zbytek tvého CSS */
  </style>
</head>
  <style>
    :root{
      --bg0:#06040e;
      --bg1:#0b0720;
      --card:#120a33;
      --card2:#1a0f48;
      --stroke:rgba(170,120,255,.38);
      --stroke2:rgba(64,170,255,.28);
      --glow:rgba(140,80,255,.18);
      --text:#f2efff;
      --muted:rgba(242,239,255,.72);
      --muted2:rgba(242,239,255,.55);
      --good:#4dffb4;
      --warn:#ffd166;
      --bad:#ff5c8a;

      --chip:#1c1147;
      --chipStroke:rgba(185,140,255,.45);

      --btn:#4b22c8;
      --btn2:#2a66ff;
      --btnText:#ffffff;

      --radius:22px;
      --radius2:16px;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --shadow2: 0 10px 30px rgba(0,0,0,.45);

      --focus: 0 0 0 3px rgba(105,185,255,.28), 0 0 0 1px rgba(195,140,255,.30) inset;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(110,70,255,.35), transparent 60%),
        radial-gradient(900px 700px at 80% 10%, rgba(50,150,255,.25), transparent 55%),
        radial-gradient(700px 800px at 50% 110%, rgba(160,90,255,.20), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      padding: 18px 14px 40px;
    }

    .app{
      max-width: 980px;
      margin: 0 auto;
    }

    .topbar{
      display:flex;
      gap:14px;
      align-items:stretch;
      justify-content:space-between;
      padding: 18px;
      border-radius: var(--radius);
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)),
        radial-gradient(900px 260px at 20% 0%, rgba(95,60,255,.25), transparent 55%),
        radial-gradient(700px 260px at 90% 40%, rgba(50,160,255,.18), transparent 60%),
        linear-gradient(180deg, rgba(18,10,51,.88), rgba(10,6,28,.88));
      box-shadow: var(--shadow);
      border:1px solid rgba(255,255,255,.06);
      position:relative;
      overflow:hidden;
    }

    .brand{
      display:flex;
      gap:14px;
      align-items:center;
      min-width: 280px;
    }
    .logo{
      width:54px;height:54px;border-radius:18px;
      background:
        radial-gradient(14px 14px at 30% 30%, rgba(255,255,255,.28), transparent 60%),
        linear-gradient(135deg, #6b2bff, #2aa8ff);
      box-shadow: 0 18px 40px rgba(107,43,255,.18), 0 12px 24px rgba(42,168,255,.12);
      border:1px solid rgba(255,255,255,.14);
    }
    .brand h1{
      margin:0;
      font-size: 26px;
      line-height: 1.05;
      letter-spacing:.2px;
    }
    .brand .sub{
      margin-top:4px;
      color:var(--muted);
      font-size: 13px;
    }

    .top-actions{
      display:flex;
      gap:10px;
      align-items:flex-start;
      justify-content:flex-end;
      flex-wrap:wrap;
    }

    .seg{
      display:flex;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
      box-shadow: 0 10px 25px rgba(0,0,0,.25);
    }
    .seg button{
      appearance:none;
      border:0;
      background:transparent;
      color:var(--muted);
      padding:10px 14px;
      cursor:pointer;
      font-weight:700;
      letter-spacing:.2px;
    }
    .seg button.active{
      color:var(--text);
      background: linear-gradient(135deg, rgba(107,43,255,.55), rgba(42,168,255,.25));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.10);
    }

    .btn{
      appearance:none;
      border:0;
      cursor:pointer;
      color:var(--btnText);
      padding: 10px 14px;
      border-radius: 14px;
      font-weight:800;
      letter-spacing:.2px;
      background: linear-gradient(135deg, rgba(107,43,255,.95), rgba(42,168,255,.75));
      box-shadow: 0 18px 40px rgba(107,43,255,.22), 0 10px 24px rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.10);
      transition: transform .08s ease, filter .15s ease;
    }
    .btn:hover{ filter: brightness(1.05); }
    .btn:active{ transform: translateY(1px); }

    .btn.secondary{
      background: linear-gradient(135deg, rgba(18,10,51,.88), rgba(20,14,62,.88));
      border:1px solid rgba(185,140,255,.22);
      color: var(--text);
      box-shadow: var(--shadow2);
    }

    .tabs{
      display:flex;
      gap:10px;
      margin: 14px 0 14px;
    }
    .tab{
      padding: 10px 14px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-weight:900;
      cursor:pointer;
      box-shadow: 0 10px 20px rgba(0,0,0,.25);
      user-select:none;
    }
    .tab.active{
      color: var(--text);
      background: linear-gradient(135deg, rgba(107,43,255,.55), rgba(42,168,255,.22));
      border:1px solid rgba(195,140,255,.35);
    }

    .card{
      border-radius: var(--radius);
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)),
        radial-gradient(700px 240px at 15% 0%, rgba(95,60,255,.22), transparent 60%),
        radial-gradient(700px 240px at 95% 35%, rgba(50,160,255,.18), transparent 60%),
        linear-gradient(180deg, rgba(18,10,51,.88), rgba(10,6,28,.90));
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
      padding: 18px;
      overflow:hidden;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 860px){
      .brand{ min-width: unset; }
      .grid{ grid-template-columns: 1fr; }
    }

    .section-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .section-title h2{
      margin:0;
      font-size: 18px;
      letter-spacing:.2px;
    }
    .pill{
      padding: 7px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      color: var(--muted);
      background: rgba(255,255,255,.04);
      font-weight:800;
      font-size: 12px;
    }

    .field{
      position:relative;
      padding: 12px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(185,140,255,.18);
      box-shadow: 0 10px 22px rgba(0,0,0,.25);
    }
    .field:hover{
      border-color: rgba(185,140,255,.30);
      box-shadow: 0 14px 30px rgba(0,0,0,.32);
    }

    .labelRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin-bottom: 8px;
    }
    label{
      color: var(--text);
      font-weight: 900;
      letter-spacing:.15px;
      font-size: 13px;
    }
    .hint{
      color: var(--muted2);
      font-size: 12px;
      margin-top: 8px;
      line-height:1.25;
    }

    input, select, textarea{
      width:100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(5,3,12,.60);
      color: var(--text);
      padding: 12px 12px;
      outline:none;
      box-shadow: inset 0 0 0 1px rgba(140,80,255,.08);
    }
    input:focus, select:focus, textarea:focus{
      box-shadow: var(--focus);
      border-color: rgba(90,180,255,.32);
    }
    input::placeholder, textarea::placeholder{ color: rgba(242,239,255,.40); }

    /* FIX: dropdown list readability (no white-on-white) */
    option{
      background: #0b0720;
      color: #f2efff;
    }

    .row-actions{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 12px;
    }

    .muted{
      color: var(--muted);
      font-size: 13px;
      line-height:1.35;
    }

    .outGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-top: 12px;
    }
    @media (max-width: 860px){
      .outGrid{ grid-template-columns: 1fr; }
    }

    .outBox{
      border-radius: var(--radius2);
      padding: 14px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03)),
        linear-gradient(135deg, rgba(107,43,255,.18), rgba(42,168,255,.10));
      border:1px solid rgba(185,140,255,.22);
      box-shadow: 0 12px 26px rgba(0,0,0,.30);
      min-height: 92px;
    }
    .outBox h3{
      margin:0 0 8px;
      font-size: 13px;
      color: var(--muted);
      font-weight: 900;
    }
    .outVal{
      font-weight: 1000;
      font-size: 24px;
      letter-spacing:.2px;
    }
    .outSub{
      margin-top: 6px;
      color: var(--muted2);
      font-size: 12px;
      line-height:1.25;
    }

    /* collapsible details */
    details{
      margin-top: 10px;
      border-radius: var(--radius2);
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      overflow:hidden;
    }
    summary{
      cursor:pointer;
      padding: 12px 14px;
      font-weight: 900;
      color: var(--text);
      list-style:none;
    }
    summary::-webkit-details-marker{ display:none; }
    details .detailsBody{
      padding: 12px 14px 14px;
      color: var(--muted);
      border-top:1px solid rgba(255,255,255,.06);
      line-height:1.45;
      background: rgba(5,3,12,.32);
    }

    /* info icon tooltips */
    .info{
      width: 26px;
      height: 26px;
      border-radius: 999px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-weight: 1000;
      font-size: 13px;
      color: var(--text);
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(195,140,255,.26);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.15);
      cursor: help;
      user-select:none;
      flex: 0 0 auto;
      position:relative;
    }
    .info:hover{
      border-color: rgba(90,180,255,.35);
      box-shadow: 0 0 0 3px rgba(90,180,255,.12);
    }
    .info[data-tip]::after{
      content: attr(data-tip);
      position:absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: calc(100% + 10px);
      width: min(320px, 70vw);
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(8,6,20,.95);
      color: var(--text);
      border:1px solid rgba(195,140,255,.25);
      box-shadow: 0 16px 40px rgba(0,0,0,.55);
      font-size: 12px;
      line-height:1.35;
      opacity:0;
      pointer-events:none;
      transition: opacity .12s ease;
      z-index: 20;
      text-align:left;
      white-space: normal;
    }
    .info[data-tip]:hover::after{ opacity:1; }

    /* tables (watchlist) */
    table{
      width:100%;
      border-collapse: collapse;
      overflow:hidden;
      border-radius: var(--radius2);
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    th, td{
      padding: 10px 10px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      font-size: 13px;
      color: var(--muted);
    }
    th{
      color: var(--text);
      font-weight: 1000;
      background: rgba(255,255,255,.04);
    }
    tr:last-child td{ border-bottom:0; }

    /* toast */
    .toast{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 18px;
      padding: 12px 14px;
      border-radius: 999px;
      background: rgba(8,6,20,.92);
      border:1px solid rgba(195,140,255,.26);
      box-shadow: 0 18px 50px rgba(0,0,0,.55);
      color: var(--text);
      font-weight: 900;
      display:none;
      z-index: 999;
      max-width: min(92vw, 640px);
      text-overflow: ellipsis;
      overflow:hidden;
      white-space: nowrap;
    }

    .hidden{ display:none !important; }
  </style>
</head>

<body>
  <div class="app">

    <!-- HEADER -->
    <header class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1 id="t_appTitle">Equity Analyzer</h1>
          <div class="sub" id="t_appSub">DCF fair value • Watchlist • Education</div>
        </div>
      </div>

      <div class="top-actions">
        <div class="seg" aria-label="Language toggle">
          <button id="btnEN" class="active" type="button">EN</button>
          <button id="btnCZ" type="button">CZ</button>
        </div>

        <button id="btnDemo" class="btn secondary" type="button">Demo values</button>
        <button id="btnSaveTop" class="btn" type="button">Save to Watchlist</button>
      </div>
    </header>

    <!-- TABS -->
    <nav class="tabs" aria-label="Main navigation">
      <button class="tab active" id="tabModel" type="button" data-view="model">DCF Model</button>
      <button class="tab" id="tabWatch" type="button" data-view="watchlist">Watchlist</button>
      <button class="tab" id="tabAbout" type="button" data-view="about">About</button>
    </nav>

    <!-- MODEL VIEW -->
    <section id="viewModel" class="card">
      <div class="section-title">
        <div>
          <h2 id="t_inputsTitle">Inputs</h2>
          <div class="muted" id="t_inputsDesc">
            Multi-scenario DCF with guardrails. Use ranges (Bear/Base/Bull) and stay conservative.
          </div>
        </div>
        <div class="pill" id="pillMode">MODE: Quick</div>
      </div>

      <div class="grid">
        <div class="field">
          <div class="labelRow">
            <label for="in_ticker" id="t_ticker">Ticker / Name</label>
            <span class="info" data-tip="Used as label in Watchlist. Example: AAPL / SOFI / PLTR">i</span>
          </div>
          <input id="in_ticker" placeholder="e.g., AAPL / SOFI / PLTR" />
          <div class="hint" id="t_tickerHint">Used for watchlist label.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_currency" id="t_currency">Currency</label>
            <span class="info" data-tip="All inputs should be in the selected currency (FCF, cash, debt, price).">i</span>
          </div>
          <select id="in_currency">
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="CZK">CZK</option>
            <option value="GBP">GBP</option>
          </select>
          <div class="hint" id="t_currencyHint">All inputs should be in selected currency.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_type" id="t_type">Company type</label>
            <span class="info" data-tip="Sets default assumptions + warnings. You can override.">i</span>
          </div>
          <select id="in_type">
            <option value="growth">Growth / Tech</option>
            <option value="mature">Mature / Blue-chip</option>
            <option value="cyclical">Cyclical</option>
          </select>
          <div class="hint" id="t_typeHint">Sets reasonable defaults + warnings (you can override).</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_mode" id="t_mode">Mode</label>
            <span class="info" data-tip="Quick: enter Base; Bear/Bull derived automatically (± spread).">i</span>
          </div>
          <select id="in_mode">
            <option value="quick">Quick (Bear/Bull auto)</option>
            <option value="manual">Manual (enter all 3)</option>
          </select>
          <div class="hint" id="t_modeHint">Quick: set Base; Bear/Bull derived (± spread default).</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_price" id="t_price">Current price (optional)</label>
            <span class="info" data-tip="Only for upside / margin-of-safety view.">i</span>
          </div>
          <input id="in_price" inputmode="decimal" placeholder="e.g., 180.50" />
          <div class="hint" id="t_priceHint">Used only for upside / margin-of-safety view.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_mos" id="t_mos">Margin of Safety</label>
            <span class="info" data-tip="Applied after valuation (to Base) for a conservative target.">i</span>
          </div>
          <select id="in_mos">
            <option value="0">OFF</option>
            <option value="10">10%</option>
            <option value="15">15%</option>
            <option value="20">20%</option>
            <option value="30">30%</option>
          </select>
          <div class="hint" id="t_mosHint">Applied after valuation (to Base) for a conservative target.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_method" id="t_method">DCF method</label>
            <span class="info" data-tip="Direct FCF is recommended. If you don't know FCF, estimate from revenue × margin.">i</span>
          </div>
          <select id="in_method">
            <option value="fcf">Direct FCF (recommended)</option>
            <option value="rev">Revenue × FCF margin</option>
          </select>
          <div class="hint" id="t_methodHint">If you don’t know FCF, estimate it via revenue × margin.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_years" id="t_years">Projection (years)</label>
            <span class="info" data-tip="Commonly 5–10 years depending on predictability.">i</span>
          </div>
          <input id="in_years" inputmode="numeric" placeholder="10" />
          <div class="hint" id="t_yearsHint">Commonly 5–10 years depending on predictability.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_fcf" id="t_fcf">FCF (TTM or 3–5y avg)</label>
            <span class="info" data-tip="Prefer 3–5y average for cyclical firms (avoid one great year).">i</span>
          </div>
          <input id="in_fcf" inputmode="decimal" placeholder="e.g., 11000000000" />
          <div class="hint" id="t_fcfHint">Prefer a 3–5y average for cyclical firms.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_units" id="t_units">Units</label>
            <span class="info" data-tip="Optional: you can enter values in millions/billions for comfort.">i</span>
          </div>
          <select id="in_units">
            <option value="raw">Raw numbers</option>
            <option value="m">Millions</option>
            <option value="b">Billions</option>
          </select>
          <div class="hint" id="t_unitsHint">Optional: enter values in millions/billions for comfort.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_shares" id="t_shares">Shares (diluted)</label>
            <span class="info" data-tip="Used to compute fair value per share. Try to use diluted shares (basic + SBC impact).">i</span>
          </div>
          <input id="in_shares" inputmode="decimal" placeholder="e.g., 15500000000" />
          <div class="hint" id="t_sharesHint">Used to compute fair value per share.</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_cash" id="t_cash">Cash (optional)</label>
            <span class="info" data-tip="Added to enterprise value (EV → Equity). Use cash & equivalents.">i</span>
          </div>
          <input id="in_cash" inputmode="decimal" placeholder="e.g., 50000000000" />
          <div class="hint" id="t_cashHint">Added to enterprise value (EV → Equity).</div>
        </div>

        <div class="field">
          <div class="labelRow">
            <label for="in_debt" id="t_debt">Debt (optional)</label>
            <span class="info" data-tip="Subtracted to get equity value. Use total debt (short + long term).">i</span>
          </div>
          <input id="in_debt" inputmode="decimal" placeholder="e.g., 70000000000" />
          <div class="hint" id="t_debtHint">Subtracted to get equity value.</div>
        </div>
      </div>

      <div style="height:12px"></div>

      <div class="card" style="padding:16px;border-radius:var(--radius); background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); box-shadow:none;">
        <div class="section-title" style="margin-bottom:6px;">
          <h2 id="t_assumpTitle" style="font-size:16px;margin:0;">Assumptions (3 scenarios)</h2>
          <span class="pill" id="pillGuard">Guardrails ON</span>
        </div>
        <div class="muted" id="t_assumpDesc">Bear/Base/Bull ranges help avoid false precision.</div>

        <div class="grid" style="margin-top:12px;">
          <div class="field">
            <div class="labelRow">
              <label for="in_disc" id="t_disc">Discount rate (base) %</label>
              <span class="info" data-tip="Higher risk → higher discount → lower fair value.">i</span>
            </div>
            <input id="in_disc" inputmode="decimal" placeholder="9" />
            <div class="hint" id="t_discHint">Higher risk → higher discount → lower fair value.</div>
          </div>

          <div class="field">
            <div class="labelRow">
              <label for="in_term" id="t_term">Terminal growth %</label>
              <span class="info" data-tip="Long-run growth after projection. Keep conservative (often 2–3%).">i</span>
            </div>
            <input id="in_term" inputmode="decimal" placeholder="2.5" />
            <div class="hint" id="t_termHint">Long-run growth after projection. Keep conservative.</div>
          </div>

          <div class="field">
            <div class="labelRow">
              <label for="in_base" id="t_baseg">Base FCF growth %</label>
              <span class="info" data-tip="Annual growth during projection. Use realistic long-run assumptions.">i</span>
            </div>
            <input id="in_base" inputmode="decimal" placeholder="12" />
            <div class="hint" id="t_basegHint">Annual growth during projection.</div>
          </div>

          <div class="field">
            <div class="labelRow">
              <label for="in_spread" id="t_spread">Quick spread (± pp)</label>
              <span class="info" data-tip="Quick mode derives Bear/Base/Bull = Base ± spread.">i</span>
            </div>
            <input id="in_spread" inputmode="decimal" placeholder="2" />
            <div class="hint" id="t_spreadHint">Quick mode derives Bear/Base/Bull = Base ± spread.</div>
          </div>
        </div>

        <div class="row-actions">
          <button id="btnCalc" class="btn" type="button">Calculate</button>
          <button id="btnReset" class="btn secondary" type="button">Reset</button>
          <button id="btnSave" class="btn secondary" type="button">Save result</button>
        </div>

        <div class="hint" id="t_quickTip" style="margin-top:10px;">
          Tip: In Quick mode you set only Base; Bear/Bull are derived automatically.
        </div>
      </div>

      <div style="height:14px"></div>

      <div class="section-title">
        <div>
          <h2 id="t_outTitle">Outputs</h2>
          <div class="muted" id="t_outDesc">Fair value range + sanity checks.</div>
        </div>
        <div class="pill" id="pillReady">READY</div>
      </div>

      <div class="outGrid">
        <div class="outBox">
          <h3 id="t_outBase">Fair value (Base)</h3>
          <div class="outVal" id="out_base">—</div>
          <div class="outSub" id="t_outBaseSub">Bear/Bull below.</div>
        </div>

        <div class="outBox">
          <h3 id="t_outRange">Range (Bear → Bull)</h3>
          <div class="outVal" id="out_range">—</div>
          <div class="outSub" id="t_outRangeSub">Use range, not a single number.</div>
        </div>

        <div class="outBox">
          <h3 id="t_outUpside">Upside vs price</h3>
          <div class="outVal" id="out_upside">—</div>
          <div class="outSub" id="t_outUpsideSub">Needs current price (optional).</div>
        </div>

        <div class="outBox">
          <h3 id="t_outWarn">Warnings / checks</h3>
          <div class="outVal" id="out_warn">—</div>
          <div class="outSub" id="t_outWarnSub">—</div>
        </div>
      </div>

      <details>
        <summary id="t_detailsSum">Details</summary>
        <div class="detailsBody" id="out_details">
          Enter inputs and press Calculate.
        </div>
      </details>
    </section>

    <!-- WATCHLIST VIEW -->
    <section id="viewWatchlist" class="card hidden">
      <div class="section-title">
        <div>
          <h2 id="t_wlTitle">Watchlist</h2>
          <div class="muted" id="t_wlDesc">
            Saved results are stored locally in your browser (localStorage). Different device = different watchlist.
          </div>
        </div>
        <div class="row-actions" style="margin:0;">
          <button id="btnExport" class="btn secondary" type="button">Export CSV</button>
          <button id="btnClearWL" class="btn secondary" type="button">Clear</button>
        </div>
      </div>

      <div class="hint" id="t_wlNote">
        Note: Watchlist is stored locally in your browser (localStorage). Different device = different watchlist.
      </div>

      <div style="height:12px"></div>

      <div style="overflow:auto;">
        <table aria-label="Watchlist table">
          <thead>
            <tr>
              <th id="t_wlColName">Name</th>
              <th id="t_wlColBase">Base</th>
              <th id="t_wlColRange">Range</th>
              <th id="t_wlColPrice">Price</th>
              <th id="t_wlColUpside">Upside</th>
              <th id="t_wlColAct">Action</th>
            </tr>
          </thead>
          <tbody id="wl_body">
            <tr><td colspan="6" class="muted" id="t_wlEmpty">No saved items yet.</td></tr>
          </tbody>
        </table>
      </div>

      <div class="row-actions">
        <button class="btn secondary" type="button" data-view="model" id="btnBackFromWL">Back</button>
      </div>
    </section>

    <!-- ABOUT VIEW -->
    <section id="viewAbout" class="card hidden">
      <div class="section-title">
        <div>
          <h2 id="t_aboutTitle">About Equity Analyzer</h2>
          <div class="muted" id="t_aboutSubtitle">Educational valuation tool based on a multi-scenario DCF model.</div>
        </div>
      </div>

      <details open>
        <summary id="t_aboutWhat">What this tool is</summary>
        <div class="detailsBody" id="t_aboutWhatBody">
          Equity Analyzer estimates intrinsic value per share using a discounted cash flow approach.
          It helps you think in ranges (Bear/Base/Bull) and understand sensitivity to growth and discount rates.
        </div>
      </details>

      <details open>
        <summary id="t_aboutHow">How to use it (quick guide)</summary>
        <div class="detailsBody" id="t_aboutHowBody">
          <ol style="margin:0; padding-left:18px;">
            <li>Pick a company type (Growth / Mature / Cyclical) to load sensible defaults.</li>
            <li>Use FCF as TTM or (better for cyclicals) 3–5y average.</li>
            <li>Use diluted shares for per-share output (include SBC impact).</li>
            <li>Set discount rate based on risk; keep terminal growth conservative (often 2–3%).</li>
            <li>Use Quick mode for fast ranges; use Manual if you want to specify Bear/Base/Bull directly.</li>
          </ol>
        </div>
      </details>

      <details>
        <summary id="t_aboutData">Where to find inputs</summary>
        <div class="detailsBody" id="t_aboutDataBody">
          Common sources: company 10-K/10-Q, annual reports, investor presentations, and reputable finance portals.
          For FCF, look for “Net cash provided by operating activities” minus “Capital expenditures”.
          Shares (diluted) can be found in filings under weighted average shares diluted.
          Cash & debt are on the balance sheet.
        </div>
      </details>

      <details>
        <summary id="t_aboutNotAdvice">Important: not financial advice</summary>
        <div class="detailsBody" id="t_aboutNotAdviceBody">
          This application is <strong>NOT financial advice</strong>. It is for educational and analytical purposes only.
          Outputs depend entirely on your assumptions and can be wrong. Always verify inputs and consider uncertainty.
        </div>
      </details>

      <div class="row-actions">
        <button class="btn secondary" type="button" data-view="model" id="btnBackFromAbout">Back</button>
      
    </section>
<div id="research-prompts-root"></div>

  <div id="toast" class="toast"></div>

  <!-- IMPORTANT: JS must exist as app.js in same folder -->
  <script defer src="app.js"></script>
</body>
</html>
