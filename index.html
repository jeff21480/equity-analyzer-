<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#2a0b5a" />
  <title>Anal√Ωza akci√≠ ‚Äì MVP</title>

  <style>
    /* =========================
       THEME (FIALOVO‚ÄìMODR√Å)
    ========================= */
    :root{
      --bg1:#130424;
      --bg2:#2a0b5a;
      --bg3:#0b1a46;

      --card: rgba(255,255,255,.07);
      --card2: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.14);

      --text:#ffffff;
      --muted: rgba(255,255,255,.70);
      --muted2: rgba(255,255,255,.55);

      --purple:#8b5cf6;
      --purple2:#a78bfa;
      --blue:#22d3ee;

      --shadow: 0 20px 50px rgba(0,0,0,.35);
      --radius: 18px;
      --radius2: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 800px at 15% 5%, rgba(139,92,246,.35), transparent 55%),
        radial-gradient(900px 700px at 85% 15%, rgba(34,211,238,.18), transparent 55%),
        linear-gradient(180deg, var(--bg2) 0%, var(--bg1) 55%, var(--bg3) 100%);
      min-height:100%;
      overflow-x:hidden;
    }

    /* iOS/Android safe areas */
    .safe{
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
    }

    a{ color:inherit; }

    /* =========================
       LAYOUT
    ========================= */
    .app{
      max-width: 920px;
      margin: 0 auto;
      padding: 18px 16px 26px;
    }

    .screen{ display:none; }
    .screen.active{ display:block; }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 14px;
    }

    .badgeRow{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin-bottom:12px;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.85);
      font-size: 13px;
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
      backdrop-filter: blur(10px);
    }

    .dot{
      width:10px;height:10px;border-radius:999px;
      background: linear-gradient(135deg, var(--blue), var(--purple));
      box-shadow: 0 0 0 4px rgba(34,211,238,.12);
    }

    .pillTag{
      display:inline-flex;
      align-items:center;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      font-size:12px;
      color: rgba(255,255,255,.75);
    }

    .hero{
      margin-top: 4px;
      margin-bottom: 14px;
    }

    .hero h1{
      margin: 6px 0 8px;
      font-size: clamp(38px, 6.2vw, 62px);
      letter-spacing: .3px;
      font-weight: 800;
      line-height: .95;
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
      text-shadow: 0 18px 70px rgba(0,0,0,.45);
    }

    .hero p{
      margin: 0;
      color: var(--muted2);
      font-size: 15px;
      line-height: 1.45;
      max-width: 62ch;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      padding: 16px;
      backdrop-filter: blur(14px);
    }

    .menu{
      display:flex;
      flex-direction:column;
      gap:14px;
      margin-top: 14px;
    }

    .menuBtn{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
      width:100%;
      text-align:left;
      border:1px solid rgba(255,255,255,.14);
      border-radius: 22px;
      background: rgba(255,255,255,.06);
      padding: 14px 14px;
      cursor:pointer;
      color: var(--text);
      box-shadow: 0 18px 50px rgba(0,0,0,.22);
      backdrop-filter: blur(12px);
      transition: transform .06s ease, border-color .2s ease, background .2s ease;
    }
    .menuBtn:active{ transform: scale(.99); }
    .menuBtn:hover{ border-color: rgba(139,92,246,.45); background: rgba(255,255,255,.075); }

    .menuLeft{ display:flex; gap:14px; align-items:center; }
    .iconBox{
      width:46px;height:46px;border-radius:16px;
      display:flex;align-items:center;justify-content:center;
      background: linear-gradient(135deg, rgba(139,92,246,.35), rgba(34,211,238,.18));
      border:1px solid rgba(255,255,255,.16);
      box-shadow: 0 12px 28px rgba(0,0,0,.25);
      font-size:22px;
    }
    .menuTitle{ font-size: 22px; font-weight: 800; margin:0; line-height: 1.1; font-family: ui-serif, Georgia, "Times New Roman", Times, serif; }
    .menuDesc{ margin:4px 0 0; color: var(--muted2); font-size: 14px; }

    .chev{
      opacity:.8;
      font-size: 18px;
      padding-right: 4px;
    }

    .panelTitle{
      font-weight: 800;
      font-size: 16px;
      color: rgba(255,255,255,.92);
    }

    .subTitle{
      margin-top: 4px;
      color: rgba(255,255,255,.62);
      font-size: 13px;
      line-height: 1.35;
    }

    .back{
      border:none;
      border-radius: 999px;
      padding: 10px 14px;
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.9);
      border:1px solid rgba(255,255,255,.14);
      cursor:pointer;
      font-weight: 700;
      backdrop-filter: blur(10px);
    }
    .back:active{ transform: scale(.99); }

    /* =========================
       FORMS
    ========================= */
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 12px;
    }
    @media (min-width: 760px){
      .grid.two{ grid-template-columns: 1fr 1fr; }
      .grid.three{ grid-template-columns: 1fr 1fr 1fr; }
    }

    label{
      display:block;
      margin-bottom: 6px;
      color: rgba(255,255,255,.82);
      font-weight: 700;
      font-size: 14px;
    }
    .hint{
      margin-top: 6px;
      color: rgba(255,255,255,.58);
      font-size: 12.5px;
      line-height: 1.35;
    }

    input, select, textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.22);
      color: var(--text);
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      font-size: 16px;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(139,92,246,.55);
      box-shadow: 0 0 0 4px rgba(139,92,246,.18);
    }
    input::placeholder, textarea::placeholder{ color: rgba(255,255,255,.45); }

    /* ANDROID/CHROME autofill */
    input:-webkit-autofill,
    textarea:-webkit-autofill,
    select:-webkit-autofill{
      -webkit-text-fill-color: var(--text) !important;
      transition: background-color 9999s ease-in-out 0s;
      box-shadow: 0 0 0 1000px rgba(0,0,0,.22) inset !important;
      border: 1px solid rgba(255,255,255,.16) !important;
    }

    /* =========================
       BUTTONS
    ========================= */
    .btns{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    button.primary{
      border:none;
      padding: 12px 14px;
      border-radius: 14px;
      cursor:pointer;
      color: white;
      font-weight: 800;
      background: linear-gradient(135deg, var(--purple), var(--purple2));
      box-shadow: 0 18px 40px rgba(139,92,246,.28);
    }
    button.primary:active{ transform: scale(.99); }

    button.ghost{
      border:1px solid rgba(255,255,255,.16);
      padding: 12px 14px;
      border-radius: 14px;
      cursor:pointer;
      color: rgba(255,255,255,.92);
      font-weight: 800;
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
    }
    button.ghost:active{ transform: scale(.99); }

    button.danger{
      border:1px solid rgba(255,255,255,.16);
      padding: 12px 14px;
      border-radius: 14px;
      cursor:pointer;
      color: rgba(255,255,255,.92);
      font-weight: 800;
      background: rgba(239,68,68,.18);
    }

    /* =========================
       RESULT PILLS
    ========================= */
    .result{
      margin-top: 14px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      border-radius: 18px;
      padding: 14px;
    }

    .pillRow{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 420px){
      .pillRow{ grid-template-columns: 1fr; }
    }

    .pill{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.045));
      padding: 12px;
    }
    .pill .k{ font-weight: 900; color: rgba(255,255,255,.9); }
    .pill .v{ margin-top: 6px; font-size: 18px; font-weight: 900; color: rgba(233,213,255,.95); }

    .small{
      color: rgba(255,255,255,.62);
      font-size: 13px;
      line-height: 1.4;
    }

    /* =========================
       DETAILS HELP (s tlaƒç√≠tkem Zav≈ô√≠t)
    ========================= */
    details.help{
      margin-top: 8px;
      border-top: 1px dashed rgba(255,255,255,.20);
      padding-top: 8px;
    }
    details.help summary{
      cursor: pointer;
      color: rgba(139,92,246,.95);
      font-weight: 900;
      font-size: 14px;
      list-style: none;
      user-select: none;
      outline: none;
    }
    details.help summary::-webkit-details-marker{ display:none; }
    details.help summary::before{
      content: "‚ñ∂";
      display:inline-block;
      margin-right:8px;
      transform: translateY(-1px);
      opacity:.9;
      transition: transform .12s ease;
    }
    details.help[open] summary::before{
      transform: rotate(90deg) translateX(1px);
    }
    .helpBody{
      margin-top: 10px;
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
    }
    .closeDetails{
      margin-top: 10px;
      width:100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(139,92,246,.16);
      color: rgba(255,255,255,.92);
      font-weight: 900;
      cursor:pointer;
    }
    .closeDetails:active{ transform: scale(.99); }

    /* =========================
       TABLE (WATCHLIST)
    ========================= */
    .tableWrap{
      overflow:auto;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      margin-top: 12px;
    }
    table{
      width:100%;
      border-collapse: collapse;
      min-width: 720px;
    }
    th, td{
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      text-align:left;
      font-size: 13px;
      white-space: nowrap;
    }
    th{
      position: sticky;
      top: 0;
      background: rgba(10,10,18,.70);
      backdrop-filter: blur(10px);
      color: rgba(255,255,255,.85);
      font-weight: 900;
      z-index: 1;
    }
    td{ color: rgba(255,255,255,.78); }
    .rowActions{
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:flex-end;
    }
    .trash{
      border:none;
      cursor:pointer;
      border-radius: 12px;
      padding: 8px 10px;
      color: rgba(255,255,255,.92);
      background: rgba(239,68,68,.18);
      border: 1px solid rgba(255,255,255,.14);
      font-weight: 900;
    }
    .openBtn{
      border:none;
      cursor:pointer;
      border-radius: 12px;
      padding: 8px 10px;
      color: rgba(255,255,255,.92);
      background: rgba(139,92,246,.16);
      border: 1px solid rgba(255,255,255,.14);
      font-weight: 900;
    }

    /* messages */
    .msg{
      margin-top: 10px;
      color: rgba(255,255,255,.72);
      font-size: 13px;
    }

    .divider{
      height:1px;
      background: rgba(255,255,255,.12);
      margin: 14px 0;
    }
  </style>
</head>

<body class="safe">
  <div class="app">

    <!-- =========================
         HOME
    ========================= -->
    <section id="screen-home" class="screen active">
      <div class="badgeRow">
        <div class="chip"><span class="dot"></span> Anal√Ωza akci√≠ ‚Ä¢ Beta</div>
        <div class="pillTag">MVP</div>
      </div>

      <div class="hero">
        <h1>Anal√Ωza akci√≠</h1>
        <p>
          Modern√≠ n√°stroje pro investory: v√Ωpoƒçet vnit≈ôn√≠ hodnoty (DCF),
          watchlist, slo≈æen√© √∫roƒçen√≠ a jednoduch√© vysvƒõtlen√≠ metodiky.
        </p>
      </div>

      <div class="menu">
        <button class="menuBtn" data-go="analyzer" aria-label="Otev≈ô√≠t analyz√°tor">
          <div class="menuLeft">
            <div class="iconBox">üìà</div>
            <div>
              <div class="menuTitle">Analyz√°tor</div>
              <div class="menuDesc">Odhad vnit≈ôn√≠ hodnoty (Bear / Base / Bull)</div>
            </div>
          </div>
          <div class="chev">‚Ä∫</div>
        </button>

        <button class="menuBtn" data-go="calc" aria-label="Otev≈ô√≠t kalkulaƒçku">
          <div class="menuLeft">
            <div class="iconBox">üßÆ</div>
            <div>
              <div class="menuTitle">Kalkulaƒçka</div>
              <div class="menuDesc">Slo≈æen√© √∫roƒçen√≠ + c√≠lov√° ƒç√°stka</div>
            </div>
          </div>
          <div class="chev">‚Ä∫</div>
        </button>

        <button class="menuBtn" data-go="watchlist" aria-label="Otev≈ô√≠t watchlist">
          <div class="menuLeft">
            <div class="iconBox">üëÄ</div>
            <div>
              <div class="menuTitle">Watchlist</div>
              <div class="menuDesc">Ulo≈æen√© anal√Ωzy (datum + v√Ωsledky)</div>
            </div>
          </div>
          <div class="chev">‚Ä∫</div>
        </button>

        <button class="menuBtn" data-go="how" aria-label="Otev≈ô√≠t n√°povƒõdu">
          <div class="menuLeft">
            <div class="iconBox">‚ÑπÔ∏è</div>
            <div>
              <div class="menuTitle">Jak to funguje</div>
              <div class="menuDesc">Metodika, vysvƒõtlen√≠ vstup≈Ø, tipy</div>
            </div>
          </div>
          <div class="chev">‚Ä∫</div>
        </button>
      </div>

      <div class="msg" style="margin-top:14px;">
        Tip: M≈Ø≈æe≈° ps√°t desetinnou ƒç√°rkou (nap≈ô. 9,5). Funguje i na mobilu.
      </div>
    </section>

    <!-- =========================
         ANALYZER (DCF)
    ========================= -->
    <section id="screen-analyzer" class="screen">
      <div class="topbar">
        <button class="back" data-back="home">‚Üê Zpƒõt</button>
        <div>
          <div class="panelTitle">Analyz√°tor</div>
          <div class="subTitle">DCF odhad vnit≈ôn√≠ hodnoty (3 sc√©n√°≈ôe)</div>
        </div>
        <div class="pillTag">Beta</div>
      </div>

      <div class="card">
        <div class="panelTitle">DCF v√Ωpoƒçet ‚Äì vnit≈ôn√≠ hodnota</div>
        <div class="subTitle">
          MVP model: pou≈æ√≠v√° <b>FCF na akcii</b> (FCF per share), projektuje na X let a p≈ôid√° termin√°ln√≠ hodnotu.
        </div>

        <div class="divider"></div>

        <div class="grid two">
          <div>
            <label for="a_ticker">Ticker (voliteln√©)</label>
            <input id="a_ticker" type="text" placeholder="nap≈ô. SOFI" />
            <div class="hint">Pou≈æije se p≈ôi ukl√°d√°n√≠ do Watchlistu.</div>
          </div>

          <div>
            <label for="a_price">Aktu√°ln√≠ cena akcie</label>
            <input id="a_price" type="text" inputmode="decimal" placeholder="nap≈ô. 150" />
            <details class="help">
              <summary>Co to je?</summary>
              <div class="helpBody">
                <div class="small">
                  Cena, za kterou se akcie dnes obchoduje (market price). Slou≈æ√≠ k v√Ωpoƒçtu ‚Äûupside‚Äú (potenci√°l v≈Øƒçi f√©rov√© cenƒõ).
                </div>
                <button type="button" class="closeDetails">Zav≈ô√≠t</button>
              </div>
            </details>
          </div>

          <div>
            <label for="a_fcfps">Free Cash Flow na akcii (FCF / share)</label>
            <input id="a_fcfps" type="text" inputmode="decimal" placeholder="nap≈ô. 6,5" />
            <details class="help">
              <summary>Co to je?</summary>
              <div class="helpBody">
                <div class="small">
                  <b>Free Cash Flow</b> je hotovost, kter√° firmƒõ z≈Østane po investic√≠ch (capex). V MVP zad√°v√°me <b>FCF p≈ôepoƒçten√© na jednu akcii</b>.
                  ƒå√≠m vy≈°≈°√≠ FCF, t√≠m vy≈°≈°√≠ (potenci√°ln√≠) vnit≈ôn√≠ hodnota.
                </div>
                <button type="button" class="closeDetails">Zav≈ô√≠t</button>
              </div>
            </details>
          </div>

          <div>
            <label for="a_years">Poƒçet let projekce</label>
            <input id="a_years" type="text" inputmode="numeric" placeholder="nap≈ô. 10" />
            <details class="help">
              <summary>Co to je?</summary>
              <div class="helpBody">
                <div class="small">
                  Kolik let dop≈ôedu odhadujeme r≈Øst FCF. ƒåasto 5‚Äì10 let (podle stability firmy).
                </div>
                <button type="button" class="closeDetails">Zav≈ô√≠t</button>
              </div>
            </details>
          </div>

          <div>
            <label for="a_g">R≈Øst FCF (Base) %</label>
            <input id="a_g" type="text" inputmode="decimal" placeholder="nap≈ô. 8" />
            <details class="help">
              <summary>Co to je?</summary>
              <div class="helpBody">
                <div class="small">
                  O kolik % roƒçnƒõ ƒçek√°≈°, ≈æe poroste FCF na akcii v projekci. Buƒè realistick√Ω ‚Äì u vyspƒõl√© firmy b√Ωv√° ni≈æ≈°√≠, u r≈Østov√© vy≈°≈°√≠.
                </div>
                <button type="button" class="closeDetails">Zav≈ô√≠t</button>
              </div>
            </details>
          </div>

          <div>
            <label for="a_r">Diskontn√≠ sazba (Base) %</label>
            <input id="a_r" type="text" inputmode="decimal" placeholder="nap≈ô. 9" />
            <details class="help">
              <summary>Co to je?</summary>
              <div class="helpBody">
                <div class="small">
                  Po≈æadovan√Ω v√Ωnos / m√≠ra rizika. Vy≈°≈°√≠ diskont = p≈ô√≠snƒõj≈°√≠ ocenƒõn√≠. ƒåasto 8‚Äì12 % podle rizika firmy.
                </div>
                <button type="button" class="closeDetails">Zav≈ô√≠t</button>
              </div>
            </details>
          </div>

          <div>
            <label for="a_tg">Termin√°ln√≠ r≈Øst (Base) %</label>
            <input id="a_tg" type="text" inputmode="decimal" placeholder="nap≈ô. 2,5" />
            <details class="help">
              <summary>Co to je?</summary>
              <div class="helpBody">
                <div class="small">
                  Dlouhodob√Ω r≈Øst po skonƒçen√≠ projekce (terminal growth). Obvykle 2‚Äì4 % (p≈ôibli≈ænƒõ inflace + re√°ln√Ω r≈Øst).
                </div>
                <button type="button" class="closeDetails">Zav≈ô√≠t</button>
              </div>
            </details>
          </div>
        </div>

        <div class="divider"></div>

        <div class="panelTitle">Sc√©n√°≈ôe (√∫pravy v≈Øƒçi Base)</div>
        <div class="subTitle">
          √öpravy jsou v <b>procentn√≠ch bodech</b> (p.b.). Nap≈ô. +2 p.b. r≈Østu znamen√°: Base r≈Øst 8% ‚Üí Bull r≈Øst 10%.
        </div>

        <div class="grid three">
          <div>
            <label for="a_bear_g">Bear √∫prava r≈Østu (p.b.)</label>
            <input id="a_bear_g" type="text" inputmode="decimal" placeholder="nap≈ô. -2" />
          </div>
          <div>
            <label for="a_bear_r">Bear √∫prava diskontu (p.b.)</label>
            <input id="a_bear_r" type="text" inputmode="decimal" placeholder="nap≈ô. +1" />
          </div>
          <div>
            

          <label for="a_bear_tg">Bear √∫prava termin√°lu (p.b.)</label>
            <input id="a_bear_tg" type="text" inputmode="decimal" placeholder="nap≈ô. -0,5" />
          </div>

          <div>
            <label for="a_bull_g">Bull √∫prava r≈Østu (p.b.)</label>
            <input id="a_bull_g" type="text" inputmode="decimal" placeholder="nap≈ô. +2" />
          </div>
          <div>
            <label for="a_bull_r">Bull √∫prava diskontu (p.b.)</label>
            <input id="a_bull_r" type="text" inputmode="decimal" placeholder="nap≈ô. -1" />
          </div>
          <div>
            <label for="a_bull_tg">Bull √∫prava termin√°lu (p.b.)</label>
            <input id="a_bull_tg" type="text" inputmode="decimal" placeholder="nap≈ô. +0,5" />
          </div>
        </div>

        <div class="btns">
          <button id="btnCalc" class="primary" type="button">Spoƒç√≠tat</button>
          <button id="btnSave" class="ghost" type="button">Ulo≈æit do Watchlistu</button>
        </div>

        <div id="calcMsg" class="msg"></div>

        <div id="resultBox" class="result" style="display:none;">
          <div class="panelTitle">V√Ωsledek (f√©rov√° cena na akcii)</div>

          <div class="pillRow">
            <div class="pill" id="pillBear">
              <div class="k">Bear</div>
              <div class="v">‚Äì</div>
            </div>
            <div class="pill" id="pillBase">
              <div class="k">Base</div>
              <div class="v">‚Äì</div>
            </div>
            <div class="pill" id="pillBull">
              <div class="k">Bull</div>
              <div class="v">‚Äì</div>
            </div>
          </div>

          <div id="upsideLine" class="small" style="margin-top:10px; opacity:.95;"></div>

          <details class="help" style="margin-top:12px;">
            <summary>Co znamenaj√≠ v√Ωsledky?</summary>
            <div class="helpBody">
              <div class="small" style="line-height:1.45;">
                <b>Bear / Base / Bull</b> jsou 3 sc√©n√°≈ôe f√©rov√© ceny podle DCF.<br/>
                <b>Bear</b> = hor≈°√≠ p≈ôedpoklady (ni≈æ≈°√≠ r≈Øst / vy≈°≈°√≠ diskont / ni≈æ≈°√≠ termin√°l).<br/>
                <b>Bull</b> = lep≈°√≠ p≈ôedpoklady (vy≈°≈°√≠ r≈Øst / ni≈æ≈°√≠ diskont / vy≈°≈°√≠ termin√°l).<br/><br/>
                Pokud je f√©rov√° cena v√Ωraznƒõ nad aktu√°ln√≠ cenou, znamen√° to potenci√°ln√≠ <b>upside</b> (podle tƒõchto vstup≈Ø).
              </div>
              <button type="button" class="closeDetails">Zav≈ô√≠t</button>
            </div>
          </details>
        </div>
      </div>
    </section>

    <!-- =========================
         COMPOUND CALC
    ========================= -->
    <section id="screen-calc" class="screen">
      <div class="topbar">
        <button class="back" data-back="home">‚Üê Zpƒõt</button>
        <div>
          <div class="panelTitle">Kalkulaƒçka</div>
          <div class="subTitle">Slo≈æen√© √∫roƒçen√≠ + c√≠lov√° ƒç√°stka</div>
        </div>
        <div class="pillTag">MVP</div>
      </div>

      <div class="card">
        <div class="panelTitle">Slo≈æen√© √∫roƒçen√≠</div>
        <div class="subTitle">Spoƒç√≠t√° budouc√≠ hodnotu portfolia (s vkladem) a orientaƒçnƒõ i ƒças do c√≠le.</div>

        <div class="grid two">
          <div>
            <label for="c_start">Poƒç√°teƒçn√≠ vklad</label>
            <input id="c_start" type="text" inputmode="decimal" placeholder="nap≈ô. 100000" />
          </div>
          <div>
            <label for="c_monthly">Mƒõs√≠ƒçn√≠ vklad</label>
            <input id="c_monthly" type="text" inputmode="decimal" placeholder="nap≈ô. 5000" />
          </div>

          <div>
            <label for="c_rate">Roƒçn√≠ v√Ωnos %</label>
            <input id="c_rate" type="text" inputmode="decimal" placeholder="nap≈ô. 8" />
          </div>
          <div>
            <label for="c_years">Poƒçet let</label>
            <input id="c_years" type="text" inputmode="numeric" placeholder="nap≈ô. 15" />
          </div>

          <div>
            <label for="c_target">C√≠lov√° ƒç√°stka (voliteln√©)</label>
            <input id="c_target" type="text" inputmode="decimal" placeholder="nap≈ô. 2000000" />
            <div class="hint">Kdy≈æ vypln√≠≈°, spoƒç√≠t√°me i orientaƒçn√≠ poƒçet let do c√≠le.</div>
          </div>
          <div>
            <label for="c_freq">P≈ôipisov√°n√≠</label>
            <select id="c_freq">
              <option value="12">mƒõs√≠ƒçnƒõ</option>
              <option value="4">ƒçtvrtletnƒõ</option>
              <option value="1">roƒçnƒõ</option>
            </select>
          </div>
        </div>

        <div class="btns">
          <button id="btnCompound" class="primary" type="button">Spoƒç√≠tat</button>
          <button id="btnCompoundReset" class="ghost" type="button">Vymazat</button>
        </div>

        <div id="cMsg" class="msg"></div>

        <div id="cResult" class="result" style="display:none;">
          <div class="panelTitle">V√Ωsledek</div>
          <div class="pillRow" style="grid-template-columns: 1fr 1fr;">
            <div class="pill">
              <div class="k">Budouc√≠ hodnota</div>
              <div class="v" id="cFV">‚Äì</div>
              <div class="small" id="cFVnote"></div>
            </div>
            <div class="pill">
              <div class="k">Celkem vlo≈æeno</div>
              <div class="v" id="cContrib">‚Äì</div>
              <div class="small">Poƒç√°teƒçn√≠ + mƒõs√≠ƒçn√≠ vklady</div>
            </div>
          </div>

          <div class="pillRow" style="grid-template-columns: 1fr 1fr; margin-top:10px;">
            <div class="pill">
              <div class="k">Zisk (FV ‚àí vlo≈æeno)</div>
              <div class="v" id="cGain">‚Äì</div>
            </div>
            <div class="pill">
              <div class="k">ƒåas do c√≠le (orientaƒçnƒõ)</div>
              <div class="v" id="cToTarget">‚Äì</div>
              <div class="small">Pouze pokud je vyplnƒõn√° c√≠lov√° ƒç√°stka.</div>
            </div>
          </div>

          <details class="help" style="margin-top:12px;">
            <summary>Jak se to poƒç√≠t√°?</summary>
            <div class="helpBody">
              <div class="small">
                Poƒç√≠t√°me slo≈æen√© √∫roƒçen√≠ s pravideln√Ωm mƒõs√≠ƒçn√≠m vkladem. V√Ωnos je p≈ôepoƒçten√Ω podle zvolen√© frekvence p≈ôipisov√°n√≠
                (mƒõs√≠ƒçnƒõ/ƒçtvrtletnƒõ/roƒçnƒõ). ‚Äûƒåas do c√≠le‚Äú je jednoduch√° aproximace iterac√≠ po mƒõs√≠c√≠ch.
              </div>
              <button type="button" class="closeDetails">Zav≈ô√≠t</button>
            </div>
          </details>
        </div>
      </div>
    </section>

    <!-- =========================
         WATCHLIST
    ========================= -->
    <section id="screen-watchlist" class="screen">
      <div class="topbar">
        <button class="back" data-back="home">‚Üê Zpƒõt</button>
        <div>
          <div class="panelTitle">Watchlist</div>
          <div class="subTitle">Ulo≈æen√© anal√Ωzy (datum + v√Ωsledky)</div>
        </div>
        <div class="pillTag">MVP</div>
      </div>

      <div class="card">
        <div class="panelTitle">Ulo≈æen√© polo≈æky</div>
        <div class="subTitle">
          Ka≈ædou polo≈æku m≈Ø≈æe≈° smazat zvl√°≈°≈• (ikona üóë). ‚ÄûSmazat v≈°e‚Äú sma≈æe cel√Ω watchlist.
        </div>

        <div class="btns" style="margin-top:12px;">
          <button id="btnExport" class="ghost" type="button">Export CSV</button>
          <button id="btnClearAll" class="danger" type="button">Smazat v≈°e</button>
        </div>

        <div id="wlMsg" class="msg"></div>

        <div class="tableWrap" style="margin-top:12px;">
          <table>
            <thead>
              <tr>
                <th>Datum</th>
                <th>Ticker</th>
                <th>Cena</th>
                <th>Bear</th>
                <th>Base</th>
                <th>Bull</th>
                <th>Upside (Base)</th>
                <th style="text-align:right;">Akce</th>
              </tr>
            </thead>
            <tbody id="wlBody"></tbody>
          </table>
        </div>

        <details class="help" style="margin-top:12px;">
          <summary>Co je v exportu?</summary>
          <div class="helpBody">
            <div class="small">
              CSV obsahuje: datum, ticker, aktu√°ln√≠ cenu, Bear/Base/Bull f√©rovou cenu, upside %, a pou≈æit√© vstupy (FCF, roky, r≈Øst, diskont, termin√°l).
              Je p≈ôid√°n UTF-8 BOM, aby to Excel otev≈ôel spr√°vnƒõ.
            </div>
            <button type="button" class="closeDetails">Zav≈ô√≠t</button>
          </div>
        </details>
      </div>
    </section>

    <!-- =========================
         HOW IT WORKS
    ========================= -->
    <section id="screen-how" class="screen">
      <div class="topbar">
        <button class="back" data-back="home">‚Üê Zpƒõt</button>
        <div>
          <div class="panelTitle">Jak to funguje</div>
          <div class="subTitle">Metodika + vysvƒõtlen√≠ vstup≈Ø</div>
        </div>
        <div class="pillTag">Beta</div>
      </div>

      <div class="card">
        <div class="panelTitle">Co je DCF?</div>
        <div class="subTitle" style="margin-top:10px; line-height:1.5;">
          <b>DCF (Discounted Cash Flow)</b> je metoda, kter√° odhaduje f√©rovou hodnotu firmy tak, ≈æe
          <b>diskontuje budouc√≠ cash flow</b> na souƒçasnou hodnotu.<br/><br/>
          V t√©to MVP verzi zad√°v√°≈° <b>FCF na akcii</b> a model z nƒõj udƒõl√° projekci pro X let + termin√°ln√≠ hodnotu.
        </div>

        <div class="divider"></div>

        <div class="panelTitle">Tipy</div>
        <ul class="subTitle" style="margin-top:10px; line-height:1.55;">
          <li>M≈Ø≈æe≈° ps√°t desetinnou ƒç√°rkou (nap≈ô. 9,5).</li>
          <li>Termin√°ln√≠ r≈Øst d√°vej realisticky (ƒçasto 2‚Äì4 %).</li>
          <li>Diskont 8‚Äì12 % podle rizika firmy.</li>
          <li>U growth firem buƒè opatrn√Ω s p≈ô√≠li≈° vysok√Ωm r≈Østem na dlouho.</li>
        </ul>

        <div class="divider"></div>

        <div class="panelTitle">Pozn√°mka</div>
        <div class="subTitle" style="margin-top:10px;">
          Toto je MVP. P≈ôesnost z√°vis√≠ na vstupn√≠ch p≈ôedpokladech. U firem s negativn√≠m FCF (nebo extr√©mn√≠ volatilitou)
          je DCF v√Ωraznƒõ citliv√© na parametry.
        </div>
      </div>
    </section>

  </div>

  <script>
    /* =========================
       HELPERS
    ========================= */
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    function showScreen(key){
      $$(".screen").forEach(s => s.classList.remove("active"));
      $("#screen-" + key).classList.add("active");
      window.scrollTo({top:0, behavior:"instant"});
    }

    function nowStamp(){
      const d = new Date();
      const pad = (n)=> String(n).padStart(2,"0");
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}`;
    }

    function parseNum(v){
      if (v == null) return NaN;
      const s = String(v).trim().replace(/\s+/g,"").replace(",",".");
      if (!s) return NaN;
      const n = Number(s);
      return Number.isFinite(n) ? n : NaN;
    }

    function fmtMoney(n){
      if (!Number.isFinite(n)) return "‚Äì";
      return n.toLocaleString("cs-CZ", { maximumFractionDigits: 2 });
    }

    function fmtPct(n){
      if (!Number.isFinite(n)) return "‚Äì";
      return n.toLocaleString("cs-CZ", { maximumFractionDigits: 1 }) + " %";
    }

    function downloadTextFile(filename, text, mime){
      const blob = new Blob([text], {type: mime || "text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      setTimeout(() => {
        URL.revokeObjectURL(url);
        a.remove();
      }, 0);
    }

    /* =========================
       NAV
    ========================= */
    $$(".menuBtn").forEach(btn => {
      btn.addEventListener("click", () => showScreen(btn.dataset.go));
    });
    $$(".back").forEach(btn => {
      btn.addEventListener("click", () => showScreen(btn.dataset.back));
    });

    /* =========================
       DETAILS CLOSE BUTTON FIX
    ========================= */
    document.addEventListener("click", (e) => {
      const btn = e.target.closest(".closeDetails");
      if (!btn) return;
      const details = btn.closest("details");
      if (!details) return;
      details.open = false;
      details.scrollIntoView({ block: "nearest", behavior: "smooth" });
    });

    // (voliteln√©) otev≈ôe se jen jedna help bublina najednou
    function bindHelpSingles(){
      $$("details.help").forEach(d => {
        d.addEventListener("toggle", () => {
          if (!d.open) return;
          $$("details.help").forEach(other => {
            if (other !== d) other.open = false;
          });
        });
      });
    }
    bindHelpSingles();

    /* =========================
       DCF MODEL
    ========================= */
    function dcfValuePerShare(fcf0, years, g, r, tg){
      const n = Math.max(1, Math.round(years));
      const gr = g/100;
      const rr = r/100;
      const tgr = tg/100;

      if (!(fcf0 > 0)) return NaN;
      if (!(rr > 0)) return NaN;
      if (!(rr > tgr)) return NaN;

      let pv = 0;
      let fcf = fcf0;

      for (let t = 1; t <= n; t++){
        fcf = fcf * (1 + gr);
        pv += fcf / Math.pow(1 + rr, t);
      }

      const fcfNext = fcf * (1 + tgr);
      const tv = fcfNext / (rr - tgr);
      pv += tv / Math.pow(1 + rr, n);

      return pv;
    }

    function readAnalyzerInputs(){
      const ticker = ($("#a_ticker").value || "").trim().toUpperCase();
      const price = parseNum($("#a_price").value);
      const fcf0 = parseNum($("#a_fcfps").value);
      const years = parseNum($("#a_years").value);
      const g = parseNum($("#a_g").value);
      const r = parseNum($("#a_r").value);
      const tg = parseNum($("#a_tg").value);

      const bearG = parseNum($("#a_bear_g").value);
      const bearR = parseNum($("#a_bear_r").value);
      const bearTG = parseNum($("#a_bear_tg").value);

      const bullG = parseNum($("#a_bull_g").value);
      const bullR = parseNum($("#a_bull_r").value);
      const bullTG = parseNum($("#a_bull_tg").value);

      return {
        ticker, price, fcf0, years, base:{g,r,tg},
        adj:{
          bear:{g:bearG, r:bearR, tg:bearTG},
          bull:{g:bullG, r:bullR, tg:bullTG},
        }
      };
    }

    function validateAnalyzer(inp){
      const errs = [];
      if (!Number.isFinite(inp.price) || inp.price <= 0) errs.push("Dopl≈à aktu√°ln√≠ cenu (> 0).");
      if (!Number.isFinite(inp.fcf0) || inp.fcf0 <= 0) errs.push("Dopl≈à FCF na akcii (> 0).");
      if (!Number.isFinite(inp.years) || inp.years < 1) errs.push("Dopl≈à poƒçet let projekce (>= 1).");
      if (!Number.isFinite(inp.base.g)) errs.push("Dopl≈à r≈Øst FCF (Base) %.");
      if (!Number.isFinite(inp.base.r) || inp.base.r <= 0) errs.push("Dopl≈à diskontn√≠ sazbu (Base) % (> 0).");
      if (!Number.isFinite(inp.base.tg)) errs.push("Dopl≈à termin√°ln√≠ r≈Øst (Base) %.");
      return errs;
    }

    function computeDCF(){
      const inp = readAnalyzerInputs();
      const msg = $("#calcMsg");
      msg.textContent = "";

      const errs = validateAnalyzer(inp);
      if (errs.length){
        msg.textContent = errs.join(" ");
        $("#resultBox").style.display = "none";
        return null;
      }

      const base = { g: inp.base.g, r: inp.base.r, tg: inp.base.tg };

      const bear = {
        g: base.g + (Number.isFinite(inp.adj.bear.g) ? inp.adj.bear.g : 0),
        r: base.r + (Number.isFinite(inp.adj.bear.r) ? inp.adj.bear.r : 0),
        tg: base.tg + (Number.isFinite(inp.adj.bear.tg) ? inp.adj.bear.tg : 0),
      };

      const bull = {
        g: base.g + (Number.isFinite(inp.adj.bull.g) ? inp.adj.bull.g : 0),
        r: base.r + (Number.isFinite(inp.adj.bull.r) ? inp.adj.bull.r : 0),
        tg: base.tg + (Number.isFinite(inp.adj.bull.tg) ? inp.adj.bull.tg : 0),
      };

      const vBear = dcfValuePerShare(inp.fcf0, inp.years, bear.g, bear.r, bear.tg);
      const vBase = dcfValuePerShare(inp.fcf0, inp.years, base.g, base.r, base.tg);
      const vBull = dcfValuePerShare(inp.fcf0, inp.years, bull.g, bull.r, bull.tg);

      if (![vBear, vBase, vBull].some(Number.isFinite)){
        msg.textContent = "V√Ωpoƒçet selhal. Zkontroluj, ≈æe diskont (r) je vƒõt≈°√≠ ne≈æ termin√°ln√≠ r≈Øst (g) a ≈æe FCF > 0.";
        $("#resultBox").style.display = "none";
        return null;
      }

      $("#pillBear .v").textContent = fmtMoney(vBear);
      $("#pillBase .v").textContent = fmtMoney(vBase);
      $("#pillBull .v").textContent = fmtMoney(vBull);

      const upside = ((vBase / inp.price) - 1) * 100;
      $("#upsideLine").textContent = `Upside (Base vs. cena): ${fmtPct(upside)}`;

      $("#resultBox").style.display = "block";
      msg.textContent = "Hotovo. M≈Ø≈æe≈° ulo≈æit do Watchlistu.";

      return {
        ticker: inp.ticker,
        stamp: nowStamp(),
        price: inp.price,
        values: { bear: vBear, base: vBase, bull: vBull, upsidePct: upside },
        fcf0: inp.fcf0,
        years: Math.round(inp.years),
        base: base,
        scenario: { bear, bull }
      };
    }

    let lastComputed = null;

    $("#btnCalc").addEventListener("click", () => {
      const res = computeDCF();
      if (res) lastComputed = res;
    });

    /* =========================
       WATCHLIST (localStorage)
    ========================= */
    const WL_KEY = "equity_analyzer_watchlist_v1";

    function loadWatchlist(){
      try{
        const raw = localStorage.getItem(WL_KEY);
        if (!raw) return [];
        const data = JSON.parse(raw);
        return Array.isArray(data) ? data : [];
      }catch{
        return [];
      }
    }
    function saveWatchlist(items){
      localStorage.setItem(WL_KEY, JSON.stringify(items));
    }

    function makeId(){
      return Math.random().toString(16).slice(2) + "_" + Date.now().toString(16);
    }

    function renderWatchlist(){
      const items = loadWatchlist();
      const body = $("#wlBody");
      body.innerHTML = "";

      if (!items.length){
        $("#wlMsg").textContent = "Watchlist je pr√°zdn√Ω.";
        return;
      }
      $("#wlMsg").textContent = `Polo≈æek: ${items.length}`;

      for (const item of items){
        const tr = document.createElement("tr");

        const tdStamp = document.createElement("td");
        tdStamp.textContent = item.stamp ?? "";
        tr.appendChild(tdStamp);

        const tdTicker = document.createElement("td");
        tdTicker.textContent = item.ticker ?? "";
        tr.appendChild(tdTicker);

        const tdPrice = document.createElement("td");
        tdPrice.textContent = fmtMoney(item.price);
        tr.appendChild(tdPrice);

        const tdBear = document.createElement("td");
        tdBear.textContent = fmtMoney(item.values?.bear);
        tr.appendChild(tdBear);

        const tdBase = document.createElement("td");
        tdBase.textContent = fmtMoney(item.values?.base);
        tr.appendChild(tdBase);

        const tdBull = document.createElement("td");
        tdBull.textContent = fmtMoney(item.values?.bull);
        tr.appendChild(tdBull);

        const tdUp = document.createElement("td");
        tdUp.textContent = fmtPct(item.values?.upsidePct);
        tr.appendChild(tdUp);

        const tdAct = document.createElement("td");
        tdAct.style.textAlign = "right";
        const wrap = document.createElement("div");
wrap.className = "rowActions";

const openBtn = document.createElement("button");
openBtn.className = "openBtn";
openBtn.type = "button";
openBtn.textContent = "Otev≈ô√≠t";
openBtn.addEventListener("click", () => {
  showScreen("analyzer");

  $("#a_ticker").value = item.ticker ?? "";
  $("#a_price").value  = (item.price ?? "").toString().replace(".", ",");
  $("#a_fcfps").value  = (item.fcf0 ?? "").toString().replace(".", ",");
  $("#a_years").value  = (item.years ?? "").toString();

  $("#a_g").value  = (item.base?.g  ?? "").toString().replace(".", ",");
  $("#a_r").value  = (item.base?.r  ?? "").toString().replace(".", ",");
  $("#a_tg").value = (item.base?.tg ?? "").toString().replace(".", ",");

  $("#calcMsg").textContent = "Naƒçteno z Watchlistu. Klikni ‚ÄûSpoƒç√≠tat‚Äú.";
  $("#resultBox").style.display = "none";
});

const delBtn = document.createElement("button");
delBtn.className = "trash";
delBtn.type = "button";
delBtn.textContent = "üóë";
delBtn.title = "Smazat polo≈æku";
delBtn.addEventListener("click", () => {
  const next = loadWatchlist().filter(x => x.id !== item.id);
  saveWatchlist(next);
  renderWatchlist();
});

wrap.appendChild(openBtn);
wrap.appendChild(delBtn);
tdAct.appendChild(wrap);
tr.appendChild(tdAct);

body.appendChild(tr);

wrap.appendChild(openBtn);
wrap.appendChild(delBtn);
tdAct.appendChild(wrap);
tr.appendChild(tdAct);

body.appendChild(tr);
}
}

/* =========================
   BUTTONS ‚Äî WATCHLIST
========================= */
$("#btnClearAll").addEventListener("click", () => {
const ok = confirm("Opravdu smazat cel√Ω watchlist?");
if (!ok) return;
saveWatchlist([]);
renderWatchlist();
});

$("#btnExport").addEventListener("click", () => {
const items = loadWatchlist();
if (!items.length){
  $("#wlMsg").textContent = "Nen√≠ co exportovat.";
  return;
}

const sep = ";";
const header = [
  "date","ticker","price","bear_value","base_value","bull_value","upside_pct",
  "fcf0","years","base_g","base_r","base_tg"
];

const toCsvCell = (v) => {
  const s = (v ?? "").toString();
  if (s.includes('"') || s.includes("\n") || s.includes(sep)){
    return `"${s.replaceAll('"','""')}"`;
  }
  return s;
};

const lines = [];
lines.push(header.join(sep));

for (const it of items){
  const row = [
    it.stamp ?? "",
    it.ticker ?? "",
    it.price ?? "",
    it.values?.bear ?? "",
    it.values?.base ?? "",
    it.values?.bull ?? "",
    it.values?.upsidePct ?? "",
    it.fcf0 ?? "",
    it.years ?? "",
    it.base?.g ?? "",
    it.base?.r ?? "",
    it.base?.tg ?? ""
  ];
  lines.push(row.map(toCsvCell).join(sep));
}

const bom = "\uFEFF"; // Excel-friendly UTF-8
const csv = bom + lines.join("\n");
const ts = new Date().toISOString().slice(0,10);

downloadTextFile(`watchlist_${ts}.csv`, csv, "text/csv;charset=utf-8");
$("#wlMsg").textContent = "CSV export sta≈æen.";
});

/* =========================
   COMPOUND CALC
========================= */
function compoundCompute(){
const start = parseNum($("#c_start").value);
const monthly = parseNum($("#c_monthly").value);
const rate = parseNum($("#c_rate").value);
const years = parseNum($("#c_years").value);
const target = parseNum($("#c_target").value);
const freq = parseNum($("#c_freq").value);

const msg = $("#cMsg");
msg.textContent = "";

const errs = [];
if (!Number.isFinite(start) || start < 0) errs.push("Poƒç√°teƒçn√≠ vklad mus√≠ b√Ωt >= 0.");
if (!Number.isFinite(monthly) || monthly < 0) errs.push("Mƒõs√≠ƒçn√≠ vklad mus√≠ b√Ωt >= 0.");
if (!Number.isFinite(rate)) errs.push("Dopl≈à roƒçn√≠ v√Ωnos %.");
if (!Number.isFinite(years) || years <= 0) errs.push("Dopl≈à poƒçet let (> 0).");
if (!Number.isFinite(freq) || ![12,4,1].includes(freq)) errs.push("Vyber frekvenci.");

if (errs.length){
  $("#cResult").style.display = "none";
  msg.textContent = errs.join(" ");
  return;
}

const months = Math.round(years * 12);
const rAnnual = rate / 100;
const rPeriod = Math.pow(1 + rAnnual, 1 / freq) - 1;

let value = start;
let contrib = start;

const step = Math.round(12 / freq);

for (let m = 1; m <= months; m++){
  value += monthly;
  contrib += monthly;
  if (m % step === 0){
    value *= (1 + rPeriod);
  }
}

$("#cFV").textContent = fmtMoney(value);
$("#cContrib").textContent = fmtMoney(contrib);
$("#cGain").textContent = fmtMoney(value - contrib);
$("#cFVnote").textContent = `V√Ωnos: ${rate}% p.a. | P≈ôipisov√°n√≠: ${freq === 12 ? "mƒõs√≠ƒçnƒõ" : freq === 4 ? "ƒçtvrtletnƒõ" : "roƒçnƒõ"}`;

let toTarget = "‚Äì";
if (Number.isFinite(target) && target > 0){
  let v = start;
  const maxMonths = 80 * 12;
  let hit = null;

  for (let m = 1; m <= maxMonths; m++){
    v += monthly;
    if (m % step === 0) v *= (1 + rPeriod);
    if (v >= target){
      hit = m;
      break;
    }
  }

  if (hit == null){
    toTarget = "nedosa≈æeno (80 let)";
  } else {
    const yrs = hit / 12;
    toTarget = yrs.toLocaleString("cs-CZ", { maximumFractionDigits: 1 }) + " let";
  }
}
$("#cToTarget").textContent = toTarget;

$("#cResult").style.display = "block";
msg.textContent = "Hotovo.";
}

$("#btnCompound").addEventListener("click", compoundCompute);
$("#btnCompoundReset").addEventListener("click", () => {
["#c_start","#c_monthly","#c_rate","#c_years","#c_target"].forEach(id => $(id).value = "");
$("#cResult").style.display = "none";
$("#cMsg").textContent = "";
});

/* =========================
   DEFAULTS + WATCHLIST RENDER ON OPEN
========================= */
$("#a_years").value = "10";
$("#a_g").value = "8";
$("#a_r").value = "9";
$("#a_tg").value = "2,5";
$("#a_bear_g").value = "-2";
$("#a_bear_r").value = "+1";
$("#a_bear_tg").value = "-0,5";
$("#a_bull_g").value = "+2";
$("#a_bull_r").value = "-1";
$("#a_bull_tg").value = "+0,5";

const origShow = showScreen;
showScreen = function(key){
origShow(key);
if (key === "watchlist") renderWatchlist();
};
</script>
</body>
</html>

    

    

  
        

    
    

  

  





