<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Equity Analyzer</title>

  <!-- Ikonka aplikace – soubor icon.png musí ležet vedle index.html -->
  <link rel="icon" type="image/png" href="icon.png" />
  <link rel="apple-touch-icon" href="icon.png" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg1: #1b0034;
      --bg2: #050012;
      --accent: #a66bff;
      --accent-strong: #e5c0ff;
      --accent-green: #00e676;
      --danger: #ff4b6b;
      --card-bg: rgba(15, 10, 40, 0.97);
      --card-border: rgba(255, 255, 255, 0.14);
      --text-main: #ffffff;
      --text-muted: #c9c4ff;
      --input-bg: rgba(7, 5, 25, 0.96);
      --input-border: rgba(255, 255, 255, 0.24);
      --shadow-main: 0 22px 50px rgba(0, 0, 0, 0.85);
      --radius-xl: 28px;
      --radius-lg: 20px;
      --radius-pill: 999px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      background: radial-gradient(circle at 0 0, #4c2cff, transparent 50%),
                  radial-gradient(circle at 100% 100%, #00e5ff, transparent 55%),
                  linear-gradient(160deg, var(--bg1), var(--bg2));
      min-height: 100%;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px 12px 32px;
    }

    .app {
      width: 100%;
      max-width: 900px;
      background: radial-gradient(circle at 0 0, rgba(255, 187, 0, 0.25), transparent 55%),
                  radial-gradient(circle at 100% 0, rgba(0, 229, 255, 0.2), transparent 55%),
                  linear-gradient(160deg, #2b0b5c, #050012);
      border-radius: 32px;
      box-shadow: var(--shadow-main);
      padding: 20px 16px 28px;
      position: relative;
      overflow: hidden;
    }

    @media (min-width: 768px) {
      .app {
        padding: 28px 32px 32px;
      }
    }

    /* ---------- HLAVIČKA ---------- */

    .hero {
      border-radius: 32px;
      padding: 22px 20px 24px;
      background: radial-gradient(circle at 0 0, rgba(255, 187, 0, 0.9), transparent 60%),
                  radial-gradient(circle at 100% 0, rgba(0, 229, 255, 0.7), transparent 60%),
                  linear-gradient(135deg, #3b0e7a, #160036);
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.7);
      margin-bottom: 22px;
      position: relative;
      overflow: hidden;
    }

    .hero-title {
      letter-spacing: 0.18em;
      font-weight: 800;
      text-transform: uppercase;
      font-size: 1.6rem;
      margin: 0 0 10px;
      text-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    }

    .hero-sub {
      margin: 0;
      max-width: 520px;
      font-size: 0.94rem;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.9);
    }

    /* ---------- OBECNÉ ---------- */

    .screen {
      display: none;
      animation: fadeIn 0.22s ease-out;
    }

    .screen.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .page-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .page-title {
      font-size: 1.3rem;
      margin: 0;
    }

    .page-sub {
      margin: 0 0 16px;
      color: var(--text-muted);
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .page-card {
      background: var(--card-bg);
      border-radius: 26px;
      border: 1px solid var(--card-border);
      padding: 18px 16px 16px;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.8);
    }

    /* ---------- ŠUPLÍKY (DOMOVSKÁ OBRAZOVKA) ---------- */

    .drawer-list {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .drawer {
      background: linear-gradient(135deg, rgba(166, 107, 255, 0.22), rgba(0, 0, 0, 0.9));
      border-radius: 26px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      padding: 18px 18px 16px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 14px 32px rgba(0, 0, 0, 0.7);
      cursor: pointer;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out,
                  border-color 0.12s ease-out, background 0.12s ease-out;
    }

    .drawer.main {
      border-radius: 28px;
      border-width: 1.6px;
      background: linear-gradient(135deg, rgba(255, 193, 37, 0.24), rgba(0, 0, 0, 0.96));
      transform: scale(1.01);
    }

    .drawer:hover {
      transform: translateY(-2px);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.9);
      border-color: rgba(255, 255, 255, 0.3);
      background: linear-gradient(135deg, rgba(166, 107, 255, 0.3), rgba(0, 0, 0, 0.98));
    }

    .drawer-text {
      flex: 1;
    }

    .drawer-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-strong);
      margin-bottom: 4px;
      opacity: 0.92;
    }

    .drawer-title {
      margin: 0 0 6px;
      font-size: 1.05rem;
      font-weight: 600;
    }

    .drawer-desc {
      margin: 0;
      font-size: 0.86rem;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .drawer-chevron {
      font-size: 1.4rem;
      opacity: 0.9;
    }

    /* ---------- FORMULÁŘE ---------- */

    .section-block {
      margin-bottom: 14px;
    }

    .form-grid-2 {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px 16px;
    }

    @media (min-width: 640px) {
      .form-grid-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .form-grid-3 {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px 16px;
    }

    @media (min-width: 768px) {
      .form-grid-3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 4px;
      color: var(--text-muted);
    }

    input, select, textarea {
      width: 100%;
      border-radius: 16px;
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      padding: 9px 11px;
      color: var(--text-main);
      font-size: 0.88rem;
      outline: none;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(166, 107, 255, 0.5);
    }

    textarea {
      min-height: 70px;
      resize: vertical;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .btn {
      border: none;
      outline: none;
      cursor: pointer;
      border-radius: var(--radius-pill);
      padding: 8px 14px;
      font-size: 0.8rem;
      font-weight: 500;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
                  background 0.12s ease-out;
    }

    .btn-primary {
      background: radial-gradient(circle at 0 0, #b2ff59, #00e676);
      color: #001b10;
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.85);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.04);
      color: #ffffff;
      border: 1px solid rgba(255, 255, 255, 0.24);
    }

    .btn-danger {
      background: rgba(255, 75, 107, 0.12);
      color: #ffe4e6;
      border: 1px solid rgba(255, 75, 107, 0.75);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.9);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .btn-back {
      background: rgba(0, 0, 0, 0.35);
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      padding: 6px 12px;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      color: #fff;
    }

    .btn-back span {
      font-size: 1.1rem;
      margin-top: -1px;
    }

    /* ---------- TABULKY ---------- */

    .table-wrap {
      margin-top: 14px;
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      overflow: auto;
      max-height: 350px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      min-width: 480px;
      background: rgba(0, 0, 0, 0.4);
    }

    th, td {
      padding: 8px 10px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    th {
      position: sticky;
      top: 0;
      backdrop-filter: blur(10px);
      background: rgba(15, 12, 40, 0.96);
      font-weight: 600;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    tbody tr:nth-child(even) {
      background: rgba(255, 255, 255, 0.02);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      border-radius: 999px;
      padding: 3px 8px;
      font-size: 0.7rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .pill-pos {
      background: rgba(0, 230, 118, 0.12);
      color: #69f0ae;
    }

    .pill-neg {
      background: rgba(255, 82, 82, 0.12);
      color: #ff8a80;
    }

    .helper-text {
      margin-top: 8px;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .text-right {
      text-align: right;
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- DOMOVSKÁ OBRAZOVKA -->
    <section id="screen-home" class="screen active">
      <header class="hero">
        <h1 class="hero-title">Equity Analyzer</h1>
        <p class="hero-sub">
          DCF, watchlist, earnings a složené úročení – všechno v jedné
          fialové aplikaci, která běží jen u tebe v prohlížeči.
          Data se ukládají lokálně, nic neopouští tvé zařízení.
        </p>
      </header>

      <div class="drawer-list">
        
  
  <!-- Rychlý přístup k analýze (HLAVNÍ ŠUPLÍK) -->
<article class="drawer main" data-open="screen-dcf">
  <div class="drawer-text">
    <div class="drawer-label">Analýza</div>
    <h2 class="drawer-title">Rychlý výpočet hodnoty</h2>
    <p class="drawer-desc">DCF výpočet férové ceny firmy.</p>
  </div>
  <div class="drawer-chevron"></div>
</article>

<!-- Sledované akcie -->
<article class="drawer" data-open="screen-watchlist">
    <div class="drawer-text">
        <div class="drawer-label">Watchlist</div>
        <h2 class="drawer-title">Sledované akcie</h2>
        <p class="drawer-desc">Seznam firem, ceny, zisky a popisy.</p>
    </div>
    <div class="drawer-chevron"></div>
</article>


<!-- ADD FIRM SCREEN (PŘIDAT NOVOU FIRMU) -->
<section id="screen-add-firm" class="screen">
  <div class="page-header">
    <button class="btn-back" data-back>
      <span>←</span> Zpět
    </button>
    <h2 class="page-title">Přidat novou firmu</h2>
  </div>

  <p class="page-sub">
    Zadej základní údaje firmy a porovnej aktuální a férovou cenu.
  </p>

  <div class="page-card">
    <div class="section-block">
      <div class="form-grid-2">
        <div>
          <label for="af-ticker">Ticker*</label>
          <input id="af-ticker" type="text" placeholder="PLTR, SOFI…" />
        </div>
        <div>
          <label for="af-name">Název firmy</label>
          <input id="af-name" type="text" placeholder="Palantir Technologies" />
        </div>
      </div>

      <div class="form-grid-2" style="margin-top:14px">
        <div>
          <label for="af-current">Aktuální cena</label>
          <input id="af-current" type="number" step="0.01" placeholder="např. 18.50" />
        </div>
        <div>
          <label for="af-fair">Férová cena</label>
          <input id="af-fair" type="number" step="0.01" placeholder="např. 24.00" />
        </div>
      </div>

      <div style="margin-top:14px">
        <label for="af-note">Stručný popis firmy</label>
        <textarea id="af-note" rows="3" placeholder="Co firma dělá, proč ji sleduješ…"></textarea>
      </div>
    </div>

    <div class="section-block" style="margin-top:16px">
      <h3 style="font-size:0.95rem;margin:0 0 8px 0;">Porovnání ceny</h3>
      <div class="form-grid-2">
        <div class="compare-box">
          <div class="compare-label">Aktuální cena</div>
          <div class="compare-value" id="af-current-display">–</div>
        </div>
        <div class="compare-box">
          <div class="compare-label">Férová cena</div>
          <div class="compare-value" id="af-fair-display">–</div>
        </div>
      </div>
      <p id="af-diff" class="helper-text" style="margin-top:8px;">
        Vyplň ceny, rozdíl se ukáže tady.
      </p>
    </div>
  </div>
</section>

<!-- ==================== PORTFOLIO HOME (VÝBĚR 4 DRUHŮ) ==================== -->
<section id="screen-portfolio-home" class="screen">
  <div class="page-header">
    <button class="btn-back" data-back><span>←</span> Zpět</button>
    <h2 class="page-title">Moje portfolia</h2>
  </div>

  <p class="page-sub">Vyber typ portfolia, který chceš spravovat.</p>

  <div class="drawer-stack">
    <article class="drawer" data-open="screen-portfolio-stocks">
      <div class="drawer-title">Akciové portfolio</div>
      <div class="drawer-desc">Přikupy, průměrná cena, sektorové rozložení.</div>
    </article>

    <article class="drawer" data-open="screen-portfolio-etf">
      <div class="drawer-title">ETF portfolio</div>
      <div class="drawer-desc">ETF fondy, váhy, výnosy a sektory.</div>
    </article>

    <article class="drawer" data-open="screen-portfolio-crypto">
      <div class="drawer-title">Krypto portfolio</div>
      <div class="drawer-desc">Bitcoin, altcoiny, přikupy a výkon.</div>
    </article>

    <article class="drawer" data-open="screen-portfolio-commodities">
      <div class="drawer-title">Komoditní portfolio</div>
      <div class="drawer-desc">Zlato, stříbro, ropa, plyn, kovy…</div>
    </article>
  </div>
</section>

<!-- ==================== AKCIE ==================== -->
<section id="screen-portfolio-stocks" class="screen">
  <div class="page-header">
    <button class="btn-back" data-back><span>←</span> Zpět</button>
    <h2 class="page-title">Akciové portfolio</h2>
  </div>

  <div class="page-card">
    <h3>Přidat akcii</h3>
    <div class="form-grid-3">
      <div><label>Ticker</label><input id="s-ticker" type="text" /></div>
      <div><label>Název</label><input id="s-name" type="text" /></div>
      <div><label>Kusy</label><input id="s-shares" type="number" /></div>
      <div><label>Cena</label><input id="s-price" type="number" step="0.01" /></div>
      <div><label>Měna</label>
        <select id="s-currency">
          <option value="USD">$</option><option value="EUR">€</option><option value="CZK">Kč</option>
        </select>
      </div>
      <div><label>Sektor</label>
        <select id="s-sector">
          <option>Technology</option><option>Finance</option><option>Energy</option>
          <option>Healthcare</option><option>Consumer</option><option>Industry</option>
          <option>Communication</option></select>
      </div>
      <button id="s-add" class="btn-primary">Přidat</button>
    </div>
  </div>

  <div class="page-card" style="margin-top:18px">
    <h3>Moje akcie</h3>
    <table class="table">
      <thead><tr>
        <th>Ticker</th><th>Název</th><th>Kusy</th><th>Průměr</th>
        <th>Aktuální</th><th>Zisk %</th><th>Měna</th><th>Sektor</th><th>Přikoupit</th>
      </tr></thead>
      <tbody id="stocks-table"></tbody>
    </table>
  </div>

  <div class="page-card" style="margin-top:18px">
    <h3>Rozložení sektorů</h3>
    <canvas id="stockSectorChart" height="180"></canvas>
  </div>
</section>

<!-- ==================== ETF ==================== -->
<section id="screen-portfolio-etf" class="screen">
  <div class="page-header">
    <button class="btn-back" data-back><span>←</span> Zpět</button>
    <h2 class="page-title">ETF portfolio</h2>
  </div>

  <div class="page-card">
    <h3>Přidat ETF</h3>
    <div class="form-grid-3">
      <div><label>Ticker</label><input id="e-ticker" type="text" /></div>
      <div><label>Název</label><input id="e-name" type="text" /></div>
      <div><label>Kusy</label><input id="e-shares" type="number" /></div>
      <div><label>Cena</label><input id="e-price" type="number" step="0.01" /></div>
      <div><label>Měna</label>
        <select id="e-currency"><option value="USD">$</option><option value="EUR">€</option><option value="CZK">Kč</option></select>
      </div>
      <div><label>Kategorie</label>
        <select id="e-category"><option>Equity</option><option>Bond</option><option>Commodity</option><option>Sektorový</option></select>
      </div>
      <button id="e-add" class="btn-primary">Přidat</button>
    </div>
  </div>

  <div class="page-card" style="margin-top:18px">
    <h3>Moje ETF</h3>
    <table class="table">
      <thead><tr>
        <th>Ticker</th><th>Název</th><th>Kusy</th><th>Průměr</th>
        <th>Aktuální</th><th>Zisk %</th><th>Měna</th><th>Kategorie</th><th>Přikoupit</th>
      </tr></thead>
      <tbody id="etf-table"></tbody>
    </table>
  </div>

  <div class="page-card" style="margin-top:18px">
    <h3>Rozložení kategorií</h3>
    <canvas id="etfChart" height="180"></canvas>
  </div>
</section>

<!-- ==================== CRYPTO ==================== -->
<section id="screen-portfolio-crypto" class="screen">
  <div class="page-header">
    <button class="btn-back" data-back><span>←</span> Zpět</button>
    <h2 class="page-title">Krypto portfolio</h2>
  </div>

  <div class="page-card">
    <h3>Přidat krypto</h3>
    <div class="form-grid-3">
      <div><label>Symbol</label><input id="c-symbol" type="text" /></div>
      <div><label>Název</label><input id="c-name" type="text" /></div>
      <div><label>Kusy</label><input id="c-shares" type="number" /></div>
      <div><label>Cena</label><input id="c-price" type="number" step="0.01" /></div>
      <div><label>Kategorie</label>
        <select id="c-category">
          <option>Layer 1</option><option>AI</option><option>Gaming</option>
          <option>DeFi</option><option>Meme</option>
        </select>
      </div>
      <button id="c-add" class="btn-primary">Přidat</button>
    </div>
  </div>

  <div class="page-card" style="margin-top:18px">
    <h3>Moje krypto</h3>
    <table class="table">
      <thead><tr>
        <th>Symbol</th><th>Název</th><th>Kusy</th>
        <th>Průměr</th><th>Aktuální</th><th>Zisk %</th><th>Kategorie</th><th>Přikoupit</th>
      </tr></thead>
      <tbody id="crypto-table"></tbody>
    </table>
  </div>

  <div class="page-card" style="margin-top:18px">
    <h3>Rozložení krypta</h3>
    <canvas id="cryptoChart" height="180"></canvas>
  </div>
</section>

<!-- ==================== COMMODITIES ==================== -->
<section id="screen-portfolio-commodities" class="screen">
  <div class="page-header">
    <button class="btn-back" data-back><span>←</span> Zpět</button>
    <h2 class="page-title">Komoditní portfolio</h2>
  </div>

  <div class="page-card">
    <h3>Přidat komoditu</h3>
    <div class="form-grid-3">
      <div><label>Název</label><input id="k-name" type="text" placeholder="Zlato, Ropa…" /></div>
      <div><label>Kusy / Unce</label><input id="k-shares" type="number" /></div>
      <div><label>Cena</label><input id="k-price" type="number" step="0.01" /></div>
      <div><label>Měna</label>
        <select id="k-currency"><option value="USD">$</option><option value="EUR">€</option><option value="CZK">Kč</option></select>
      </div>
      <button id="k-add" class="btn-primary">Přidat</button>
    </div>
  </div>

  <div class="page-card" style="margin-top:18px">
    <h3>Moje komodity</h3>
    <table class="table">
      <thead><tr>
        <th>Název</th><th>Kusy</th><th>Průměr</th>
        <th>Aktuální</th><th>Zisk %</th><th>Měna</th><th>Přikoupit</th>
      </tr></thead>
      <tbody id="commodities-table"></tbody>
    </table>
  </div>

  <div class="page-card" style="margin-top:18px">
    <h3>Rozložení komodit</h3>
    <canvas id="commoditiesChart" height="180"></canvas>
  </div>
</article>

<script>
// === Kalkulačka složeného úročení ===
function formatMoney(value) {
  return value.toLocaleString("cs-CZ", {
    maximumFractionDigits: 0
  }) + " Kč";
}

function calcCompoundInterest() {
  const start = parseFloat(document.getElementById("ci-start").value) || 0;
  const monthly = parseFloat(document.getElementById("ci-monthly").value) || 0;
  const years = parseFloat(document.getElementById("ci-years").value) || 0;
  const rate = parseFloat(document.getElementById("ci-rate").value) || 0;

  const months = years * 12;
  const r = rate / 100;

  let balance = start;
  for (let i = 0; i < months; i++) {
    balance *= 1 + r / 12;
    balance += monthly;
  }

  const invested = start + monthly * months;
  const profit = balance - invested;

  document.getElementById("ci-invested").textContent = formatMoney(invested);
  document.getElementById("ci-final").textContent = formatMoney(balance);
  document.getElementById("ci-profit").textContent = formatMoney(profit);
  document.getElementById("ci-rate-out").textContent = rate.toFixed(1) + " % p.a.";

  document.getElementById("ci-summary").textContent =
    "Za " +
    years +
    " let z vkladů " +
    formatMoney(invested) +
    " můžeš mít přibližně " +
    formatMoney(balance) +
    ".";
}

const ciBtn = document.getElementById("ci-calc");
if (ciBtn) {
  ciBtn.addEventListener("click", calcCompoundInterest);
}

// === Poznámky – ukládání do localStorage ===
const notesArea = document.getElementById("notes-text");
const notesStatus = document.getElementById("notes-status");
const notesKey = "ea-notes-text";

if (notesArea) {
  // načíst při startu
  const saved = localStorage.getItem(notesKey);
  if (saved) {
    notesArea.value = saved;
  }

  const saveBtn = document.getElementById("notes-save");
  if (saveBtn) {
    saveBtn.addEventListener("click", function () {
      localStorage.setItem(notesKey, notesArea.value || "");
      if (notesStatus) {
        notesStatus.textContent = "Poznámky uložené v prohlížeči.";
        setTimeout(() => (notesStatus.textContent = ""), 2000);
      }
    });
  }
}
</script>

<!-- Moje poznámky -->
<article class="drawer" data-open="screen-notes">
  <div class="drawer-text">
    <div class="drawer-label">Poznámky</div>
    <h2 class="drawer-title">Moje poznámky</h2>
    <p class="drawer-desc">Úložiště textových poznámek.</p>
  </div>
  <div class="drawer-chevron"></div>
</article>
</section>

<!-- ===================== WATCHLIST SCREEN (A4) ===================== -->
<section id="screen-watchlist" class="screen hidden">

    <div class="page-header">
        <button class="btn-back" data-back>←</button>
        <h2 class="page-title">Sledované akcie</h2>
    </div>

    <p class="page-sub">Seznam firem, které chceš sledovat</p>

    <div class="page-card">
        <h3>Přidat firmu</h3>
        <div class="form-row">
            <div>
                <label>Název firmy</label>
                <input id="wl-name" type="text" placeholder="Název">
            </div>
            <div>
                <label>Ticker</label>
                <input id="wl-ticker" type="text" placeholder="AAPL">
            </div>
            <button id="wl-add" class="btn-primary">Přidat</button>
        </div>
    </div>

    <div class="page-card" style="margin-top: 15px;">
        <h3>Sledované firmy</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Název</th>
                    <th>Ticker</th>
                    <th>Akce</th>
                </tr>
            </thead>
            <tbody id="watchlist-table"></tbody>
        </table>
    </div>

</section>

    <!-- EARNINGS SCREEN (A4 KALENDÁŘ) -->
    <section id="screen-earnings" class="screen">
      <div class="page-header">
        <button class="btn-back" data-back>
          <span>←</span> Zpět
        </button>
        <h2 class="page-title">Earnings kalendář – A4 přehled</h2>
      </div>

      <p class="page-sub">
        Přehled výsledků podle měsíců. Jednoduchá A4 tabulka, do které si můžeš
        ručně zapisovat, kdy které firmy reportují.
      </p>

      <div class="page-card">
        <div class="section-block">
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Měsíc</th>
                  <th>Firmy / tickery</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>Leden</td><td></td></tr>
                <tr><td>Únor</td><td></td></tr>
                <tr><td>Březen</td><td></td></tr>
                <tr><td>Duben</td><td></td></tr>
                <tr><td>Květen</td><td></td></tr>
                <tr><td>Červen</td><td></td></tr>
                <tr><td>Červenec</td><td></td></tr>
                <tr><td>Srpen</td><td></td></tr>
                <tr><td>Září</td><td></td></tr>
                <tr><td>Říjen</td><td></td></tr>
                <tr><td>Listopad</td><td></td></tr>
                <tr><td>Prosinec</td><td></td></tr>
              </tbody>
            </table>
          </div>

          <p class="helper-text" style="margin-top:10px;">
            Tip: můžeš si do každého řádku psát třeba
            „MSFT 23.1., GOOG 1.2., NVDA 15.2.“ – prostě rychlý přehled, co kdy
            reportuje.
          </p>
        </div>
      </div>
    </section>

    <!-- SLOŽENÉ ÚROČENÍ (KALKULAČKA) -->
    <section id="screen-ci" class="screen">
      <div class="page-header">
        <button class="btn-back" data-back>
          <span>←</span> Zpět
        </button>
        <h2 class="page-title">Kalkulačka složeného úročení</h2>
      </div>

      <p class="page-sub">
        Zadej počáteční částku, roční zhodnocení, počet let a případný
        pravidelný roční vklad. Dostaneš tabulku, jak se majetek vyvíjí v čase.
      </p>

      <div class="page-card">
        <div class="section-block">
          <div class="form-grid-3">
            <div>
              <label for="ci-start">Počáteční částka</label>
              <input
                id="ci-start"
                type="number"
                inputmode="decimal"
                placeholder="např. 100000"
              />
            </div>
            <div>
              <label for="ci-rate">Roční zhodnocení (%)</label>
              <input
                id="ci-rate"
                type="number"
                inputmode="decimal"
                step="0.1"
                placeholder="např. 8"
              />
            </div>
            <div>
              <label for="ci-years">Počet let</label>
              <input
                id="ci-years"
                type="number"
                inputmode="numeric"
                placeholder="např. 20"
              />
            </div>
            <div>
              <label for="ci-add">Roční vklad</label>
              <input
                id="ci-add"
                type="number"
                inputmode="decimal"
                placeholder="např. 50000"
              />
            </div>
          </div>

          <div class="btn-row">
            <button class="btn btn-primary" id="ci-run">Spočítat</button>
            <button class="btn btn-secondary" id="ci-clear">Vymazat</button>
          </div>

          <div class="table-wrap" style="margin-top:16px;">
            <table>
              <thead>
                <tr>
                  <th>Rok</th>
                  <th>Stav na začátku</th>
                  <th>Úrok za rok</th>
                  <th>Vklad</th>
                  <th>Stav na konci</th>
                </tr>
              </thead>
              <tbody id="ci-table"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
    <!-- DCF SCREEN -->
    <section id="screen-dcf" class="screen">
      <div class="page-header">
        <button class="btn-back" data-back>
          <span>←</span> Zpět
        </button>
        <h2 class="page-title">Výpočet vnitřní hodnoty akcie (DCF – 3 scénáře)</h2>
      </div>
      <p class="page-sub">
        Stěžejní nástroj – zadáš aktuální EPS, růst v %, cílové P/E a diskont.
        Výpočet je orientační a slouží jen pro vlastní analýzu, ne jako
        investiční doporučení.
      </p>

      <div class="page-card">
        <div class="section-block">
          <div class="form-grid-3">
            <div>
              <label for="dcf-name">Název / ticker akcie</label>
              <input id="dcf-name" type="text" placeholder="Např. SOFI, AAPL, MSFT" />
            </div>
            <div>
              <label for="dcf-eps">Současný zisk na akcii (EPS)</label>
              <input id="dcf-eps" type="number" step="0.01" placeholder="Např. 2.50" />
            </div>
            <div>
              <label for="dcf-years">Počet let projekce</label>
              <input id="dcf-years" type="number" step="1" value="10" />
            </div>
          </div>

          <div class="form-grid-3" style="margin-top:10px;">
            <div>
              <label for="dcf-discount">Diskontní sazba (%)</label>
              <input id="dcf-discount" type="number" step="0.1" value="9" />
            </div>
            <div>
              <label for="dcf-current">Aktuální cena akcie (pro porovnání)</label>
              <input id="dcf-current" type="number" step="0.01" placeholder="např. poslední close" />
            </div>
            <div>
              <label for="dcf-terminal">Terminální růst po období (%)</label>
              <input id="dcf-terminal" type="number" step="0.1" value="2" />
            </div>
          </div>
        </div>

        <div class="section-block">
          <h3 style="font-size:0.95rem;margin:0 0 6px;">Růst EPS v jednotlivých scénářích</h3>
          <div class="form-grid-3">
            <div>
              <label for="dcf-g1">Růst EPS konzervativní (%)</label>
              <input id="dcf-g1" type="number" step="0.1" value="5" />
            </div>
            <div>
              <label for="dcf-g2">Růst EPS základní (%)</label>
              <input id="dcf-g2" type="number" step="0.1" value="10" />
            </div>
            <div>
              <label for="dcf-g3">Růst EPS optimistický (%)</label>
              <input id="dcf-g3" type="number" step="0.1" value="15" />
            </div>
          </div>

          <h3 style="font-size:0.95rem;margin:10px 0 6px;">Cílové P/E</h3>
          <div class="form-grid-3">
            <div>
              <label for="dcf-pe1">P/E konzervativní</label>
              <input id="dcf-pe1" type="number" step="0.1" value="12" />
            </div>
            <div>
              <label for="dcf-pe2">P/E základní</label>
              <input id="dcf-pe2" type="number" step="0.1" value="18" />
            </div>
            <div>
              <label for="dcf-pe3">P/E optimistický</label>
              <input id="dcf-pe3" type="number" step="0.1" value="25" />
            </div>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" id="dcf-run">Spočítat DCF</button>
          <button class="btn btn-secondary" id="dcf-clear">Vyčistit formulář</button>
        </div>

        <div class="table-wrap" style="margin-top:14px;">
          <table>
            <thead>
              <tr>
                <th>Scénář</th>
                <th>CAGR EPS</th>
                <th>Cílové P/E</th>
                <th>Férová cena</th>
                <th>Bezpečnostní polštář</th>
              </tr>
            </thead>
            <tbody id="dcf-table"></tbody>
          </table>
        </div>

        <p class="helper-text">
          Výpočet je hodně zjednodušený model – vychází z EPS a P/E
          a slouží jen jako orientační pomůcka.
        </p>
      </div>
    </section>

    <!-- WATCHLIST SCREEN -->
    <section id="screen-watchlist" class="screen">
      <div class="page-header">
        <button class="btn-back" data-back>
          <span>←</span> Zpět
        </button>
        <h2 class="page-title">Watchlist vyhodnocených akcií</h2>
      </div>
      <p class="page-sub">
        Seznam akcií, které máš v hledáčku – ticker, nákupní cena, aktuální
        cena, zisk % a poznámka. Data se ukládají do localStorage v prohlížeči.
      </p>

      <div class="page-card">
        <div class="section-block">
          <div class="form-grid-3">
            <div>
              <label for="wl-ticker">Ticker*</label>
              <input id="wl-ticker" type="text" placeholder="PLTR, SOFI…" />
            </div>
            <div>
              <label for="wl-name">Název firmy</label>
              <input id="wl-name" type="text" placeholder="Palantir Technologies" />
            </div>
            <div>
              <label for="wl-tag">Tag / kategorie</label>
              <input id="wl-tag" type="text" placeholder="tech, AI, energie…" />
            </div>
          </div>

          <div class="form-grid-3" style="margin-top:10px;">
            <div>
              <label for="wl-buy">Nákupní cena</label>
              <input id="wl-buy" type="number" step="0.01" placeholder="např. 15.50" />
            </div>
            <div>
              <label for="wl-shares">Kusy</label>
              <input id="wl-shares" type="number" step="1" placeholder="např. 50" />
            </div>
            <div>
              <label for="wl-price">Aktuální cena</label>
              <input id="wl-price" type="number" step="0.01" placeholder="poslední close" />
            </div>
          </div>

          <div style="margin-top:10px;">
            <label for="wl-note">Poznámka / teze</label>
            <textarea id="wl-note" placeholder="Proč držím, cílová cena, rizika…"></textarea>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn btn-primary" id="wl-add">Přidat / uložit pozici</button>
          <button class="btn btn-secondary" id="wl-clear-form">Vyčistit formulář</button>
          <button class="btn btn-secondary" id="wl-reset-prices">Vynulovat aktuální ceny</button>
          <button class="btn btn-danger" id="wl-clear-all">Smazat všechny pozice</button>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Ticker</th>
                <th>Název</th>
                <th>Kusy</th>
                <th>Nákup</th>
                <th>Aktuální</th>
                <th>Zisk</th>
                <th>Zisk %</th>
                <th>Hodnota</th>
                <th>Poznámka</th>
              </tr>
            </thead>
            <tbody id="wl-table"></tbody>
          </table>
        </div>

        <p class="helper-text">
          Zisk se počítá z rozdílu nákup vs. aktuální cena × počet kusů.
          Všechna data zůstávají pouze v tomto prohlížeči.
        </p>
      </div>
    </section>

    <!-- EARNINGS SCREEN -->
    <section id="screen-earnings" class="screen">
      <div class="page-header">
        <button class="btn-back" data-back>
          <span>←</span> Zpět
        </button>
        <h2 class="page-title">Earnings kalendář</h2>
      </div>
      <p class="page-sub">
        Vlastní přehled earnings, konferenčních hovorů a dalších událostí,
        seřazený podle data. Vhodné jako náhrada A4 seznamu.
      </p>

      <div class="page-card">
        <div class="section-block">
          <div class="form-grid-3">
            <div>
              <label for="er-ticker">Ticker*</label>
              <input id="er-ticker" type="text" placeholder="MSFT, UNH…" />
       </div>
          <div>
            <label for="er-date">Datum*</label>
            <input id="er-date" type="date" />
          </div>
          <div>
            <label for="er-type">Typ události</label>
            <select id="er-type">
              <option value="Earnings">Earnings</option>
              <option value="Conference Call">Conference call</option>
              <option value="Investor Day">Investor day</option>
              <option value="Jiné">Jiné</option>
            </select>
          </div>
        </div>

        <div style="margin-top:10px;">
          <label for="er-note">Poznámka</label>
          <input id="er-note" type="text" placeholder="Q4 2025, guidance, sledovat marže…" />
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" id="er-add">Přidat událost</button>
        <button class="btn btn-secondary" id="er-clear-form">Vyčistit formulář</button>
        <button class="btn btn-danger" id="er-clear-all">Smazat všechny události</button>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Datum</th>
              <th>Ticker</th>
              <th>Typ</th>
              <th>Poznámka</th>
            </tr>
          </thead>
          <tbody id="er-table"></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- SLOŽENÉ ÚROČENÍ SCREEN -->
  <section id="screen-ci" class="screen">
    <div class="page-header">
      <button class="btn-back" data-back>
        <span>←</span> Zpět
      </button>
      <h2 class="page-title">Kalkulačka složeného úročení</h2>
    </div>
    <p class="page-sub">
      Zadáš počáteční částku, roční vklad, roční úrok a počet let – tabulka
      ukáže vývoj stavu v čase (orientačně, bez daní a poplatků).
    </p>

    <div class="page-card">
      <div class="section-block">
        <div class="form-grid-2">
          <div>
            <label for="ci-start">Počáteční částka</label>
            <input id="ci-start" type="number" step="0.01" value="100000" />
          </div>
          <div>
            <label for="ci-add">Roční vklad</label>
            <input id="ci-add" type="number" step="0.01" value="60000" />
          </div>
        </div>

        <div class="form-grid-2" style="margin-top:10px;">
          <div>
            <label for="ci-rate">Roční úrok (%)</label>
            <input id="ci-rate" type="number" step="0.1" value="8" />
          </div>
          <div>
            <label for="ci-years">Počet let</label>
            <input id="ci-years" type="number" step="1" value="15" />
          </div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn btn-primary" id="ci-run">Spočítat</button>
        <button class="btn btn-secondary" id="ci-clear">Vyčistit</button>
      </div>

      <div class="table-wrap" style="margin-top:14px;">
        <table>
          <thead>
            <tr>
              <th>Rok</th>
              <th>Stav na začátku</th>
              <th>Úrok za rok</th>
              <th>Vklad</th>
              <th>Stav na konci</th>
            </tr>
          </thead>
          <tbody id="ci-table"></tbody>
        </table>
      </div>
    </div>
  </section>
</div>

<script>
  // ---------- NAVIGACE ----------
  (function () {
    const screens = document.querySelectorAll('.screen');

    function showScreen(id) {
      screens.forEach(s => s.classList.toggle('active', s.id === id));
      window.scrollTo({ top: 0, behavior: 'instant' });
    }

    // celé šuplíky jsou klikací
    document.querySelectorAll('.drawer[data-open]').forEach(drawer => {
      drawer.addEventListener('click', () => {
        const id = drawer.getAttribute('data-open');
        if (id) showScreen(id);
      });
    });

    // tlačítka zpět
    document.querySelectorAll('[data-back]').forEach(btn => {
      btn.addEventListener('click', () => showScreen('screen-home'));
    });
  })();

  // pomocná funkce
  function toNum(v) {
    const n = parseFloat(v);
    return isNaN(n) ? 0 : n;
  }

  // ---------- DCF ----------
  (function () {
    const runBtn = document.getElementById('dcf-run');
    const clearBtn = document.getElementById('dcf-clear');
    const tbody = document.getElementById('dcf-table');

    function calculateScenario(label, eps, years, growth, pe, discount, terminalGrowth, currentPrice) {
      const g = growth / 100;
      const r = discount / 100;
      const tg = terminalGrowth / 100;

      const epsT = eps * Math.pow(1 + g, years);
      const priceT = epsT * pe;

      const terminalValue = priceT * (1 + tg) / (r - tg);
      const fv = priceT + terminalValue;
      const pv = fv / Math.pow(1 + r, years);

      const margin = currentPrice > 0 ? (pv - currentPrice) / currentPrice * 100 : null;

      return {
        label,
        growth: growth.toFixed(1) + ' %',
        pe: pe.toFixed(1),
        fair: pv,
        margin
      };
    }

    function render(rows) {
      tbody.innerHTML = '';
      rows.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${row.label}</td>
          <td>${row.growth}</td>
          <td>${row.pe}</td>
          <td>${row.fair.toFixed(2)}</td>
          <td>
            ${
              row.margin === null
                ? '-'
                : `<span class="pill ${row.margin >= 0 ? 'pill-pos' : 'pill-neg'}">
                     ${row.margin.toFixed(1)} %
                   </span>`
            }
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    runBtn.addEventListener('click', () => {
      const eps = toNum(document.getElementById('dcf-eps').value);
      const years = Math.max(1, parseInt(document.getElementById('dcf-years').value || '0', 10));
      const discount = toNum(document.getElementById('dcf-discount').value);
      const current = toNum(document.getElementById('dcf-current').value);
      const term = toNum(document.getElementById('dcf-terminal').value);

      if (!eps || !years || !discount) {
        alert('Vyplň prosím alespoň EPS, počet let a diskontní sazbu.');
        return;
      }

      const g1 = toNum(document.getElementById('dcf-g1').value);
      const g2 = toNum(document.getElementById('dcf-g2').value);
      const g3 = toNum(document.getElementById('dcf-g3').value);
      const pe1 = toNum(document.getElementById('dcf-pe1').value);
      const pe2 = toNum(document.getElementById('dcf-pe2').value);
      const pe3 = toNum(document.getElementById('dcf-pe3').value);

      const rows = [
        calculateScenario('Konzervativní', eps, years, g1, pe1, discount, term, current),
        calculateScenario('Základní',      eps, years, g2, pe2, discount, term, current),
        calculateScenario('Optimistický',  eps, years, g3, pe3, discount, term, current)
      ];
      render(rows);
    });

    clearBtn.addEventListener('click', () => {
      document.getElementById('dcf-name').value = '';
      document.getElementById('dcf-eps').value = '';
      document.getElementById('dcf-years').value = '10';
      document.getElementById('dcf-discount').value = '9';
      document.getElementById('dcf-current').value = '';
      document.getElementById('dcf-terminal').value = '2';
      document.getElementById('dcf-g1').value = '5';
      document.getElementById('dcf-g2').value = '10';
      document.getElementById('dcf-g3').value = '15';
      document.getElementById('dcf-pe1').value = '12';
      document.getElementById('dcf-pe2').value = '18';
      document.getElementById('dcf-pe3').value = '25';
      tbody.innerHTML = '';
    });
  })();

  // ---------- WATCHLIST ----------
  (function () {
    let data = [];
    const STORAGE_KEY = 'ea_watchlist_v1';

    const fields = {
      ticker: document.getElementById('wl-ticker'),
      name: document.getElementById('wl-name'),
      tag: document.getElementById('wl-tag'),
      buy: document.getElementById('wl-buy'),
      shares: document.getElementById('wl-shares'),
      price: document.getElementById('wl-price'),
      note: document.getElementById('wl-note'),
    };

    const tbody = document.getElementById('wl-table');

    function load() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        data = raw ? JSON.parse(raw) : [];
      } catch (e) {
        data = [];
      }
      render();
    }

    function save() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function render() {
      tbody.innerHTML = '';
      data.forEach(row => {
        const buy = toNum(row.buy);
        const price = toNum(row.price);
        const shares = toNum(row.shares);
        const profit = price && buy && shares ? (price - buy) * shares : 0;
        const profitPct = price && buy ? (price / buy - 1) * 100 : null;
        const value = price && shares ? price * shares : 0;

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${row.ticker}</td>
          <td>${row.name || ''}</td>
          <td class="text-right">${shares ? shares.toFixed(0) : ''}</td>
          <td class="text-right">${buy ? buy.toFixed(2) : ''}</td>
          <td class="text-right">${price ? price.toFixed(2) : ''}</td>
          <td class="text-right">${profit ? profit.toFixed(2) : ''}</td>
          <td class="text-right">
            ${
              profitPct === null
                ? ''
                : `<span class="pill ${profitPct >= 0 ? 'pill-pos' : 'pill-neg'}">
                     ${profitPct.toFixed(1)} %
                   </span>`
            }
          </td>
          <td class="text-right">${value ? value.toFixed(2) : ''}</td>
          <td>${row.note || ''}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function clearForm() {
      Object.values(fields).forEach(el => (el.value = ''));
    }

    document.getElementById('wl-add').addEventListener('click', () => {
      const ticker = fields.ticker.value.trim().toUpperCase();
      if (!ticker) {
        alert('Ticker je povinný.');
        return;
      }

      const entry = {
        ticker,
        name: fields.name.value.trim(),
        tag: fields.tag.value.trim(),
        buy: fields.buy.value,
        shares: fields.shares.value,
        price: fields.price.value,
        note: fields.note.value.trim(),
      };

      const idx = data.findIndex(r => r.ticker === ticker);
      if (idx >= 0) {
        data[idx] = entry;
      } else {
        data.push(entry);
      }
      save();
      render();
    });

    document.getElementById('wl-clear-form').addEventListener('click', clearForm);

    document.getElementById('wl-reset-prices').addEventListener('click', () => {
      data = data.map(r => ({ ...r, price: '' }));
      save();
      render();
    });

    document.getElementById('wl-clear-all').addEventListener('click', () => {
      if (!confirm('Opravdu smazat všechny pozice z watchlistu?')) return;
      data = [];
      save();
      render();
    });

    load();
  })();

  // ---------- EARNINGS ----------
  (function () {
    let earnings = [];
    const STORAGE_KEY = 'ea_earnings_v1';
    const tbody = document.getElementById('er-table');

    function load() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        earnings = raw ? JSON.parse(raw) : [];
      } catch (e) {
        earnings = [];
      }
      render();
    }

    function save() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(earnings));
    }

    function render() {
      tbody.innerHTML = '';
      const sorted = [...earnings].sort((a, b) => (a.date || '').localeCompare(b.date || ''));
      sorted.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${row.date || ''}</td>
          <td>${row.ticker || ''}</td>
          <td>${row.type || ''}</td>
          <td>${row.note || ''}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    document.getElementById('er-add').addEventListener('click', () => {
      const ticker = document.getElementById('er-ticker').value.trim().toUpperCase();
      const date = document.getElementById('er-date').value;
      const type = document.getElementById('er-type').value;
      const note = document.getElementById('er-note').value.trim();

      if (!ticker || !date) {
        alert('Ticker a datum jsou povinné.');
        return;
      }

      earnings.push({ ticker, date, type, note });
      save();
      render();
    });

    document.getElementById('er-clear-form').addEventListener('click', () => {
      document.getElementById('er-ticker').value = '';
      document.getElementById('er-date').value = '';
      document.getElementById('er-type').value = 'Earnings';
      document.getElementById('er-note').value = '';
    });

    document.getElementById('er-clear-all').addEventListener('click', () => {
      if (!confirm('Opravdu smazat celý earnings kalendář?')) return;
      earnings = [];
      save();
      render();
    });

    load();
  })();

  // ---------- SLOŽENÉ ÚROČENÍ ----------
  (function () {
    const tbody = document.getElementById('ci-table');

    function render(rows) {
      tbody.innerHTML = '';
      rows.forEach(r => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${r.year}</td>
          <td class="text-right">${r.begin.toFixed(2)}</td>
          <td class="text-right">${r.interest.toFixed(2)}</td>
          <td class="text-right">${r.add.toFixed(2)}</td>
          <td class="text-right">${r.end.toFixed(2)}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    document.getElementById('ci-run').addEventListener('click', () => {
      const start = toNum(document.getElementById('ci-start').value);
      const rate = toNum(document.getElementById('ci-rate').value) / 100;
      const years = parseInt(document.getElementById('ci-years').value || '0', 10);
      const add = toNum(document.getElementById('ci-add').value);

      tbody.innerHTML = '';
      if (years <= 0) return;

      let value = start;
      const rows = [];
      for (let i = 1; i <= years; i++) {
        const begin = value;
        const interest = begin * rate;
        value = begin + interest + add;
        rows.push({ year: i, begin, interest, add, end: value });
      }
      render(rows);
    });

    document.getElementById('ci-clear').addEventListener('click', () => {
      document.getElementById('ci-start').value = '';
      document.getElementById('ci-add').value = '';
      document.getElementById('ci-rate').value = '';
      document.getElementById('ci-years').value = '';
      tbody.innerHTML = '';
    });
  })();
</script>
</body>
  </html>
