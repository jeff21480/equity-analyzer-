<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eqity Analyz√©r ‚Äì ≈°upl√≠ky</title>
  <style>
    :root {
      --bg: #050509;
      --bg-alt: #0d0d17;
      --card: #141426;
      --border: #26263c;
      --text: #f7f7ff;
      --muted: #a0a0c2;
      --accent1: #a855f7;
      --accent2: #6366f1;
      --radius-lg: 18px;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.5);
      --tr: 0.18s ease-out;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #181827 0, #050509 42%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 18px 12px 32px;
    }

    .app {
      width: 100%;
      max-width: 1180px;
      background:
        linear-gradient(145deg, rgba(148,27,255,0.32), transparent 40%),
        radial-gradient(circle at bottom, rgba(37,99,235,0.22), transparent 55%),
        var(--bg-alt);
      border-radius: 24px;
      border: 1px solid rgba(148,163,255,0.25);
      box-shadow: var(--shadow-soft);
      padding: 18px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    /* Header */
    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 32px;
      height: 32px;
      border-radius: 12px;
      background: conic-gradient(from 210deg,#a855f7,#6366f1,#22c55e,#a855f7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 17px;
    }

    .brand-text h1 {
      font-size: 18px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .brand-text span {
      font-size: 11px;
      color: var(--muted);
    }

    .header-right {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
      font-size: 11px;
      color: var(--muted);
    }

    .pill {
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid rgba(148,163,255,0.4);
      background:
        radial-gradient(circle at top left, rgba(148,163,255,0.28), transparent 55%),
        rgba(15,23,42,0.86);
      display: flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    /* Layout */
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 340px) minmax(0, 1fr);
      gap: 12px;
      margin-top: 4px;
    }

    @media (max-width: 860px) {
      .layout { grid-template-columns: minmax(0, 1fr); }
    }

    /* Left panel ‚Äì ≈°upl√≠ky */
    .left-panel {
      background: rgba(10,10,25,0.92);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148,163,255,0.3);
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      backdrop-filter: blur(14px);
    }

    .section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin-bottom: 4px;
      padding: 0 2px;
    }

    .drawer {
      border-radius: 14px;
      background: linear-gradient(135deg,rgba(79,70,229,0.35),rgba(76,29,149,0.16));
      padding: 1px;
    }

    .drawer-inner {
      background: radial-gradient(circle at top left,#15152a,#09091a);
      border-radius: inherit;
      overflow: hidden;
    }

    .drawer-header {
      width: 100%;
      border: none;
      background: transparent;
      color: inherit;
      padding: 10px 11px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }

    .drawer-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      font-weight: 500;
    }

    .drawer-icon {
      width: 22px;
      height: 22px;
      border-radius: 9px;
      background: rgba(79,70,229,0.35);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
    }

    .drawer-sub {
      font-size: 10px;
      color: var(--muted);
    }

    .drawer-chevron {
      font-size: 13px;
      opacity: 0.75;
      transition: transform var(--tr);
    }

    .drawer.open .drawer-chevron { transform: rotate(90deg); }

    .drawer-body {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.2s ease-out;
      border-top: 1px solid rgba(31,41,55,0.85);
    }

    .drawer.open .drawer-body { max-height: 420px; }

    .drawer-content {
      padding: 8px 9px 9px;
      display: grid;
      grid-template-columns: repeat(2,minmax(0,1fr));
      gap: 7px;
    }

    @media (max-width: 480px) {
      .drawer-content { grid-template-columns: minmax(0,1fr); }
    }

    /* Kostky (tiles) */
    .tile {
      border-radius: 13px;
      background: radial-gradient(circle at top left,#1f2937,#020617);
      border: 1px solid rgba(148,163,255,0.35);
      padding: 8px 9px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      cursor: pointer;
      transition: transform var(--tr), box-shadow var(--tr), border-color var(--tr);
    }

    .tile:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 30px rgba(15,23,42,0.75);
      border-color: rgba(196,181,253,0.9);
    }

    .tile-header {
      display: flex;
      align-items: center;
      gap: 7px;
    }

    .tile-icon {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: radial-gradient(circle at top left,#4f46e5,#7c3aed);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
    }

    .tile-title { font-size: 12px; font-weight: 500; }

    .tile-desc {
      font-size: 10px;
      color: var(--muted);
      line-height: 1.25;
    }

    .tile-tag {
      margin-top: 3px;
      align-self: flex-start;
      font-size: 9px;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(22,163,74,0.12);
      color: #4ade80;
      border: 1px solid rgba(34,197,94,0.35);
    }

    .tile-tag.soon {
      background: rgba(234,179,8,0.12);
      color: #facc15;
      border-color: rgba(234,179,8,0.35);
    }

    .tile.disabled {
      opacity: 0.55;
      cursor: default;
    }
    .tile.disabled:hover { transform:none; box-shadow:none; }

    /* Prav√Ω panel ‚Äì zat√≠m placeholder */
    .right-panel {
      background: rgba(7,9,24,0.96);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148,163,255,0.35);
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 260px;
      backdrop-filter: blur(14px);
    }

    .panel-title-main {
      font-size: 15px;
      font-weight: 600;
    }

    .panel-sub {
      font-size: 11px;
      color: var(--muted);
      margin-top: 2px;
    }

    .panel-box {
      margin-top: 10px;
      border-radius: 14px;
      border: 1px solid rgba(30,64,175,0.8);
      background: radial-gradient(circle at top left,#020617,#020617);
      padding: 11px;
      font-size: 12px;
      color: var(--muted);
    }

    .panel-selected {
      font-size: 13px;
      margin-bottom: 4px;
      color: var(--text);
    }

    .panel-selected strong { color: var(--accent1); }
  </style>
</head>
<body>
  <main class="app">
    <!-- HEADER -->
    <header class="app-header">
      <div class="brand">
        <div class="brand-logo">üìä</div>
        <div class="brand-text">
          <h1>Eqity Analyz√©r</h1>
          <span>verze se ≈°upl√≠ky ‚Äì zat√≠m jen vzhled</span>
        </div>
      </div>
      <div class="header-right">
        <div class="pill">‚ö° Offline HTML</div>
        <div class="pill">üß≠ 5 hlavn√≠ch modul≈Ø</div>
      </div>
    </header>

    <section class="layout">
      <!-- LEV√ù PANEL ‚Äì ≈†UPL√çKY -->
      <aside class="left-panel">
        <div class="section-title">≈†upl√≠ky (moduly)</div>

        <!-- ≈†UPL√çK 1 ‚Äì Vnit≈ôn√≠ hodnota -->
        <div class="drawer open" data-drawer="1">
          <div class="drawer-inner">
            <button class="drawer-header" type="button">
              <div class="drawer-label">
                <div class="drawer-icon">üìê</div>
                <div>
                  <div>≈†upl√≠k 1 ‚Äì Vnit≈ôn√≠ hodnota akcie</div>
                  <div class="drawer-sub">V√Ωpoƒçet f√©rov√© ceny akcie</div>
                </div>
              </div>
              <div class="drawer-chevron">‚ñ∂</div>
            </button>
            <div class="drawer-body">
              <div class="drawer-content">
                <div class="tile"
                     data-title="Rychl√Ω v√Ωpoƒçet vnit≈ôn√≠ hodnoty"
                     data-module="intrinsic-quick">
                  <div class="tile-header">
                    <div class="tile-icon">‚ö°</div>
                    <div class="tile-title">Rychl√Ω model</div>
                  </div>
                  <div class="tile-desc">
                    Jednoduch√Ω odhad vnit≈ôn√≠ hodnoty akcie ‚Äì prvn√≠ funkce, kterou dopln√≠me.
                  </div>
                  <div class="tile-tag">Hlavn√≠ funkce</div>
                </div>

                <div class="tile disabled"
                     data-title="Pokroƒçil√Ω DCF model"
                     data-module="intrinsic-dcf">
                  <div class="tile-header">
                    <div class="tile-icon">üìà</div>
                    <div class="tile-title">Pokroƒçil√Ω DCF model</div>
                  </div>
                  <div class="tile-desc">
                    Detailn√≠ diskontovan√Ω cash-flow model. Rezervov√°no do dal≈°√≠ f√°ze.
                  </div>
                  <div class="tile-tag soon">Brzy</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ≈†UPL√çK 2 ‚Äì Watchlist -->
        <div class="drawer" data-drawer="2">
          <div class="drawer-inner">
            <button class="drawer-header" type="button">
              <div class="drawer-label">
                <div class="drawer-icon">üëÅÔ∏è</div>
                <div>
                  <div>≈†upl√≠k 2 ‚Äì Watchlist</div>
                  <div class="drawer-sub">Seznam analyzovan√Ωch akci√≠</div>
                </div>
              </div>
              <div class="drawer-chevron">‚ñ∂</div>
            </button>
            <div class="drawer-body">
              <div class="drawer-content">
                <div class="tile"
                     data-title="Watchlist analyzovan√Ωch akci√≠"
                     data-module="watchlist">
                  <div class="tile-header">
                    <div class="tile-icon">üìã</div>
                    <div class="tile-title">M≈Øj Watchlist</div>
                  </div>
                  <div class="tile-desc">
                    Sem se budou ukl√°dat akcie, kter√© projdou v√Ωpoƒçtem vnit≈ôn√≠ hodnoty.
                  </div>
                  <div class="tile-tag soon">Brzy</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ≈†UPL√çK 3 ‚Äì Earnings -->
        <div class="drawer" data-drawer="3">
          <div class="drawer-inner">
            <button class="drawer-header" type="button">
              <div class="drawer-label">
                <div class="drawer-icon">üìÜ</div>
                <div>
                  <div>≈†upl√≠k 3 ‚Äì Earnings</div>
                  <div class="drawer-sub">Kalend√°≈ô ƒçtvrtletn√≠ch v√Ωsledk≈Ø</div>
                </div>
              </div>
              <div class="drawer-chevron">‚ñ∂</div>
            </button>
            <div class="drawer-body">
              <div class="drawer-content">
                <div class="tile"
                     data-title="Earnings kalend√°≈ô"
                     data-module="earnings">
                  <div class="tile-header">
                    <div class="tile-icon">üóìÔ∏è</div>
                    <div class="tile-title">Earnings kalend√°≈ô</div>
                  </div>
                  <div class="tile-desc">
                    P≈ôehled firem, kter√© budou tento t√Ωden vykazovat v√Ωsledky. Napoj√≠me na data.
                  </div>
                  <div class="tile-tag soon">Brzy</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ≈†UPL√çK 4 ‚Äì Slo≈æen√© √∫roƒçen√≠ -->
        <div class="drawer" data-drawer="4">
          <div class="drawer-inner">
            <button class="drawer-header" type="button">
              <div class="drawer-label">
                <div class="drawer-icon">üìà</div>
                <div>
                  <div>≈†upl√≠k 4 ‚Äì Slo≈æen√© √∫roƒçen√≠</div>
                  <div class="drawer-sub">Kalkulaƒçka dlouhodob√©ho r≈Østu</div>
                </div>
              </div>
              <div class="drawer-chevron">‚ñ∂</div>
            </button>
            <div class="drawer-body">
              <div class="drawer-content">
                <div class="tile"
                     data-title="Kalkulaƒçka slo≈æen√©ho √∫roƒçen√≠"
                     data-module="compound">
                  <div class="tile-header">
                    <div class="tile-icon">üßÆ</div>
                    <div class="tile-title">Kalkulaƒçka slo≈æen√©ho √∫roƒçen√≠</div>
                  </div>
                  <div class="tile-desc">
                    Vypoƒç√≠t√°, jak poroste investice v ƒçase (vklad, v√Ωnos, doba, mƒõs√≠ƒçn√≠ vklady‚Ä¶).
                  </div>
                  <div class="tile-tag soon">Brzy</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ≈†UPL√çK 5 ‚Äì Moje portfolio -->
        <div class="drawer" data-drawer="5">
          <div class="drawer-inner">
            <button class="drawer-header" type="button">
              <div class="drawer-label">
                <div class="drawer-icon">üìÅ</div>
                <div>
                  <div>≈†upl√≠k 5 ‚Äì Moje portfolio</div>
                  <div class="drawer-sub">P≈ôehled m√Ωch pozic</div>
                </div>
              </div>
              <div class="drawer-chevron">‚ñ∂</div>
            </button>
            <div class="drawer-body">
              <div class="drawer-content">
                <div class="tile"
                     data-title="Moje portfolio"
                     data-module="portfolio">
                  <div class="tile-header">
                    <div class="tile-icon">üìÇ</div>
                    <div class="tile-title">P≈ôehled portfolia</div>
                  </div>
                  <div class="tile-desc">
                    Naƒçten√≠ portfolia z CSV / brokera a zobrazen√≠ zisk≈Ø a ztr√°t.
                  </div>
                  <div class="tile-tag soon">Brzy</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- PRAV√ù PANEL ‚Äì ZAT√çM JEN TEXT -->
      <section class="right-panel">
        <div class="panel-title-main">Hlavn√≠ panel</div>
        <div class="panel-sub">
          Tady se v≈ædy zobraz√≠ obsah vybran√© ‚Äûkostky‚Äú (modulu).  
          Zat√≠m je to jen text ‚Äì logiku a p≈ôipojen√≠ na data dopln√≠me postupnƒõ.
        </div>

        <div id="main-panel-box" class="panel-box">
          <div class="panel-selected">
            Vyber vlevo nƒõkter√Ω modul ‚Äì t≈ôeba <strong>Rychl√Ω model</strong> ve ≈°upl√≠ku ‚ÄûVnit≈ôn√≠ hodnota akcie‚Äú.
          </div>
          <div>
            A≈æ budeme p≈ôid√°vat funkce, v≈ædy jen p≈ôep√≠≈°eme obsah tohoto panelu podle <code>data-module</code>,
            tak≈æe layout ≈°upl√≠k≈Ø a struktura str√°nky z≈Østane stejn√°.
          </div>
        </div>
      </section>
    </section>
  </main>

  <script>
    // ≈†UPL√çKY (otev√≠r√°n√≠ / zav√≠r√°n√≠)
    document.querySelectorAll(".drawer-header").forEach((btn) => {
      btn.addEventListener("click", () => {
        const drawer = btn.closest(".drawer");
        const body = drawer.querySelector(".drawer-body");
        const open = drawer.classList.contains("open");
        if (open) {
          drawer.classList.remove("open");
          body.style.maxHeight = "0px";
        } else {
          drawer.classList.add("open");
          body.style.maxHeight = body.scrollHeight + "px";
        }
      });
    });

    // Nastaven√≠ v√Ω≈°ky pro p≈ôedem otev≈ôen√Ω ≈°upl√≠k
    document.querySelectorAll(".drawer.open .drawer-body").forEach((body) => {
      body.style.maxHeight = body.scrollHeight + "px";
    });

    // Klik na ‚Äûkostku‚Äú ‚Äì zat√≠m jen zmƒõn√≠ text v prav√©m panelu
    const panelBox = document.getElementById("main-panel-box");

    document.querySelectorAll(".tile[data-title]").forEach((tile) => {
      tile.addEventListener("click", () => {
        const title = tile.getAttribute("data-title");
        const module = tile.getAttribute("data-module") || "modul";

        panelBox.innerHTML = `
          <div class="panel-selected">
            Vybr√°no: <strong>${title}</strong>
          </div>
          <div>
            Modul: <code>${module}</code><br/>
            Tady pozdƒõji dopln√≠me konkr√©tn√≠ funkci / formul√°≈ô / tabulku nebo napojen√≠ na internetov√° data.
            Struktura str√°nky a ≈°upl√≠k≈Ø se kv≈Øli tomu nebude muset mƒõnit ‚Äì jen nahrad√≠me obsah tohoto panelu
            podle hodnoty <code>data-module</code>.
          </div>
        `;
      });/* ---------------------------------------------------------
   MODUL 1 ‚Äì MANU√ÅLN√ç DCF MODEL (10 BOD≈Æ)
   Tento blok vlo≈æ √∫plnƒõ dol≈Ø do <script> p≈ôed </script>.
   Modul funguje samostatnƒõ, nezasahuje do ≈æ√°dn√©ho tv√©ho k√≥du.
--------------------------------------------------------- */

(function () {
  console.log("üìå Modul 1 ‚Äì Manu√°ln√≠ DCF naƒçten");

  document.addEventListener("DOMContentLoaded", () => {
    const panelBox = document.getElementById("main-panel-box");
    const tile = document.querySelector('.tile[data-module="intrinsic-manual"]');

    if (!panelBox || !tile) {
      console.warn("‚ùó Modul 1: dla≈ædice nebo panel nebyly nalezeny.");
      return;
    }

    tile.addEventListener("click", () => {
      renderManualDCF(panelBox);
    });
  });

  function renderManualDCF(panelBox) {
    panelBox.innerHTML = `
      <div class="panel-selected">
        Vybr√°no: <strong>Manu√°ln√≠ DCF model</strong>
      </div>

      <div class="text-muted">
        Kompletn√≠ 10-bodov√Ω DCF model. Vypl≈à hodnoty ruƒçnƒõ a v√Ωpoƒçet spoƒç√≠t√°
        f√©rovou hodnotu akcie na z√°kladƒõ projekce FCF (2 r≈Østov√© f√°ze) a
        termin√°ln√≠ hodnoty p≈ôes n√°sobek P/FCF.
      </div>

      <div class="form-grid" style="margin-top:10px;">
        ${renderField("1) V√Ωchoz√≠ FCF (v mil.)", "dcf_fcf", "number", "1500")}
        ${renderField("2) R≈Øst 1‚Äì5 let (%)", "dcf_g1", "number", "15")}
        ${renderField("3) R≈Øst 6‚Äì10 let (%)", "dcf_g2", "number", "8")}
        ${renderField("4) Diskontn√≠ sazba (%)", "dcf_r", "number", "9")}
        ${renderField("5) Termin√°ln√≠ n√°sobek P/FCF", "dcf_terminal", "number", "15")}
        ${renderField("6) ƒåist√Ω dluh (z√°porn√Ω = hotovost)", "dcf_debt", "number", "-200")}
        ${renderField("7) Poƒçet akci√≠ (v mil.)", "dcf_shares", "number", "500")}
        ${renderField("8) Bezpeƒçnostn√≠ mar≈æe (%)", "dcf_margin", "number", "25")}
        ${renderField("9) Aktu√°ln√≠ cena akcie (voliteln√°)", "dcf_price", "number", "")}
        ${renderField("10) Mƒõna", "dcf_currency", "text", "USD")}
      </div>

      <div style="margin-top:12px; display:flex; gap:8px;">
        <button id="dcf_calc" class="btn">‚öôÔ∏è Spoƒç√≠tat f√©rovou cenu</button>
        <button id="dcf_clear" class="btn btn-secondary">Vymazat</button>
      </div>

      <div id="dcf_result" class="result-box" style="display:none;"></div>
    `;

    initDCFLogic();
  }

  function renderField(label, id, type, placeholder) {
    return `
      <div class="field">
        <label class="field-label">${label}</label>
        <input id="${id}" class="field-input" type="${type}" placeholder="${placeholder}" />
      </div>
    `;
  }

  function getNumber(id) {
    const el = document.getElementById(id);
    if (!el) return null;
    const raw = el.value.replace(",", ".").trim();
    if (raw === "") return null;
    const n = parseFloat(raw);
    return isNaN(n) ? null : n;
  }

  function initDCFLogic() {
    const btnCalc = document.getElementById("dcf_calc");
    const btnClear = document.getElementById("dcf_clear");
    const resultBox = document.getElementById("dcf_result");

    btnCalc.addEventListener("click", () => {
      const fcf0 = getNumber("dcf_fcf");
      const g1 = getNumber("dcf_g1");
      const g2 = getNumber("dcf_g2");
      const r = getNumber("dcf_r");
      const terminal = getNumber("dcf_terminal");
      const debt = getNumber("dcf_debt") || 0;
      const shares = getNumber("dcf_shares");
      const margin = getNumber("dcf_margin") || 0;
      const price = getNumber("dcf_price");
      const currency = document.getElementById("dcf_currency").value || "USD";

      if ([fcf0, g1, g2, r, terminal, shares].includes(null)) {
        alert("Vypl≈à FCF, r≈Østy, diskont, termin√°ln√≠ n√°sobek a poƒçet akci√≠.");
        return;
      }

      const rDec = r / 100;
      let fcf = fcf0;
      let pvSum = 0;
      let fcf10 = 0;

      for (let year = 1; year <= 10; year++) {
        fcf *= 1 + (year <= 5 ? g1 / 100 : g2 / 100);
        pvSum += fcf / Math.pow(1 + rDec, year);
        if (year === 10) fcf10 = fcf;
      }

      const terminalValue = fcf10 * terminal;
      const pvTerminal = terminalValue / Math.pow(1 + rDec, 10);

      const equityValue = pvSum + pvTerminal + debt;

      let fair = equityValue / shares;
      fair *= 1 - margin / 100;

      let diffText = "";
      if (price != null) {
        const pct = ((fair - price) / price) * 100;
        diffText = pct >= 0
          ? `üìà Podhodnoceno o ${pct.toFixed(1)} %`
          : `‚ö†Ô∏è P≈ôedra≈æeno o ${Math.abs(pct).toFixed(1)} %`;
      }

      resultBox.style.display = "block";
      resultBox.innerHTML = `
        <div class="result-main">
          <div>
            <div class="result-value">${fair.toFixed(2)} ${currency}</div>
            <div class="result-note">F√©rov√° cena po bezpeƒçnostn√≠ mar≈æi</div>
          </div>
          <div>${diffText}</div>
        </div>

        <div class="result-note">
          V√Ωpoƒçet zahrnuje 10 let diskontovan√Ωch FCF + termin√°ln√≠ hodnotu (P/FCF √ó FCF v 10. roce)
          + ƒçist√Ω dluh/hotovost.
        </div>
      `;
    });

    btnClear.addEventListener("click", () => {
      document.querySelectorAll(".field-input").forEach(el => el.value = "");
      resultBox.style.display = "none";
      resultBox.innerHTML = "";
    });
  }

})();
    });
  </script>
</body>
</html>
