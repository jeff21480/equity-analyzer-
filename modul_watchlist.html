<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eqity Analyz√©r ‚Äì Watchlist</title>
  <style>
    :root {
      --bg: #050509;
      --bg-alt: #0d0d17;
      --card: #141426;
      --border: #26263c;
      --text: #f7f7ff;
      --muted: #a0a0c2;
      --accent1: #a855f7;
      --accent2: #6366f1;
      --radius-lg: 18px;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.5);
      --tr: 0.18s ease-out;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #181827 0, #050509 42%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 18px 12px 32px;
    }

    .app {
      width: 100%;
      max-width: 1180px;
      background:
        linear-gradient(145deg, rgba(148,27,255,0.32), transparent 40%),
        radial-gradient(circle at bottom, rgba(37,99,235,0.22), transparent 55%),
        var(--bg-alt);
      border-radius: 24px;
      border: 1px solid rgba(148,163,255,0.25);
      box-shadow: var(--shadow-soft);
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .title-box h1 {
      font-size: 20px;
    }

    .title-box p {
      font-size: 12px;
      color: var(--muted);
    }

    .back-btn {
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.5);
      background: rgba(15,23,42,0.9);
      color: var(--text);
      padding: 7px 14px;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      text-decoration: none;
      cursor: pointer;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 330px) minmax(0, 1fr);
      gap: 14px;
      margin-top: 6px;
    }

    @media (max-width: 860px) {
      .layout { grid-template-columns: minmax(0, 1fr); }
    }

    .card {
      background: rgba(7,9,24,0.96);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148,163,255,0.35);
      padding: 12px;
    }

    .card h2 {
      font-size: 15px;
      margin-bottom: 4px;
    }

    .card p {
      font-size: 11px;
      color: var(--muted);
    }

    form {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 12px;
    }

    label span {
      font-size: 11px;
      color: var(--muted);
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    input, textarea, select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(75,85,99,0.9);
      background: #020617;
      padding: 7px 9px;
      color: var(--text);
      font-size: 12px;
    }

    textarea {
      min-height: 52px;
      resize: vertical;
    }

    .buttons-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 6px;
    }

    .btn-primary, .btn-ghost {
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 12px;
      border: 1px solid rgba(148,163,255,0.7);
      cursor: pointer;
    }

    .btn-primary {
      background: linear-gradient(90deg, var(--accent1), var(--accent2));
      border-color: transparent;
      color: #f9fafb;
    }

    .btn-ghost {
      background: transparent;
      color: var(--muted);
    }

    /* Tabulka */
    .table-wrapper {
      margin-top: 8px;
      border-radius: 14px;
      border: 1px solid rgba(31,41,55,0.9);
      overflow: hidden;
      font-size: 11px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #020617;
    }

    thead {
      background: rgba(15,23,42,0.9);
    }

    th, td {
      padding: 7px 8px;
      text-align: left;
      border-bottom: 1px solid rgba(31,41,55,0.9);
    }

    th {
      font-weight: 500;
      color: var(--muted);
      font-size: 10px;
      white-space: nowrap;
    }

    tbody tr:nth-child(even) {
      background: #020617;
    }

    tbody tr:nth-child(odd) {
      background: #020617;
    }

    .badge {
      border-radius: 999px;
      padding: 2px 7px;
      font-size: 10px;
      border: 1px solid rgba(34,197,94,0.5);
      color: #4ade80;
      background: rgba(22,163,74,0.1);
    }

    .row-actions button {
      font-size: 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.6);
      background: transparent;
      color: var(--muted);
      padding: 2px 7px;
      cursor: pointer;
    }

    .empty {
      padding: 10px;
      font-size: 11px;
      color: var(--muted);
      text-align: center;
    }
  </style>
</head>
<body>
  <main class="app">
    <header>
      <div class="title-box">
        <h1>Watchlist &amp; v√Ωsledky</h1>
        <p>Seznam akci√≠, kter√© jsi analyzoval nebo chce≈° sledovat.</p>
      </div>
      <a class="back-btn" href="index.html">
        ‚Üê Zpƒõt na hlavn√≠ str√°nku
      </a>
    </header>

    <section class="layout">
      <!-- VLEVO ‚Äì FORMUL√Å≈ò -->
      <section class="card">
        <h2>P≈ôidat akcii do watchlistu</h2>
        <p>Staƒç√≠ ticker a n√°zev. Ostatn√≠ pole jsou dobrovoln√° ‚Äì pro pozn√°mky a c√≠lov√© ceny.</p>

        <form id="watchlist-form">
          <div class="field">
            <label>
              Ticker (nap≈ô. AAPL, SOFI) <span>*</span>
            </label>
            <input id="ticker" autocomplete="off" required />
          </div>

          <div class="field">
            <label>N√°zev firmy</label>
            <input id="company" autocomplete="off" />
          </div>

          <div class="field">
            <label>C√≠lov√° cena / f√©rov√° hodnota</label>
            <input id="target" autocomplete="off" />
          </div>

          <div class="field">
            <label>Pozn√°mka (d≈Øvod, sc√©n√°≈ô, katalyz√°tor)</label>
            <textarea id="note"></textarea>
          </div>

          <div class="field">
            <label>Priority</label>
            <select id="priority">
              <option value="st≈ôedn√≠">St≈ôedn√≠</option>
              <option value="vysok√°">Vysok√°</option>
              <option value="n√≠zk√°">N√≠zk√°</option>
            </select>
          </div>

          <div class="buttons-row">
            <button type="submit" class="btn-primary">‚ûï P≈ôidat do watchlistu</button>
            <button type="button" id="clear-all" class="btn-ghost">üóë Vymazat cel√Ω seznam</button>
          </div>
        </form>
      </section>

      <!-- VPRAVO ‚Äì TABULKA -->
      <section class="card">
        <h2>M≈Øj watchlist</h2>
        <p>Seznam se ukl√°d√° do tohoto za≈ô√≠zen√≠ (localStorage). Pozdƒõji ho napoj√≠me na API.</p>

        <div class="table-wrapper" id="table-wrapper">
          <div class="empty" id="empty-state">
            Zat√≠m tu nic nen√≠. P≈ôidej prvn√≠ akcii vlevo.
          </div>
          <table id="watchlist-table" style="display:none;">
            <thead>
              <tr>
                <th>Ticker</th>
                <th>Firma</th>
                <th>C√≠lov√° cena</th>
                <th>Priority</th>
                <th>Pozn√°mka</th>
                <th>Akce</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </section>
  </main>

  <script>
    (function () {
      const STORAGE_KEY = "eqity_watchlist";

      const form = document.getElementById("watchlist-form");
      const tickerInput = document.getElementById("ticker");
      const companyInput = document.getElementById("company");
      const targetInput = document.getElementById("target");
      const noteInput = document.getElementById("note");
      const prioritySelect = document.getElementById("priority");

      const table = document.getElementById("watchlist-table");
      const tbody = table.querySelector("tbody");
      const emptyState = document.getElementById("empty-state");
      const clearAllBtn = document.getElementById("clear-all");

      function loadData() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          if (!raw) return [];
          return JSON.parse(raw) || [];
        } catch (e) {
          console.warn("Watchlist ‚Äì nelze naƒç√≠st data:", e);
          return [];
        }
      }

      function saveData(data) {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        } catch (e) {
          console.warn("Watchlist ‚Äì nelze ulo≈æit data:", e);
        }
      }

      function renderTable() {
        const data = loadData();
        tbody.innerHTML = "";

        if (!data.length) {
          table.style.display = "none";
          emptyState.style.display = "block";
          return;
        }

        table.style.display = "table";
        emptyState.style.display = "none";

        data.forEach((row, index) => {
          const tr = document.createElement("tr");

          const tdTicker = document.createElement("td");
          tdTicker.textContent = row.ticker;

          const tdCompany = document.createElement("td");
          tdCompany.textContent = row.company || "‚Äî";

          const tdTarget = document.createElement("td");
          tdTarget.textContent = row.target || "‚Äî";

          const tdPriority = document.createElement("td");
          const badge = document.createElement("span");
          badge.className = "badge";
          badge.textContent = row.priority || "st≈ôedn√≠";
          tdPriority.appendChild(badge);

          const tdNote = document.createElement("td");
          tdNote.textContent = row.note || "";

          const tdActions = document.createElement("td");
          tdActions.className = "row-actions";
          const delBtn = document.createElement("button");
          delBtn.textContent = "Smazat";
          delBtn.addEventListener("click", () => {
            const dataNow = loadData();
            dataNow.splice(index, 1);
            saveData(dataNow);
            renderTable();
          });
          tdActions.appendChild(delBtn);

          tr.appendChild(tdTicker);
          tr.appendChild(tdCompany);
          tr.appendChild(tdTarget);
          tr.appendChild(tdPriority);
          tr.appendChild(tdNote);
          tr.appendChild(tdActions);

          tbody.appendChild(tr);
        });
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const ticker = tickerInput.value.trim().toUpperCase();
        if (!ticker) return;

        const company = companyInput.value.trim();
        const target = targetInput.value.trim();
        const note = noteInput.value.trim();
        const priority = prioritySelect.value;

        const data = loadData();

        // kdy≈æ u≈æ ticker existuje, p≈ôep√≠≈°eme ho
        const existingIndex = data.findIndex((r) => r.ticker === ticker);
        const row = { ticker, company, target, note, priority };

        if (existingIndex >= 0) {
          data[existingIndex] = row;
        } else {
          data.push(row);
        }

        saveData(data);
        renderTable();

        form.reset();
        prioritySelect.value = "st≈ôedn√≠";
        tickerInput.focus();
      });

      clearAllBtn.addEventListener("click", () => {
        if (confirm("Opravdu chce≈° vymazat cel√Ω watchlist z tohoto za≈ô√≠zen√≠?")) {
          saveData([]);
          renderTable();
        }
      });

      renderTable();
    })();
  </script>
</body>
</html>
